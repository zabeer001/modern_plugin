const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SettingsActions-1.0.61-C9uQDebh.js","./cm-1.0.61-D9ug3d5m.js","./redux-1.0.61-CrJ4jvTM.js","./vendor-1.0.61-CN03Eozo.js","./RestApi-1.0.61-DdTZ_pIc.js","./lib-1.0.61-DoXQcMHD.js","./loglevel-1.0.61-BZ7XahX3.js","./lodash-1.0.61-C8OpKhUs.js","./moment-1.0.61-C5S46NFB.js","./ActionsAdmin-1.0.61-DGFUYQF4.js","./hooks-1.0.61-Bklk-gZu.js","./notistack-1.0.61-0awN6uG4.js","./ConfirmDialog-1.0.61-BrxkBu_y.js","./cjs-1.0.61-D_0erLfe.js","./Typography-1.0.61-Cg0Css-P.js","./ButtonBase-1.0.61-BqsrQx8o.js","./useEnhancedEffect-1.0.61-CX4-xj9Z.js","./AdminTheme-1.0.61-D8bUxwpM.js","./DialogContent-1.0.61-Ws3r0VFj.js","./Modal-1.0.61-DVFPMIPt.js","./Spinner-1.0.61-khi9zO7Q.js","./index-1.0.61-Cpc7oUnN.js","./iconBase-1.0.61-C8saXaJ2.js","./index-1.0.61-CxkvNEVW.js","./ctc-1.0.61-D7oYqo2X.js","./useExplorer-1.0.61-BwAinfQj.js","./TextField-1.0.61-DyvT2G_W.js","./Select-1.0.61-DmroHcG5.js","./Menu-1.0.61-D2OtRuzX.js","./ThemeProvider-1.0.61-4HOD8y6D.js","./index-1.0.61-B7tjLD84.js","./createSvgIcon-1.0.61-DDgmYdEo.js","./MenuItem-1.0.61-Bmr1xWyp.js","./FormControlLabel-1.0.61-Bu2IQ4da.js","./Switch-1.0.61-CRYcdQMV.js","./SwitchBase-1.0.61-C2xa6JFZ.js","./SettingsTable-1.0.61-74I_q0Vr.js","./AccordionSummary-1.0.61-B21Kp3oq.js","./Collapse-1.0.61-Cww0NnSm.js","./AccordionDetails-1.0.61-CrQNuW_u.js","./RadioGroup-1.0.61-BZHJMWN9.js","./Radio-1.0.61-BXMcBwcB.js","./cmJson-1.0.61-BLURwXOE.js","./rehyperaw-1.0.61-AkovKNCK.js","./markdown-1.0.61-6nAzZWly.js","./settings-1.0.61-BN5quc55.js","./Link-1.0.61-BHBICLVE.js","./TabPanel-1.0.61-BtYzUOMH.js","./InputAdornment-1.0.61-23wkGu1k.js","./getThemeProps-1.0.61-OfsHdeDz.js","./CardHeader-1.0.61-gDG-f_-J.js","./settings-1.0.61-DuwCupdk.css","./Tooltip-1.0.61-De3BL3Jg.js","./Tooltip-1.0.61--D4jr2go.css","./ActionsExplorer-1.0.61-Bj7vTxIj.js","./index-1.0.61-Cpig8940.js","./ActionsDml-1.0.61-DA32DqSB.js","./ExplorerActionEnum-1.0.61-eclZgKpy.js","./useUiExplorerAction-1.0.61-hK1pO-t3.js","./SettingsColumn-1.0.61-CQg3-LpQ.js","./SettingsRestApi-1.0.61-B7hOOLDy.js","./Autocomplete-1.0.61-CP0PiliY.js","./Close-1.0.61-CiuKDfYz.js","./Chip-1.0.61-C6TjQKDp.js","./main-1.0.61-CGp-2hVp.css","./SettingsReset-1.0.61-yIItZmJn.js","./ActionsSettings-1.0.61-NFzvwy8a.js","./TargetEnum-1.0.61-CIW1jlU5.js","./ScopeEnum-1.0.61-B4DDvIDj.js","./ResizableDrawer-1.0.61-DK4GcbjM.js","./useScreenSize-1.0.61-B4FX7-PC.js"])))=>i.map(i=>d[i]);
import{j as e}from"./cm-1.0.61-D9ug3d5m.js";import{_ as c}from"./cmJson-1.0.61-BLURwXOE.js";import{r as s}from"./redux-1.0.61-CrJ4jvTM.js";import{B as se,a as oe,b as re}from"./settings-1.0.61-BN5quc55.js";import{T as E}from"./Tooltip-1.0.61-De3BL3Jg.js";import{A as ae,T as ne,M as ie}from"./index-1.0.61-B7tjLD84.js";import{u as le,a as ce}from"./hooks-1.0.61-Bklk-gZu.js";import{l as h,aR as B,S as P,ah as me,_ as w,ai as O,b as pe,s as ue,a as m,aS as de,c as N}from"./lib-1.0.61-DoXQcMHD.js";import{A as V}from"./AdminTheme-1.0.61-D8bUxwpM.js";import{B as x,S as f}from"./Spinner-1.0.61-khi9zO7Q.js";import{s as ge}from"./ActionsExplorer-1.0.61-Bj7vTxIj.js";import{e as p}from"./notistack-1.0.61-0awN6uG4.js";import{g as xe,j as fe}from"./index-1.0.61-Cpig8940.js";import{C as he}from"./ConfirmDialog-1.0.61-BrxkBu_y.js";import{g as je}from"./ActionsDml-1.0.61-DA32DqSB.js";import{T as G}from"./Typography-1.0.61-Cg0Css-P.js";import{I as A}from"./iconBase-1.0.61-C8saXaJ2.js";import{C as F,a as H}from"./CardHeader-1.0.61-gDG-f_-J.js";import{T as Se,a as U}from"./TabPanel-1.0.61-BtYzUOMH.js";import{B as b}from"./cjs-1.0.61-D_0erLfe.js";import{E as _e}from"./ExplorerActionEnum-1.0.61-eclZgKpy.js";import{u as Ee}from"./useUiExplorerAction-1.0.61-hK1pO-t3.js";const Ae=()=>{const t=le(n=>n.manager.settings);return h.debug("managerSettings",t),t},be=s.lazy(()=>c(()=>import("./SettingsActions-1.0.61-C9uQDebh.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]),import.meta.url)),Te=s.lazy(()=>c(()=>import("./SettingsTable-1.0.61-74I_q0Vr.js"),__vite__mapDeps([36,1,2,3,30,14,5,6,7,8,15,16,29,19,11,22,10,37,38,39,26,27,28,31,40,41,35,42,43,44,45,46,47,48,13,49,12,17,18,20,50,32,51,52,53,54,4,55,56,57,58]),import.meta.url)),Ce=s.lazy(()=>c(()=>import("./SettingsColumn-1.0.61-CQg3-LpQ.js"),__vite__mapDeps([59,1,2,3,30,14,5,6,7,8,15,16,29,19,11,22,10,37,38,39,26,27,28,31,20,32,42,43,44,45,46,47,48,13,49,12,17,18,50,51,52,53,54,4,55,56,57,58]),import.meta.url)),De=s.lazy(()=>c(()=>import("./SettingsRestApi-1.0.61-B7hOOLDy.js"),__vite__mapDeps([60,1,2,3,30,14,5,6,7,8,15,16,29,19,11,22,10,25,37,38,39,20,26,27,28,31,33,34,35,40,41,61,62,63,42,43,44,45,46,47,48,13,49,12,17,18,50,32,51,52,53,54,4,55,56,57,58,64]),import.meta.url)),Me=s.lazy(()=>c(()=>import("./SettingsReset-1.0.61-yIItZmJn.js"),__vite__mapDeps([65,1,2,3,30,14,5,6,7,8,15,16,29,19,11,22,66,4,67,68,12,13,17,18,37,38,39,26,27,28,31]),import.meta.url)),ve=s.lazy(()=>c(()=>import("./ResizableDrawer-1.0.61-DK4GcbjM.js"),__vite__mapDeps([69,1,2,3,70,5,6,7,8,10,14,29,16,15,19,11,28,30,22]),import.meta.url)),ke=({dbs:t,tbl:n,typ:j})=>{var R,z;h.debug(t,n,j);const l=ce(),[q,K]=s.useState(B.getSelectors().selectManagerSettings(P.getState().manager));h.debug(q);const[u,T]=s.useState(""),[C,W]=s.useState(!1),[D,X]=s.useState({}),[M,d]=s.useState(!1),[Y,v]=s.useState(!1);s.useEffect(()=>{C||$()},[t,n]);const $=()=>{je(t,n,!0,a=>{var o,I;const r=a==null?void 0:a.data;if(h.debug("response data",t,n,r),(o=r==null?void 0:r.access)!=null&&o.select&&Array.isArray(r.access.select)&&r.access.select.includes("POST")){const i={...r.settings};i.list_labels={...r.table_labels},i.form_labels={...r.form_labels},i.column_media={...r.wp_media},delete i.hyperlinks,delete i.ui,delete i.wp;const L={...r};X(L),l(de({settings:i,metaData:L})),W(!0)}else{let i=m.contactSupport;(I=a==null?void 0:a.data)!=null&&I.message&&(i=a.data.message+" - check console for more information"),console.error(i),T(i)}},a=>{console.error("error",a),T(a??m.contactSupport)})};s.useEffect(()=>{u!==""&&(l(me({error:u})),l(w()),l(O()))},[u]);const J=Ae(),Q=((R=V)==null?void 0:R.palette.mode)===pe.LIGHT?(z=V)==null?void 0:z.palette.primary.main:"",k=a=>{l(ue({anchor:a}))},g=()=>{l(O()),l(w())},S=()=>{M?v(!0):g()},y=()=>{const a={...J};let r=!1;ge(t,n,a,o=>{if(o!=null&&o.code&&(o==null?void 0:o.message)!==void 0)switch(o.code){case"ok":p(o.message,{variant:"success"});break;case"info":p(o.message,{variant:"info"});break;default:console.error(o),p(o.message??m.contactSupport,{variant:"error"}),r=!0}else console.error(o),p(m.contactSupport,{variant:"error"}),r=!0},o=>{console.error(o),p(o??m.contactSupport,{variant:"error"}),r=!0}),r||K(B.getSelectors().selectManagerSettings(P.getState().manager)),d(!1)},Z=()=>{M?(y(),setTimeout(()=>{g()},1e3)):g()},[_,ee]=s.useState(0),te=s.useMemo(()=>[{title:"Actions",icon:e.jsx(xe,{})},{title:"Settings",icon:e.jsx(fe,{})}],[]);return u!==""?null:e.jsxs(e.Fragment,{children:[e.jsx(s.Suspense,{fallback:e.jsx(f,{}),children:e.jsxs(ve,{closeDrawer:S,children:[e.jsxs(ae,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(ne,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsxs(x,{sx:{flexGrow:1},children:[e.jsx(G,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{paddingLeft:"6px"},children:"Manage Table"}),e.jsxs(G,{sx:{fontSize:"10px",paddingLeft:"10px"},children:[t," - ",n]})]}),e.jsx(E,{title:"Dock to left",position:"bottom",children:e.jsx(A,{onClick:()=>{k(N.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(se,{})})}),e.jsx(E,{title:"Dock to right",position:"bottom",children:e.jsx(A,{onClick:()=>{k(N.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(oe,{})})}),e.jsx(E,{title:"Close",position:"bottom",children:e.jsx(A,{onClick:S,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(ie,{})})})]}),e.jsx(re,{menuItems:te,menuIndex:_,setMenu:ee})]}),e.jsx(F,{className:"pp-settings-container",children:e.jsx(H,{sx:{padding:0,margin:0},children:C?e.jsx(Se,{value:_,children:e.jsxs(x,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(calc(var(--ppViewHeight, 1vh) * 100) - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(U,{value:0,children:e.jsx(s.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(be,{dbs:t,tbl:n,typ:j,metaData:D})})}),e.jsx(U,{value:1,children:e.jsxs(s.Suspense,{fallback:e.jsx(f,{}),children:[e.jsx(Te,{dbs:t,tbl:n,setIsUpdated:d}),e.jsx(Ce,{dbs:t,tbl:n,setIsUpdated:d}),e.jsx(De,{dbs:t,tbl:n,typ:j,metaData:D,setIsUpdated:d}),e.jsx(Me,{dbs:t,tbl:n})]})})]})}):e.jsx(x,{sx:{padding:"30px"},children:e.jsx(f,{title:"Loading data..."})})})}),e.jsx(F,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:Q},children:e.jsx(H,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:_===0?e.jsx(x,{sx:{height:"38.5px"}}):e.jsxs(e.Fragment,{children:[e.jsx(b,{variant:"outlined",className:"footer_action_button_apply",onClick:y,children:"Apply"}),e.jsx(b,{variant:"outlined",className:"footer_action_button",onClick:Z,children:"OK"}),e.jsx(b,{variant:"outlined",className:"footer_action_button",onClick:S,children:"Cancel"})]})})})]})}),e.jsx(he,{title:"Close Manage Table?",message:"All uncommitted changes will be lost!",open:Y,setOpen:v,onConfirm:()=>{g()}})]})},ye=()=>{const t=Ee();return e.jsx(e.Fragment,{children:t!==void 0&&t.action===_e.MANAGE&&e.jsx(ke,{dbs:t.dbs,tbl:t.tbl,typ:t.typ})})},Ze=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"}));export{Ze as E,Ae as u};
