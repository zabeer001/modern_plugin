const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TableQuery-1.0.61-BFTtSjov.js","./cmJson-1.0.61-BLURwXOE.js","./cm-1.0.61-D9ug3d5m.js","./redux-1.0.61-CrJ4jvTM.js","./vendor-1.0.61-CN03Eozo.js","./lib-1.0.61-DoXQcMHD.js","./loglevel-1.0.61-BZ7XahX3.js","./lodash-1.0.61-C8OpKhUs.js","./moment-1.0.61-C5S46NFB.js","./rehyperaw-1.0.61-AkovKNCK.js","./markdown-1.0.61-6nAzZWly.js","./SharedContainer-1.0.61-D5Lln0NA.js","./hooks-1.0.61-Bklk-gZu.js","./Spinner-1.0.61-khi9zO7Q.js","./Typography-1.0.61-Cg0Css-P.js","./AdminTheme-1.0.61-D8bUxwpM.js","./ActionsDml-1.0.61-DA32DqSB.js","./RestApi-1.0.61-DdTZ_pIc.js","./notistack-1.0.61-0awN6uG4.js","./useAppFunctions-1.0.61-EdKk0_Mu.js","./useMetadata-1.0.61-CVl9oDgw.js","./useStoreFormSettings-1.0.61-CgHnNhxx.js","./useRemoveAppFromStore-1.0.61-E72jey9_.js","./Languages-1.0.61-BxgPwugF.js","./AppTheme-1.0.61-CGnMRNDC.js","./index-1.0.61-CRnugLvI.js","./getThemeProps-1.0.61-OfsHdeDz.js","./useEnhancedEffect-1.0.61-CX4-xj9Z.js","./useChartSettings-1.0.61-BIp9UVZM.js","./useLocaleUd-1.0.61-DEEqF_bH.js","./useScreenSize-1.0.61-B4FX7-PC.js","./cjs-1.0.61-D_0erLfe.js","./ButtonBase-1.0.61-BqsrQx8o.js","./index-1.0.61-LP991tft.js","./dayjs.min-1.0.61-21Xi_c_9.js","./index-1.0.61-B7tjLD84.js","./ThemeProvider-1.0.61-4HOD8y6D.js","./Modal-1.0.61-DVFPMIPt.js","./iconBase-1.0.61-C8saXaJ2.js","./dompurify-1.0.61-DhD2mIk-.js","./useFormDetails-1.0.61-677sicqv.js","./DynamicModeEnum-1.0.61-BXuL5kgA.js","./StoreTypeEnum-1.0.61-Tot-ESpR.js","./FallbackSpinner-1.0.61-s3WTN65t.js","./main-1.0.61.js","./SharedContainer-1.0.61-CL-1K3JO.css","./Tooltip-1.0.61-De3BL3Jg.js","./Tooltip-1.0.61--D4jr2go.css","./SanitizeComponent-1.0.61-jz3CtJfW.js","./index-1.0.61-Cpc7oUnN.js","./tanstack-1.0.61-ncdkBwIj.js","./index.esm-1.0.61-Dhj7A6Yv.js","./createSvgIcon-1.0.61-DDgmYdEo.js","./Stack-1.0.61-CNGwl0k7.js","./InputAdornment-1.0.61-23wkGu1k.js","./Select-1.0.61-DmroHcG5.js","./Menu-1.0.61-D2OtRuzX.js","./Radio-1.0.61-BXMcBwcB.js","./SwitchBase-1.0.61-C2xa6JFZ.js","./Checkbox-1.0.61-BlN5bjuH.js","./Chip-1.0.61-C6TjQKDp.js","./Collapse-1.0.61-Cww0NnSm.js","./AlertTitle-1.0.61-hpo1u3Vv.js","./Close-1.0.61-CiuKDfYz.js","./TextField-1.0.61-DyvT2G_W.js","./MenuItem-1.0.61-Bmr1xWyp.js","./TableRow-1.0.61-70IJJfOz.js","./DialogContent-1.0.61-Ws3r0VFj.js","./ConfirmDialog-1.0.61-BrxkBu_y.js","./ListItemIcon-1.0.61-P8epLVMP.js","./TableHead-1.0.61-urAqheBu.js","./Divider-1.0.61-C8DX248W.js","./FormControlLabel-1.0.61-Bu2IQ4da.js","./Switch-1.0.61-CRYcdQMV.js","./Autocomplete-1.0.61-CP0PiliY.js","./Slider-1.0.61-BGScnB2M.js","./visuallyHidden-1.0.61-Dan1xhjv.js","./TimePicker-1.0.61-CeYQPlC5.js","./useMobilePicker-1.0.61-Dvb2yEEp.js","./ListItem-1.0.61-t1ycs9HY.js","./timeViewRenderers-1.0.61-Cu86BQXJ.js","./DateTimePicker-1.0.61-B22uat3C.js","./Tabs-1.0.61-Bhozjonn.js","./dateViewRenderers-1.0.61-7dkntk_V.js","./DatePicker-1.0.61-CDckGagl.js","./tab-1.0.61-B4c65fpQ.js","./useTableCode-1.0.61-BufK_zHB.js","./useTableColumnOrder-1.0.61-Ds81s_GP.js","./useLocaleMrt-1.0.61-C3Pa4C9e.js","./TableQuery-1.0.61-Ba9mvhDx.css","./SettingsTable-1.0.61-CYRoxdhs.js","./useTableUpdater-1.0.61-D-pqUshE.js","./settings-1.0.61-BN5quc55.js","./Link-1.0.61-BHBICLVE.js","./TabPanel-1.0.61-BtYzUOMH.js","./CardHeader-1.0.61-gDG-f_-J.js","./settings-1.0.61-DuwCupdk.css","./AccordionSummary-1.0.61-B21Kp3oq.js","./AccordionDetails-1.0.61-CrQNuW_u.js","./RadioGroup-1.0.61-BZHJMWN9.js","./CssUnitTextField-1.0.61-BJIwFsSj.js","./DefaultWhere-1.0.61-D25JpoiD.js","./PremiumFeature-1.0.61-BxBWJ4MJ.js","./ToggleButtonGroup-1.0.61-31GAUuTm.js","./SettingsFormRelationships-1.0.61-SE39OEDo.js","./ComponentColumn-1.0.61-CqYC2iYt.js","./ActionsExplorer-1.0.61-Bj7vTxIj.js","./ActionsApp-1.0.61-CDhPoAR0.js","./useApp-1.0.61-C7D5dm7s.js","./useFormUpdater-1.0.61-D3TDEm-F.js","./Stepper-1.0.61-DGQ0aYov.js","./SettingsColumns-1.0.61-C78Bqosa.js","./useMetadataColumns-1.0.61-TT5M5XKt.js","./useTableIsUpdated-1.0.61-CCSFtZgQ.js","./index-1.0.61-BRtOqdFl.js","./SettingsCharts-1.0.61-B7IpUtl9.js","./TableChartSelection-1.0.61-TuMkRlx1.js","./SettingsMaps-1.0.61-Bc0d8r97.js","./MapsApiKey-1.0.61-BZRYtG-S.js","./SettingsMapMarkers-1.0.61-BiQurno6.js","./useMapUpdater-1.0.61-BifPauYu.js","./react-number-format.es-1.0.61-3K4hYgeH.js","./SettingsTableCode-1.0.61-DvriXwsy.js","./useGlobalCode-1.0.61-BrC3IXaa.js","./SettingsTableGlobalCode-1.0.61-kBV4xGaP.js","./index-1.0.61-Cpig8940.js","./TreeItem2Provider-1.0.61-BYj1n-QF.js","./index-1.0.61-CxkvNEVW.js","./ctc-1.0.61-D7oYqo2X.js","./ResizableDrawer-1.0.61-DK4GcbjM.js","./ThemeSettings-1.0.61-D8yINEx0.js"])))=>i.map(i=>d[i]);
import{j as e}from"./cm-1.0.61-D9ug3d5m.js";import{r as o}from"./redux-1.0.61-CrJ4jvTM.js";import{A as H,a as oe}from"./AdminTheme-1.0.61-D8bUxwpM.js";import{l as a,H as re,b3 as f,S as u,a0 as k,a1 as ne,b as ie,bR as le,s as ae,bS as ce,bT as ue,a4 as me,a as v,c as G,Z as de}from"./lib-1.0.61-DoXQcMHD.js";import{_ as m}from"./cmJson-1.0.61-BLURwXOE.js";import{Q as he,a as be}from"./tanstack-1.0.61-ncdkBwIj.js";import{F as pe}from"./FallbackSpinner-1.0.61-s3WTN65t.js";import{u as K,a as W}from"./hooks-1.0.61-Bklk-gZu.js";import{d as xe}from"./ActionsSettings-1.0.61-NFzvwy8a.js";import{T as E}from"./Tooltip-1.0.61-De3BL3Jg.js";import{S as ge}from"./ScopeEnum-1.0.61-B4DDvIDj.js";import{h as fe,k as Se,l as je,g as Te,f as _e}from"./index-1.0.61-Cpig8940.js";import{A as Ce,T as ke,M as ve,d as Ee}from"./index-1.0.61-B7tjLD84.js";import{e as g}from"./notistack-1.0.61-0awN6uG4.js";import{B as ye,a as Be,b as Le}from"./settings-1.0.61-BN5quc55.js";import{C as Ae}from"./ConfirmDialog-1.0.61-BrxkBu_y.js";import{B as Re,S as d}from"./Spinner-1.0.61-khi9zO7Q.js";import{u as De}from"./useTableUpdater-1.0.61-D-pqUshE.js";import{i as Pe}from"./index-1.0.61-LP991tft.js";import{D as ze}from"./DynamicModeEnum-1.0.61-BXuL5kgA.js";import{C as Oe}from"./useFormDetails-1.0.61-677sicqv.js";import{T as Me}from"./Typography-1.0.61-Cg0Css-P.js";import{I as y}from"./iconBase-1.0.61-C8saXaJ2.js";import{C as Q,a as q}from"./CardHeader-1.0.61-gDG-f_-J.js";import{T as Ve,a as h}from"./TabPanel-1.0.61-BtYzUOMH.js";import{B}from"./cjs-1.0.61-D_0erLfe.js";import{T as we}from"./ThemeProvider-1.0.61-4HOD8y6D.js";const Ne=o.lazy(()=>m(()=>import("./TableQuery-1.0.61-BFTtSjov.js").then(t=>t.T),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89]),import.meta.url)),Fe=({appId:t,display:r,refresh:n,metaData:l,showForm:c})=>{a.debug(t,r,n);const b=new he;return e.jsx(be,{client:b,children:e.jsx(o.Suspense,{fallback:e.jsx(pe,{}),children:e.jsx(Ne,{appId:t,display:r,refresh:n,showForm:c,metaData:l})})})},Ue=t=>{const r=K(n=>n.ui.tableSettings.isOpen&&n.ui.tableSettings.appId===t);return a.debug("tableSettingsVisible",r),r},He=()=>{const t=K(r=>r.ui.tableSettings.hideThemeSettings);return a.debug("hideThemeSetting",t),t},Ge=t=>{const r=W();return l=>{r(re({appId:t,property:{reloadLookups:new Date().getTime(),reloadLookupList:l}}))}},Qe=o.lazy(()=>m(()=>import("./SettingsTable-1.0.61-CYRoxdhs.js"),__vite__mapDeps([90,2,3,4,5,6,7,8,12,11,1,9,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,91,92,93,94,54,55,56,52,68,67,95,64,65,96,97,61,98,99,57,58,72,73,100,85,74,63,60,101,48,49,102,103,79,104,105,106,107,59,108,109,110]),import.meta.url)),qe=o.lazy(()=>m(()=>import("./SettingsColumns-1.0.61-C78Bqosa.js"),__vite__mapDeps([111,2,3,4,112,35,14,5,6,7,8,32,27,36,37,18,38,41,11,1,9,10,12,13,15,16,17,19,20,21,22,23,24,25,26,28,29,30,31,33,34,39,40,42,43,44,45,49,91,109,110,52,61,113,64,55,56,99,57,58,72,93,114,65,101,59,68,67,92,94,54,95,96,97,98,73,46,47,75,76,102,74,63,60,87]),import.meta.url)),Ke=o.lazy(()=>m(()=>import("./SettingsCharts-1.0.61-B7IpUtl9.js"),__vite__mapDeps([115,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,91,116,49,87,88,64,55,56,52,65,74,63,60,92,93,94,54,68,67,95,96,102,97,61,98,72,73,58,103]),import.meta.url)),We=o.lazy(()=>m(()=>import("./SettingsMaps-1.0.61-Bc0d8r97.js"),__vite__mapDeps([117,2,3,4,5,6,7,8,11,1,9,10,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,91,92,93,94,54,55,56,52,68,67,95,64,65,96,102,49,118,108,97,61,98,72,73,58,103,119,120,100,99,57,75,76,121]),import.meta.url)),Xe=o.lazy(()=>m(()=>import("./SettingsTableCode-1.0.61-DvriXwsy.js"),__vite__mapDeps([122,2,3,4,94,54,31,14,5,6,7,8,32,27,26,55,56,36,35,37,18,38,52,12,123,86,91,102,49,15,64,124,125,13,126,59,58,61,20,127,128,97]),import.meta.url)),Ye=o.lazy(()=>m(()=>import("./ResizableDrawer-1.0.61-DK4GcbjM.js"),__vite__mapDeps([129,2,3,4,30,5,6,7,8,12,14,36,27,32,37,18,56,35,38]),import.meta.url)),Ze=o.lazy(()=>m(()=>import("./ThemeSettings-1.0.61-D8yINEx0.js"),__vite__mapDeps([130,2,3,4,12,5,6,7,8,24,25,14,26,27,102,49,38,32,15,64,55,56,36,35,37,18,52,33,13,73,58,53,54,31,75,76,72,93,99,57,100,41,92,94,68,67,95,65,96,97,61,98]),import.meta.url)),$e=({appId:t,metaData:r})=>{var O,M;a.debug(t,r);const n=W(),l=He();Oe();const c=De(t),b=Ge(t),[i,X]=o.useState(f.getSelectors().selectTableById(u.getState().tables,t));a.debug(i);const[L,Y]=o.useState(k.getSelectors().selectChart(u.getState().charts,t));a.debug(L);const[Z,Je]=o.useState(ne.getSelectors().selectThemeById(u.getState().themes,t));a.debug(Z);const[$,A]=o.useState(!1),R=()=>f.getSelectors().selectTableIsUpdated(u.getState().tables,t),S=s=>{c(s)},I=((O=H)==null?void 0:O.palette.mode)===ie.LIGHT?(M=H)==null?void 0:M.palette.primary.main:"",D=s=>{n(ae({anchor:s}))},P=()=>{n(ue({appId:t,tableState:i}));const s=k.getSelectors().selectChart(u.getState().charts,t),x=(s==null?void 0:s.data)!==void 0?[...s==null?void 0:s.data]:[],_={...L};_.data=[...x],n(me({appId:t,chartState:_}))},p=()=>{n(ce()),S(!1)},j=()=>{R()?A(!0):(P(),p())},T=()=>{xe(t,ge.GLOBAL,s=>{if(a.debug(s),s!=null&&s.code&&(s==null?void 0:s.message)!==void 0)switch(s.code){case"ok":X(f.getSelectors().selectTableById(u.getState().tables,t)),Y(k.getSelectors().selectChart(u.getState().charts,t)),g(s.message,{variant:"success"});const x=[];f.getSelectors().selectTableById(u.getState().tables,t).columns.map((C,V)=>{var w,N,F,U;C.lookup!==void 0&&(((N=(w=i==null?void 0:i.columns)==null?void 0:w[V])==null?void 0:N.lookup)===void 0||!Pe((U=(F=i==null?void 0:i.columns)==null?void 0:F[V])==null?void 0:U.lookup,C.lookup))&&x.push(C.columnName)}),x.length>0&&b(x);break;case"info":g(s.message,{variant:"info"});break;default:console.error(s),g(s.message??v.contactSupport,{variant:"error"})}else console.error(s),g(v.contactSupport,{variant:"error"})},s=>{console.error("error",s),g(s??v.contactSupport,{variant:"error"})}),S(!1)},J=()=>{R()?(T(),setTimeout(()=>{p()},1e3)):p()},ee=Ue(t),[z,te]=o.useState(0),se=o.useMemo(()=>{const s=[{title:"Table",icon:e.jsx(fe,{})},{title:"Columns",icon:e.jsx(Se,{})},{title:"Maps",icon:e.jsx(Ee,{})},{title:"Charts",icon:e.jsx(je,{})},{title:"Hooks",icon:e.jsx(Te,{})},{title:"Theme",icon:e.jsx(_e,{})}];return le(r)?s.splice(0,2):l?s.splice(0,5):s},[l]);return e.jsx(e.Fragment,{children:ee&&e.jsxs(e.Fragment,{children:[e.jsx(o.Suspense,{fallback:e.jsx(d,{}),children:e.jsxs(Ye,{closeDrawer:j,children:[e.jsxs(Ce,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(ke,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(Me,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Table Builder"}),e.jsx(E,{title:"Dock to left",position:"bottom",children:e.jsx(y,{onClick:()=>{D(G.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(ye,{})})}),e.jsx(E,{title:"Dock to right",position:"bottom",children:e.jsx(y,{onClick:()=>{D(G.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(Be,{})})}),e.jsx(E,{title:"Close",position:"bottom",children:e.jsx(y,{onClick:j,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(ve,{})})})]}),e.jsx(Le,{menuItems:se,menuIndex:z,setMenu:te})]}),e.jsx(Q,{className:"pp-settings-container",children:e.jsx(q,{sx:{padding:0,margin:0},children:e.jsx(Ve,{value:z,children:e.jsxs(Re,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(calc(var(--ppViewHeight, 1vh) * 100) - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(h,{value:0,children:e.jsx(o.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(Qe,{appId:t,metaData:r})})}),e.jsx(h,{value:1,className:"pp-column-settings-container",children:e.jsx(o.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(qe,{appId:t,metaData:r})})}),e.jsx(h,{value:2,children:e.jsx(o.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(We,{appId:t})})}),e.jsx(h,{value:3,children:e.jsx(o.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(Ke,{appId:t})})}),e.jsx(h,{value:4,children:e.jsx(o.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(Xe,{appId:t,tableSettings:i,buttonEditorOk:T})})}),l!==!0&&e.jsx(h,{value:5,children:e.jsx(o.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(Ze,{appId:t,source:ze.TABLE,setIsUpdated:S})})})]})})})}),e.jsx(Q,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:I},children:e.jsxs(q,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(B,{variant:"outlined",className:"footer_action_button_apply",onClick:T,children:"Apply"}),e.jsx(B,{variant:"outlined",className:"footer_action_button",onClick:J,children:"OK"}),e.jsx(B,{variant:"outlined",className:"footer_action_button",onClick:j,children:"Cancel"})]})})]})}),e.jsx(Ae,{title:"Close Table Builder?",message:"All uncommitted changes will be lost!",open:$,setOpen:A,onConfirm:()=>{P(),p()},onKeep:()=>{p()}})]})})},Ie=({appId:t,display:r,refresh:n,showForm:l,metaData:c})=>{a.debug(t,r,n);const b=o.useMemo(()=>de(c),[c]),i=o.useMemo(()=>oe(),[]);return e.jsxs(e.Fragment,{children:[e.jsx(Fe,{appId:t,display:r,refresh:n,showForm:l,metaData:c}),b&&e.jsx(we,{theme:i,children:e.jsx($e,{appId:t,metaData:c})})]})},yt=Object.freeze(Object.defineProperty({__proto__:null,default:Ie},Symbol.toStringTag,{value:"Module"}));export{yt as T,Ue as u};
