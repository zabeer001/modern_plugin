const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./QueryContainer-1.0.61-WZREP5Z8.js","./cmJson-1.0.61-BLURwXOE.js","./cm-1.0.61-D9ug3d5m.js","./redux-1.0.61-CrJ4jvTM.js","./vendor-1.0.61-CN03Eozo.js","./lib-1.0.61-DoXQcMHD.js","./loglevel-1.0.61-BZ7XahX3.js","./lodash-1.0.61-C8OpKhUs.js","./moment-1.0.61-C5S46NFB.js","./rehyperaw-1.0.61-AkovKNCK.js","./markdown-1.0.61-6nAzZWly.js","./FallbackSpinner-1.0.61-s3WTN65t.js","./Spinner-1.0.61-khi9zO7Q.js","./Typography-1.0.61-Cg0Css-P.js","./TabPanel-1.0.61-BtYzUOMH.js","./InputAdornment-1.0.61-23wkGu1k.js","./cjs-1.0.61-D_0erLfe.js","./ButtonBase-1.0.61-BqsrQx8o.js","./useEnhancedEffect-1.0.61-CX4-xj9Z.js","./getThemeProps-1.0.61-OfsHdeDz.js","./Select-1.0.61-DmroHcG5.js","./Menu-1.0.61-D2OtRuzX.js","./ThemeProvider-1.0.61-4HOD8y6D.js","./index-1.0.61-B7tjLD84.js","./Modal-1.0.61-DVFPMIPt.js","./notistack-1.0.61-0awN6uG4.js","./iconBase-1.0.61-C8saXaJ2.js","./createSvgIcon-1.0.61-DDgmYdEo.js"])))=>i.map(i=>d[i]);
import{_ as Ie}from"./cmJson-1.0.61-BLURwXOE.js";import{j as e}from"./cm-1.0.61-D9ug3d5m.js";import{r as c}from"./redux-1.0.61-CrJ4jvTM.js";import{e as L,l as Ee,n as Ae,o as Oe,_ as le,$ as ae,a0 as Qe,x as ce,a1 as de,M as qe,f as Le,a2 as ke,A as Be,T as De,E as Re,F as _e}from"./index-1.0.61-B7tjLD84.js";import{G as Ue,I as k}from"./iconBase-1.0.61-C8saXaJ2.js";import{C as Ge,P as W,D as V,a as pe}from"./ConfirmDialog-1.0.61-BrxkBu_y.js";import{a as B}from"./hooks-1.0.61-Bklk-gZu.js";import{b as U,c as ze,d as ue,e as He,f as xe,g as he,h as Fe,i as Ke}from"./StartQueryBuilder-1.0.61-DpIXLFtV.js";import{u as ge}from"./MainQueryBuilder-1.0.61-CAqlR54P.js";import{C as m,o as We,l as P,a as Ve}from"./lib-1.0.61-DoXQcMHD.js";import{R as S,a as fe}from"./RestApi-1.0.61-DdTZ_pIc.js";import{B as p,S as $e}from"./Spinner-1.0.61-khi9zO7Q.js";import{P as Ye,b as Je,c as Xe,T as me,a as te}from"./TabPanel-1.0.61-BtYzUOMH.js";import{e as Ze}from"./index-1.0.61-Cpig8940.js";import{S as Ne}from"./SanitizeComponent-1.0.61-jz3CtJfW.js";import{A as ne}from"./AdminTheme-1.0.61-D8bUxwpM.js";import{e as E}from"./notistack-1.0.61-0awN6uG4.js";import{F as G,T as be,b as q}from"./TextField-1.0.61-DyvT2G_W.js";import{F as z}from"./FormControlLabel-1.0.61-Bu2IQ4da.js";import{C as es}from"./Checkbox-1.0.61-BlN5bjuH.js";import{P as ss,M as ie}from"./Menu-1.0.61-D2OtRuzX.js";import{D as rs}from"./Divider-1.0.61-C8DX248W.js";import{D as $,a as Y,b as J}from"./DialogContent-1.0.61-Ws3r0VFj.js";import{I as ts}from"./InputAdornment-1.0.61-23wkGu1k.js";import{T as je}from"./TabList-1.0.61-CK8HCF5k.js";import{T as F}from"./Tabs-1.0.61-Bhozjonn.js";import{B as A}from"./cjs-1.0.61-D_0erLfe.js";import{S as K}from"./Switch-1.0.61-CRYcdQMV.js";import{M as v}from"./MenuItem-1.0.61-Bmr1xWyp.js";/* empty css                    */import{T as ns}from"./Typography-1.0.61-Cg0Css-P.js";import{P as is}from"./ButtonBase-1.0.61-BqsrQx8o.js";const os=r=>{const t=typeof r=="function",s=c.useRef(r);c.useEffect(()=>{s.current=r}),c.useEffect(()=>{if(t){const n=o=>{const d=s.current(o);if(typeof d=="string")return o.preventDefault(),o.returnValue=d;if(o.defaultPrevented)return o.returnValue=""};return window.addEventListener("beforeunload",n),()=>{window.removeEventListener("beforeunload",n)}}},[t])};function ye(r){return Ue({attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M16 3v2h-15v-2h15zM1 10h15v-2h-15v2zM1 15h15v-2h-15v2z"},child:[]}]})(r)}const oe=(r,t,s,n=!1)=>{S(m.appUrlQbOpen,{access:r},t,s,n)},$s=(r,t,s,n,o,d,l,i=!1)=>{S(m.appUrlQbExecute,{dbs:r,query:t,limit:s,protect:n,params:o},d,l,i)},Ys=(r,t,s,n,o,d,l,i,u,a,g=!1)=>{S(m.appUrlQbSave,{access:r,dbs:t,name:s,query:n,vqb:o,old_name:d,insert:l,params:i},u,a,g)},ls=(r,t,s,n,o=!1)=>{S(m.appUrlQbDelete,{access:r,name:t},s,n,o)},Js=(r,t,s,n,o,d,l=!1)=>{S(m.appUrlQbCopy,{access_from:r,from:t,access_to:s,to:n},o,d,l)},Xs=(r,t,s,n=!1)=>{S(m.appUrlQbHints,{dbs:r},t,s,n)},ve=(r,t,s,n=!1)=>{S(m.appUrlQbAutoComplete,{enable:r},t,s,n)},as=(r,t,s=!1)=>{S(m.appUrlQbCronSchedules,{},r,t,s)},Zs=(r,t,s,n,o,d=!1)=>{S(m.appUrlQbCronDelete,{name:r,access:t,params:s},n,o,d)},cs=({queryName:r,query:t,checked:s,setChecked:n,queryAccessType:o,deleteQuery:d})=>{const[l,i]=c.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(p,{sx:{position:"relative",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(G,{sx:{marginLeft:"12px"},children:e.jsx(z,{control:e.jsx(es,{checked:s,disabled:(t==null?void 0:t.query)===void 0||(t==null?void 0:t.schema_name)===void 0,onClick:u=>{n(!s),u.preventDefault(),u.stopPropagation()}}),label:r,sx:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}})}),e.jsx(p,{children:e.jsx(Ye,{variant:"popover",children:u=>{var a,g;return e.jsxs(e.Fragment,{children:[e.jsxs(p,{sx:{whiteSpace:"nowrap"},children:[e.jsx(L,{title:"Delete query "+r,children:e.jsx(k,{color:"error",onClick:()=>{i(!0)},children:e.jsx(Ee,{})})}),e.jsx(L,{title:"Preview query "+r,children:e.jsx(k,{...Je(u),children:e.jsx(Ae,{})})})]}),e.jsxs(ss,{...Xe(u),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)","& > .MuiPaper-root":{resize:"both",minWidth:"400px",maxWidth:"80vw",maxHeight:"80vh",padding:"30px"}},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",flexDirection:"row",gap:"5px",...(t==null?void 0:t.schema_name)===void 0&&{color:(a=ne)==null?void 0:a.palette.error.dark}},children:[e.jsx(Ze,{}),e.jsx("strong",{children:(t==null?void 0:t.schema_name)??"Unknown"})]}),e.jsx(rs,{sx:{margin:"10px 0"}}),e.jsx(Ne,{html:We((t==null?void 0:t.query)??"<span style='color:"+((g=ne)==null?void 0:g.palette.error.dark)+"'>Invalid query</span>").replaceAll(`
`,"<br/>")})]})]})}})})]}),e.jsx(Ge,{title:"Delete query",message:e.jsxs("div",{children:["Are you sure you want to delete query ",r,"?",e.jsx("br",{}),e.jsx("strong",{children:"This action cannot be undone!"})]}),open:l,setOpen:i,onConfirm:()=>{d(o,r),ls(o,r,u=>{P.debug(u),E("Query successfully deleted",{variant:"success"})},u=>{console.error(u),E(u,{variant:"error"})})}})]})};var f=(r=>(r.GLOBAL="global",r.USER="user",r))(f||{});const X=()=>({createQueryKey:(s,n)=>(s===f.GLOBAL?"G-":"U-")+n,getQueryKey:s=>s.substring(2)}),ds=({open:r,setOpen:t})=>{const s=B(),n=ge(),{createQueryKey:o}=X(),[d,l]=c.useState(!1),[i,u]=c.useState(!1),[a,g]=c.useState({}),[y,O]=c.useState([]),[H,M]=c.useState(!1),[D,b]=c.useState(!1),[w,Q]=c.useState({}),[R,Z]=c.useState([]),[N,we]=c.useState("");c.useEffect(()=>{oe(f.USER,h=>{P.debug(h),g((h==null?void 0:h.data)??{}),l(!0)},()=>{console.error("Error loading Query Builder list."),u(!0),l(!0)}),oe(f.GLOBAL,h=>{P.debug(h),Q((h==null?void 0:h.data)??{}),M(!0)},()=>{console.error("Error loading Query Builder list."),b(!0),M(!0)})},[]);const Ce=(h,x)=>{if(h===f.USER){const j=[...y];let C=j.indexOf(x);C!==-1&&j.splice(C,1),O(j);const I={...a};delete I[x],g(I)}else{const j=[...R],C=j.indexOf(x);C!==-1&&j.splice(C,1),Z(j);const I={...w};delete I[x],Q(I)}},ee=(h,x,j,C,I,se)=>h?x?e.jsx(p,{children:"Unable to read query list."}):Object.keys(j).length===0?e.jsx(p,{children:"No queries found."}):e.jsx(p,{sx:{height:"380px",overflowY:"auto",paddingRight:"10px"},children:Object.keys(j).map(T=>n.queries[o(se,T)]||!T.toLowerCase().includes(N.toLowerCase())?null:e.jsx(cs,{queryName:T,query:j[T],checked:C.includes(T),setChecked:Me=>{const _=[...C];if(Me)_.push(T);else{const re=_.indexOf(T);re!==-1&&_.splice(re,1)}I(_)},queryAccessType:se,deleteQuery:Ce},T))}):e.jsx($e,{title:"Loading queries..."}),[Te,Pe]=c.useState("user");return e.jsxs($,{open:r,onClose:()=>t(!1),PaperComponent:W,sx:{"& .MuiPaper-root":{width:"600px",height:"600px"}},"aria-labelledby":"open-query-dialog",closeAfterTransition:!1,children:[e.jsx(V,{sx:{cursor:"move"},id:"draggable-dialog-title",children:e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Open Query"}),e.jsx(be,{type:"text",value:N,onChange:h=>{we(h.target.value)},sx:{width:"160px",backgroundColor:"#fff",fontSize:"1em",margin:0,padding:0,borderRadius:"4px","&.MuiFormControl-root.MuiTextField-root .MuiInputBase-root":{paddingRight:0},"&.MuiFormControl-root.MuiTextField-root input":{padding:"8px"}},slotProps:{input:{startAdornment:e.jsx(ts,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:e.jsx(Oe,{})})}}})]})}),e.jsx(Y,{sx:{zIndex:1,overflow:"hidden"},children:e.jsx(pe,{component:"div",sx:{"& div.MuiTabPanel-root":{paddingTop:"10px",paddingRight:0,paddingBottom:0,paddingLeft:0},"& svg":{height:"1.2em",width:"1.2em"}},children:e.jsxs(me,{value:Te,children:[e.jsxs(je,{onChange:(h,x)=>{Pe(x)},children:[e.jsx(F,{label:e.jsxs(p,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:"5px"},children:[e.jsx(le,{}),e.jsx("span",{children:"My Queries"})]}),value:"user"}),e.jsx(F,{label:e.jsxs(p,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:"5px"},children:[e.jsx(ae,{}),e.jsx("span",{children:"Global Queries"})]}),value:"global"})]}),e.jsx(te,{value:"user",children:ee(d,i,a,y,O,f.USER)}),e.jsx(te,{value:"global",children:ee(H,D,w,R,Z,f.GLOBAL)})]})})}),e.jsxs(J,{sx:{padding:"30px","& button":{width:"120px"}},children:[e.jsx(A,{autoFocus:!0,variant:"contained",disabled:y.length===0&&R.length===0,onClick:h=>{t(!1),y.map(x=>{s(U({queryKey:o(f.USER,x),query:{access:f.USER,queryName:x,query:a[x].query,schemaName:a[x].schema_name,isVisual:a[x].is_visual,params:a[x].params}}))}),R.map(x=>{s(U({queryKey:o(f.GLOBAL,x),query:{access:f.GLOBAL,queryName:x,query:w[x].query,schemaName:w[x].schema_name,isVisual:w[x].is_visual,params:w[x].params}}))}),h.stopPropagation()},children:"Open"}),e.jsx(A,{variant:"contained",onClick:h=>{t(!1),h.stopPropagation()},children:"Cancel"})]})]})},Se=({open:r,setOpen:t,encryption:s})=>{const[n,o]=c.useState(""),[d,l]=c.useState(s);return e.jsxs($,{open:r,onClose:()=>t(!1),PaperComponent:W,"aria-labelledby":"open-query-dialog",closeAfterTransition:!1,sx:{"& .MuiPaper-root":{position:"relative",width:"440px",padding:"20px"}},children:[e.jsxs(V,{component:"div",sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(p,{children:"AI Assistant Setup"}),e.jsx(p,{children:e.jsx(L,{title:"Help",children:e.jsx(k,{size:"small",sx:{padding:0},children:e.jsx(Qe,{})})})})]}),e.jsx(Y,{children:e.jsxs(p,{sx:{paddingTop:"20px",display:"grid",gap:"30px"},children:[e.jsx(be,{type:"text",label:"Enter your ChatGPT API Key",fullWidth:!0,required:!0,value:n,onChange:i=>{o(i.target.value)},helperText:e.jsx(p,{children:"The AI Assistant requires a unique ChatGPT API Key and must be enabled for each user independently."})}),e.jsxs(G,{fullWidth:!0,children:[e.jsx(z,{control:e.jsx(K,{checked:d,disabled:!s,onChange:(i,u)=>{l(u),i.stopPropagation()}}),label:"Encrypt ChatGPT API Key",labelPlacement:"end"}),e.jsxs(q,{children:["Maintains an encrypted copy of your ChatGPT API Key",s?"":" (this feature is currently disabled)","."]})]})]})}),e.jsxs(J,{children:[e.jsx(A,{variant:"contained",onClick:async()=>{try{await fe(m.appUrlAiEnable,{key:n,encrypt:d}).then(i=>{var u;P.debug(i),((u=i==null?void 0:i.data)==null?void 0:u.code)==="ok"?(t(!1),E("API Key successfully saved",{variant:"success"})):E(Ve.contactSupport,{variant:"error"})}).catch(i=>{console.error(i)})}catch(i){console.error(i)}},sx:{width:"100px"},children:"OK"}),e.jsx(A,{variant:"contained",onClick:()=>{t(!1)},sx:{width:"100px"},children:"Cancel"})]})]})},Ns=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"})),ps=({open:r,setOpen:t})=>{const s=B(),n=ge(),[o,d]=c.useState(!1),[l,i]=c.useState(!1),u=async()=>{try{await fe(m.appUrlAiEnabled,{}).then(a=>{var g,y;P.debug(a),i(((y=(g=a==null?void 0:a.data)==null?void 0:g.data)==null?void 0:y.encryption)===!0)}).catch(a=>{console.error(a)})}catch(a){console.error(a)}};return c.useEffect(()=>{u()},[]),e.jsxs(e.Fragment,{children:[e.jsxs($,{open:r,onClose:()=>t(!1),PaperComponent:W,"aria-labelledby":"open-query-dialog",closeAfterTransition:!1,children:[e.jsx(V,{sx:{cursor:"move"},id:"draggable-dialog-title",children:e.jsx(p,{children:"Query Settings"})}),e.jsx(Y,{sx:{zIndex:1,paddingTop:0,paddingBottom:0},children:e.jsxs(pe,{component:"div",sx:{width:"480px"},children:[e.jsx("fieldset",{className:"pp-fieldset",children:e.jsxs(G,{fullWidth:!0,children:[e.jsx(z,{control:e.jsx(K,{checked:n.protectWordPressTables,onChange:a=>{s(ze({protectWordPressTables:!n.protectWordPressTables})),a.stopPropagation()}}),label:"WordPress Table Protection"}),e.jsxs(q,{sx:{marginTop:"10px"},children:["By default, WordPress tables are protected to prevent accidental or harmful changes. While you can disable this protection under certain restrictions, it's important to note that ",e.jsx("strong",{children:"DROP"}),", ",e.jsx("strong",{children:"ALTER"}),", and ",e.jsx("strong",{children:"TRUNCATE"})," operations on WordPress tables are never allowed for safety reasons."]}),e.jsxs(q,{sx:{marginTop:"10px"},children:["With protection disabled, the plugin permits ",e.jsx("strong",{children:"INSERT"}),", ",e.jsx("strong",{children:"UPDATE"}),", and ",e.jsx("strong",{children:"DELETE"})," actions on WordPress tables."]}),e.jsxs(q,{sx:{marginTop:"10px",marginBottom:"10px"},children:[e.jsx("strong",{children:"Caution:"})," Modifying WordPress tables directly is not recommended unless you fully understand the risks."]})]})}),e.jsx("fieldset",{className:"pp-fieldset",style:{marginTop:"30px"},children:e.jsxs(G,{fullWidth:!0,children:[e.jsx(z,{control:e.jsx(K,{checked:n.showSqlHints,onChange:a=>{ve(!n.showSqlHints,g=>{P.debug(g)},g=>{console.error(g)}),s(ue({showSqlHints:!n.showSqlHints})),a.stopPropagation()}}),label:"Show SQL hints"}),e.jsx(q,{sx:{marginTop:"10px",marginBottom:"10px"},children:"Provides autocomplete support when writing queries. May require additional load time to fetch database, table, and column details."})]})})]})}),e.jsxs(J,{sx:{padding:"30px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(A,{variant:"outlined",onClick:a=>{d(!0),a.stopPropagation()},children:"Update ChatGPT API Key"}),e.jsx(A,{variant:"contained",onClick:a=>{t(!1),a.stopPropagation()},children:"Done"})]})]}),o&&e.jsx(Se,{open:o,setOpen:d,encryption:l})]})},us=()=>{const r=B(),{createQueryKey:t}=X(),[s,n]=c.useState(null),o=!!s,[d,l]=c.useState(!1),[i,u]=c.useState(!1),[a,g]=c.useState(1),[y,O]=c.useState(null),H=b=>{O(b.currentTarget)},M=()=>{O(null)},D=b=>{const w=xe.getSelectors().selectQueryBuilder(he.getState().sql),Q=a===0?"New Query":`New Query ${a}`;r(U({queryKey:t(b,Q),query:{access:b,queryName:Q,query:"",schemaName:w.databases.defaultDatabase,isVisual:!1,isInserting:!0,params:{}}})),g(a+1)};return c.useEffect(()=>{m.appPlugin&&(window.ppActionOpenQueriesMenu=b=>{n(b.currentTarget)})},[]),e.jsxs(e.Fragment,{children:[e.jsxs(e.Fragment,{children:[e.jsx(L,{title:"Queries",children:e.jsx(k,{sx:{color:"inherit",padding:0,marginRight:"5px"},onClick:b=>{n(b.currentTarget),b.stopPropagation()},children:e.jsx(ye,{})})}),e.jsxs(ie,{anchorEl:s,open:o,onClose:()=>n(null),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[e.jsxs(v,{onClick:H,children:[e.jsx(ce,{}),e.jsx("span",{style:{marginLeft:"10px"},children:"New"})]}),e.jsxs(ie,{id:"submenu",anchorEl:y,open:y!==null,onClose:M,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},MenuListProps:{onMouseLeave:M},children:[e.jsx(v,{onClick:()=>{n(null),M(),D(f.USER)},children:"Private query"}),e.jsx(v,{onClick:()=>{n(null),M(),D(f.GLOBAL)},children:"Global query"})]}),e.jsxs(v,{onClick:()=>{n(null),l(!0)},children:[e.jsx(de,{}),e.jsx("span",{style:{marginLeft:"10px"},children:"Open"})]}),e.jsx(v,{divider:!0,sx:{margin:"8px 0",padding:0}}),e.jsxs(v,{onClick:()=>{n(null),r(He())},children:[e.jsx(qe,{}),e.jsx("span",{style:{marginLeft:"10px"},children:"Close All"})]}),e.jsx(v,{divider:!0,sx:{margin:"8px 0",padding:0}}),e.jsxs(v,{onClick:()=>{n(null),u(!0)},children:[e.jsx(Le,{}),e.jsx("span",{style:{marginLeft:"10px"},children:"Setting"})]}),e.jsxs(v,{onClick:()=>{window.open("https://wpdataaccess.com/docs/sql-query-builder/query-builder-getting-started/","_blank")},children:[e.jsx(ke,{}),e.jsx("span",{style:{marginLeft:"10px"},children:"Help"})]})]})]}),d&&e.jsx(ds,{open:d,setOpen:l}),i&&e.jsx(ps,{open:i,setOpen:u})]})},xs=()=>{const r=B();return()=>{as(s=>{if(P.debug(s),(s==null?void 0:s.code)==="ok"&&s.message.cron&&s.message.schedules){const n=[];Object.keys(s.message.schedules).map(o=>n.push({key:o,interval:Number(s.message.schedules[o].interval)})),r(Fe({cron:s.message.cron,schedules:s.message.schedules,intervalSorted:n.sort((o,d)=>o.interval-d.interval),mailEnabled:s.message.mail}))}else console.error("Invalid response"),E("Invalid response",{variant:"error"})},s=>{console.error(s),E(s,{variant:"error"})})}},hs=c.lazy(()=>Ie(()=>import("./QueryContainer-1.0.61-WZREP5Z8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]),import.meta.url)),gs=({queryBuilderState:r})=>{const t=B(),{getQueryKey:s,createQueryKey:n}=X();xs();const[o,d]=c.useState(!1);return c.useEffect(()=>{const l=xe.getSelectors().selectQueryBuilder(he.getState().sql);if(Object.keys(l.queries).length===0){const i="New Query";t(U({queryKey:n(f.USER,i),query:{access:f.USER,queryName:i,query:"",schemaName:l.databases.defaultDatabase,isVisual:!1,isInserting:!0,params:{}}}))}ve(void 0,i=>{P.debug(i),(i==null?void 0:i.code)==="ok"&&(i==null?void 0:i.message)=="1"&&t(ue({showSqlHints:!0}))},i=>{console.error(i)}),m.appPlugin&&(window.ppActionFullScreen=()=>{d(!0)})},[]),os(Object.keys(r.queries).filter(l=>r.queries[l].isUpdated===!0).length>0?l=>l.preventDefault():void 0),e.jsxs(p,{className:o?"pp-fullscreen":"pp-container",sx:{...o&&{position:"fixed",zIndex:9999999,top:0,left:0,width:"100vw",height:"calc(var(--ppViewHeight, 1vh) * 100)",overflow:"hidden",backgroundColor:"#fff",display:"grid",gridTemplateRows:"69px 48px 1fr",gridGap:0,"& .pp-query-builder-panels":{height:"calc(calc(var(--ppViewHeight, 1vh) * 100) - 69px - 48px - 5px)",display:"grid"},"& header":{boxShadow:"none"},"& .pp-query-builder-panels > .MuiTabPanel-root":{height:"calc(calc(var(--ppViewHeight, 1vh) * 100) - 69px - 48px - 5px)",display:"grid",gridTemplateRows:"69px 1fr 48px 1fr",paddingBottom:0},"& .pp-query-builder-panels > .MuiTabPanel-root[hidden]":{display:"none",gridTemplateRows:"unset"},"& header, & .pp-query-builder-panels > .MuiTabPanel-root .MuiPaper-root, & .pp-sql-query-builder-editor, , & .pp-sql-query-builder-editor div":{borderRadius:0,padding:0},"& .pp-query-builder-panels > .MuiTabPanel-root .MuiPaper-root:hover":{boxShadow:"none"},"& .pp-query-builder-panels > .MuiTabPanel-root .pp-sql-query-builder-editor, & .pp-query-builder-panels > .MuiTabPanel-root .pp-sql-query-builder-results, & .pp-query-builder-panels > .MuiTabPanel-root .pp-sql-query-builder-response-paper":{height:"calc((calc(var(--ppViewHeight, 1vh) * 100) - 69px - 48px - 69px - 48px - 5px) / 2)"},"& .pp-query-builder-panels > .MuiTabPanel-root table.pp-sql-query-builder-table tbody":{height:"calc(((calc(var(--ppViewHeight, 1vh) * 100) - 69px - 48px - 69px - 48px - 5px) / 2) - 30px - 5px - 30px)"},"& .pp-query-builder-panels > .MuiTabPanel-root .pp-sql-query-builder-response":{height:"calc(((calc(var(--ppViewHeight, 1vh) * 100) - 69px - 48px - 69px - 48px - 5px) / 2) - 10px)",paddingLeft:"10px"},"& .pp-query-builder-panels > .MuiTabPanel-root .pp-sql-query-builder-editor .cm-editor":{resize:"none"},"& .pp-query-builder-panels > .MuiTabPanel-root .pp-sql-query-builder-editor > div":{boxShadow:"none",marginLeft:0,marginRight:0}}},children:[e.jsx(Be,{position:"relative",sx:{margin:"0 0 5px 0"},children:e.jsxs(De,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"18px",lineHeight:"18px"},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(us,{}),e.jsx(ns,{variant:"subtitle1",children:"SQL Query Builder"})]}),e.jsx(p,{children:e.jsx(L,{title:"Toggle full screen",children:e.jsx(k,{sx:{color:"inherit",padding:0},onClick:()=>{d(!o)},children:o?e.jsx(Re,{}):e.jsx(_e,{})})})})]})}),e.jsxs(me,{value:r.tabIndex,children:[e.jsx(p,{sx:{display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center",gridGap:"8px",paddingLeft:"8px",paddingRight:"4px"},children:e.jsxs(je,{orientation:"horizontal",variant:"scrollable",scrollButtons:!0,allowScrollButtonsMobile:!0,onChange:(l,i)=>{t(Ke({tabIndex:i}))},sx:{"& .MuiButtonBase-root.Mui-disabled":{display:"none"}},children:[...Object.keys(r.queries).map(l=>e.jsx(F,{label:e.jsxs(p,{sx:{display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"start",gap:"5px","& svg":{height:"1.2em",width:"1.2em"}},children:[r.queries[l].access===f.GLOBAL?e.jsx(ae,{}):e.jsx(le,{}),e.jsx(p,{sx:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:"300px",textTransform:"none",fontWeight:"bold"},children:s(l)})]}),value:l}))]})}),e.jsxs(p,{className:"pp-query-builder-panels",children:[...Object.keys(r.queries).map(l=>e.jsx(c.Suspense,{children:e.jsx(hs,{queries:r.queries,queryKey:l,databases:r.databases,fullScreen:o},l)}))]}),Object.keys(r.queries).length===0&&e.jsxs(is,{sx:{padding:"50px",marginTop:"5px"},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx("span",{children:"Open"}),e.jsx(ye,{}),e.jsx("strong",{children:"Menu"})]}),e.jsxs(p,{sx:{margin:"20px 0 0 0",display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(ce,{})," ",e.jsx("strong",{children:"New"})," to create new query"]}),e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(de,{})," ",e.jsx("strong",{children:"Open"})," to edit existing query"]})]})]})]})]})},er=Object.freeze(Object.defineProperty({__proto__:null,default:gs},Symbol.toStringTag,{value:"Module"}));export{f as A,er as Q,Ys as a,ls as b,xs as c,$s as d,Xs as e,Zs as f,Ns as g,Js as q,X as u};
