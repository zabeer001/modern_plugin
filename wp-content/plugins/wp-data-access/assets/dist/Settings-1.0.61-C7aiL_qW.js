const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SettingsColumns-1.0.61-DbLwKfdF.js","./cm-1.0.61-D9ug3d5m.js","./redux-1.0.61-CrJ4jvTM.js","./vendor-1.0.61-CN03Eozo.js","./useMetadataColumns-1.0.61-TT5M5XKt.js","./index-1.0.61-B7tjLD84.js","./Typography-1.0.61-Cg0Css-P.js","./lib-1.0.61-DoXQcMHD.js","./loglevel-1.0.61-BZ7XahX3.js","./lodash-1.0.61-C8OpKhUs.js","./moment-1.0.61-C5S46NFB.js","./ButtonBase-1.0.61-BqsrQx8o.js","./useEnhancedEffect-1.0.61-CX4-xj9Z.js","./ThemeProvider-1.0.61-4HOD8y6D.js","./Modal-1.0.61-DVFPMIPt.js","./notistack-1.0.61-0awN6uG4.js","./iconBase-1.0.61-C8saXaJ2.js","./DynamicModeEnum-1.0.61-BXuL5kgA.js","./SharedContainer-1.0.61-D5Lln0NA.js","./cmJson-1.0.61-BLURwXOE.js","./rehyperaw-1.0.61-AkovKNCK.js","./markdown-1.0.61-6nAzZWly.js","./hooks-1.0.61-Bklk-gZu.js","./Spinner-1.0.61-khi9zO7Q.js","./AdminTheme-1.0.61-D8bUxwpM.js","./ActionsDml-1.0.61-DA32DqSB.js","./RestApi-1.0.61-DdTZ_pIc.js","./useAppFunctions-1.0.61-EdKk0_Mu.js","./useMetadata-1.0.61-CVl9oDgw.js","./useStoreFormSettings-1.0.61-CgHnNhxx.js","./useRemoveAppFromStore-1.0.61-E72jey9_.js","./Languages-1.0.61-BxgPwugF.js","./AppTheme-1.0.61-CGnMRNDC.js","./index-1.0.61-CRnugLvI.js","./getThemeProps-1.0.61-OfsHdeDz.js","./useChartSettings-1.0.61-BIp9UVZM.js","./useLocaleUd-1.0.61-DEEqF_bH.js","./useScreenSize-1.0.61-B4FX7-PC.js","./cjs-1.0.61-D_0erLfe.js","./index-1.0.61-LP991tft.js","./dayjs.min-1.0.61-21Xi_c_9.js","./dompurify-1.0.61-DhD2mIk-.js","./useFormDetails-1.0.61-677sicqv.js","./StoreTypeEnum-1.0.61-Tot-ESpR.js","./FallbackSpinner-1.0.61-s3WTN65t.js","./main-1.0.61.js","./SharedContainer-1.0.61-CL-1K3JO.css","./index-1.0.61-Cpc7oUnN.js","./useTableUpdater-1.0.61-D-pqUshE.js","./useFormUpdater-1.0.61-D3TDEm-F.js","./Stepper-1.0.61-DGQ0aYov.js","./createSvgIcon-1.0.61-DDgmYdEo.js","./Collapse-1.0.61-Cww0NnSm.js","./useTableIsUpdated-1.0.61-CCSFtZgQ.js","./TextField-1.0.61-DyvT2G_W.js","./Select-1.0.61-DmroHcG5.js","./Menu-1.0.61-D2OtRuzX.js","./RadioGroup-1.0.61-BZHJMWN9.js","./Radio-1.0.61-BXMcBwcB.js","./SwitchBase-1.0.61-C2xa6JFZ.js","./FormControlLabel-1.0.61-Bu2IQ4da.js","./Link-1.0.61-BHBICLVE.js","./index-1.0.61-BRtOqdFl.js","./MenuItem-1.0.61-Bmr1xWyp.js","./DefaultWhere-1.0.61-D25JpoiD.js","./Checkbox-1.0.61-BlN5bjuH.js","./ConfirmDialog-1.0.61-BrxkBu_y.js","./DialogContent-1.0.61-Ws3r0VFj.js","./settings-1.0.61-BN5quc55.js","./TabPanel-1.0.61-BtYzUOMH.js","./InputAdornment-1.0.61-23wkGu1k.js","./CardHeader-1.0.61-gDG-f_-J.js","./settings-1.0.61-DuwCupdk.css","./AccordionSummary-1.0.61-B21Kp3oq.js","./AccordionDetails-1.0.61-CrQNuW_u.js","./Switch-1.0.61-CRYcdQMV.js","./Tooltip-1.0.61-De3BL3Jg.js","./Tooltip-1.0.61--D4jr2go.css","./PremiumFeature-1.0.61-BxBWJ4MJ.js","./Slider-1.0.61-BGScnB2M.js","./visuallyHidden-1.0.61-Dan1xhjv.js","./EnumTypeEnum-1.0.61-Ws4BsaYD.js","./react-number-format.es-1.0.61-3K4hYgeH.js","./ResizableDrawer-1.0.61-DK4GcbjM.js","./SettingsForm-1.0.61-B6VQWbN4.js","./CssUnitTextField-1.0.61-BJIwFsSj.js","./SettingsFormRelationships-1.0.61-SE39OEDo.js","./ComponentColumn-1.0.61-CqYC2iYt.js","./ActionsExplorer-1.0.61-Bj7vTxIj.js","./Autocomplete-1.0.61-CP0PiliY.js","./Close-1.0.61-CiuKDfYz.js","./Chip-1.0.61-C6TjQKDp.js","./ActionsApp-1.0.61-CDhPoAR0.js","./useApp-1.0.61-C7D5dm7s.js","./ToggleButtonGroup-1.0.61-31GAUuTm.js","./ThemeSettings-1.0.61-D8yINEx0.js","./Stack-1.0.61-CNGwl0k7.js","./SettingsFormCode-1.0.61-C7aczDw5.js","./SettingsTableGlobalCode-1.0.61-kBV4xGaP.js","./index-1.0.61-Cpig8940.js","./TreeItem2Provider-1.0.61-BYj1n-QF.js","./useFormColumns-1.0.61-Bxx6puVx.js","./index-1.0.61-CxkvNEVW.js","./ctc-1.0.61-D7oYqo2X.js","./useGlobalCode-1.0.61-BrC3IXaa.js"])))=>i.map(i=>d[i]);
import{_ as p}from"./cmJson-1.0.61-BLURwXOE.js";import{j as e}from"./cm-1.0.61-D9ug3d5m.js";import{r as s}from"./redux-1.0.61-CrJ4jvTM.js";import{l as n,b3 as Q,S as l,b5 as A,a1 as Z,b as $,bR as I,s as ee,bU as te,bV as oe,bW as se,a as h,bX as re,c as D}from"./lib-1.0.61-DoXQcMHD.js";import{u as P,a as ie}from"./hooks-1.0.61-Bklk-gZu.js";import{A as y}from"./AdminTheme-1.0.61-D8bUxwpM.js";import{e as ne,d as me}from"./ActionsSettings-1.0.61-NFzvwy8a.js";import{S as L}from"./ScopeEnum-1.0.61-B4DDvIDj.js";import{e as c}from"./notistack-1.0.61-0awN6uG4.js";import{T as b}from"./Tooltip-1.0.61-De3BL3Jg.js";import{m as ae,k as le,g as ce,f as ue}from"./index-1.0.61-Cpig8940.js";import{A as pe,T as de,M as fe}from"./index-1.0.61-B7tjLD84.js";import{B as ge,a as xe,b as Se}from"./settings-1.0.61-BN5quc55.js";import{C as he}from"./ConfirmDialog-1.0.61-BrxkBu_y.js";import{u as be}from"./SharedContainer-1.0.61-D5Lln0NA.js";import{T as O}from"./TargetEnum-1.0.61-CIW1jlU5.js";import{B as je,S as u}from"./Spinner-1.0.61-khi9zO7Q.js";import{u as Te,a as _e}from"./useTableIsUpdated-1.0.61-CCSFtZgQ.js";import{u as Ce}from"./useMetadata-1.0.61-CVl9oDgw.js";import{D as ke}from"./DynamicModeEnum-1.0.61-BXuL5kgA.js";import{T as Fe}from"./Typography-1.0.61-Cg0Css-P.js";import{I as j}from"./iconBase-1.0.61-C8saXaJ2.js";import{C as z,a as M}from"./CardHeader-1.0.61-gDG-f_-J.js";import{T as ve,a as f}from"./TabPanel-1.0.61-BtYzUOMH.js";import{B as T}from"./cjs-1.0.61-D_0erLfe.js";import"./vendor-1.0.61-CN03Eozo.js";import"./rehyperaw-1.0.61-AkovKNCK.js";import"./markdown-1.0.61-6nAzZWly.js";import"./loglevel-1.0.61-BZ7XahX3.js";import"./lodash-1.0.61-C8OpKhUs.js";import"./moment-1.0.61-C5S46NFB.js";import"./RestApi-1.0.61-DdTZ_pIc.js";import"./ButtonBase-1.0.61-BqsrQx8o.js";import"./useEnhancedEffect-1.0.61-CX4-xj9Z.js";import"./ThemeProvider-1.0.61-4HOD8y6D.js";import"./Modal-1.0.61-DVFPMIPt.js";import"./Link-1.0.61-BHBICLVE.js";import"./Menu-1.0.61-D2OtRuzX.js";import"./TextField-1.0.61-DyvT2G_W.js";import"./Select-1.0.61-DmroHcG5.js";import"./createSvgIcon-1.0.61-DDgmYdEo.js";import"./InputAdornment-1.0.61-23wkGu1k.js";import"./getThemeProps-1.0.61-OfsHdeDz.js";import"./MenuItem-1.0.61-Bmr1xWyp.js";import"./DialogContent-1.0.61-Ws3r0VFj.js";import"./ActionsDml-1.0.61-DA32DqSB.js";import"./useAppFunctions-1.0.61-EdKk0_Mu.js";import"./useStoreFormSettings-1.0.61-CgHnNhxx.js";import"./useRemoveAppFromStore-1.0.61-E72jey9_.js";import"./Languages-1.0.61-BxgPwugF.js";import"./AppTheme-1.0.61-CGnMRNDC.js";import"./index-1.0.61-CRnugLvI.js";import"./useChartSettings-1.0.61-BIp9UVZM.js";import"./useLocaleUd-1.0.61-DEEqF_bH.js";import"./useScreenSize-1.0.61-B4FX7-PC.js";import"./index-1.0.61-LP991tft.js";import"./dayjs.min-1.0.61-21Xi_c_9.js";import"./dompurify-1.0.61-DhD2mIk-.js";import"./useFormDetails-1.0.61-677sicqv.js";import"./StoreTypeEnum-1.0.61-Tot-ESpR.js";import"./FallbackSpinner-1.0.61-s3WTN65t.js";import"./main-1.0.61.js";const Be=t=>{const r=P(m=>m.ui.formSettings.isOpen&&m.ui.formSettings.appId===t);return n.debug(t,r),r},Ee=()=>{const t=P(r=>r.ui.formSettings.hideThemeSettings);return n.debug("hideThemeSetting",t),t},Re=s.lazy(()=>p(()=>import("./SettingsColumns-1.0.61-DbLwKfdF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82]),import.meta.url)),Ae=s.lazy(()=>p(()=>import("./ResizableDrawer-1.0.61-DK4GcbjM.js"),__vite__mapDeps([83,1,2,3,37,7,8,9,10,22,6,13,12,11,14,15,56,5,16]),import.meta.url)),De=s.lazy(()=>p(()=>import("./SettingsForm-1.0.61-B6VQWbN4.js"),__vite__mapDeps([84,1,2,3,7,8,9,10,22,49,6,50,11,12,51,52,14,15,78,47,16,24,54,55,56,13,5,68,61,69,70,38,34,66,67,23,71,63,72,73,74,57,58,59,60,75,85,28,86,87,88,26,89,90,91,92,65,93,19,20,21,64,17,94,42,30,31,29]),import.meta.url)),ye=s.lazy(()=>p(()=>import("./ThemeSettings-1.0.61-D8yINEx0.js"),__vite__mapDeps([95,1,2,3,22,7,8,9,10,32,33,6,34,12,78,47,16,11,24,54,55,56,13,5,14,15,51,39,23,75,59,96,70,38,79,80,60,61,57,58,85,17,68,69,66,67,71,63,72,73,52,74]),import.meta.url)),Le=s.lazy(()=>p(()=>import("./SettingsFormCode-1.0.61-C7aczDw5.js"),__vite__mapDeps([97,1,2,3,69,70,38,6,7,8,9,10,11,12,34,55,56,13,5,14,15,16,51,98,22,99,23,100,65,59,52,78,47,24,54,101,28,102,103,104,73]),import.meta.url)),qt=({appId:t})=>{var E,R;n.debug(t);const r=ie(),m=Ee(),U=Ce(t),[_]=s.useState(Q.getSelectors().selectTableById(l.getState().tables,t));n.debug(_);const[g,V]=s.useState(A.getSelectors().selectForm(l.getState().forms,t));n.debug(g);const w=be(t),[N,Oe]=s.useState(Z.getSelectors().selectThemeById(l.getState().themes,t));n.debug(N);const G=Te(t),C=_e(t),d=i=>{r(te({appId:t,isUpdated:i}))},[H,k]=s.useState(!1),q=((E=y)==null?void 0:E.palette.mode)===$.LIGHT?(R=y)==null?void 0:R.palette.primary.main:"",F=i=>{r(ee({anchor:i}))},v=()=>{g!==void 0&&r(se({appId:t,formState:g}))},a=()=>{r(oe()),d(!1)},x=()=>{C?k(!0):(v(),a())},S=()=>{{const i=l.getState().ui.formSettings;n.debug(i),ne(t,L.GLOBAL,i.isRelationTable===!0?O.RFORM:O.FORM,o=>{if(n.debug(o),o!=null&&o.code&&(o==null?void 0:o.message)!==void 0)switch(o.code){case"ok":V(A.getSelectors().selectForm(l.getState().forms,t)),c(o.message,{variant:"success"}),w.columns.map((Y,J)=>{Y.lookup!==void 0&&r(re({appId:t,index:J}))});break;case"info":c(o.message,{variant:"info"});break;default:console.error(o),c(o.message??h.contactSupport,{variant:"error"})}else console.error(o),c(h.contactSupport,{variant:"error"})},o=>{console.error("error",o),c(o??h.contactSupport,{variant:"error"})}),G&&me(t,L.GLOBAL,o=>{n.debug(o)},o=>{console.error("error",o)}),d(!1)}},K=()=>{C?(S(),setTimeout(()=>{a()},1e3)):a()},[B,W]=s.useState(0),X=s.useMemo(()=>{const i=[{title:"Form",icon:e.jsx(ae,{})},{title:"Columns",icon:e.jsx(le,{})},{title:"Hooks",icon:e.jsx(ce,{})},{title:"Theme",icon:e.jsx(ue,{})}];return I(U)?i.splice(0,2):m?i.splice(0,3):i},[m]);return Be(t)!==!0?null:e.jsxs(e.Fragment,{children:[e.jsx(s.Suspense,{fallback:e.jsx(u,{}),children:e.jsxs(Ae,{closeDrawer:x,children:[e.jsxs(pe,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(de,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(Fe,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Form Builder"}),e.jsx(b,{title:"Dock to left",position:"bottom",children:e.jsx(j,{onClick:()=>{F(D.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(ge,{})})}),e.jsx(b,{title:"Dock to right",position:"bottom",children:e.jsx(j,{onClick:()=>{F(D.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(xe,{})})}),e.jsx(b,{title:"Close",position:"bottom",children:e.jsx(j,{onClick:x,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(fe,{})})})]}),e.jsx(Se,{menuItems:X,menuIndex:B,setMenu:W})]}),e.jsx(z,{className:"pp-settings-container",children:e.jsx(M,{sx:{padding:0,margin:0},children:e.jsx(ve,{value:B,children:e.jsxs(je,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(calc(var(--ppViewHeight, 1vh) * 100) - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(f,{value:0,children:e.jsx(s.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(De,{appId:t})})}),e.jsx(f,{value:1,className:"pp-column-settings-container",children:e.jsx(s.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(Re,{appId:t})})}),e.jsx(f,{value:2,children:e.jsx(s.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(Le,{appId:t,tableSettings:_,setUpdateStatus:d,buttonEditorOk:S})})}),m!==!0&&e.jsx(f,{value:3,children:e.jsx(s.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(ye,{appId:t,source:ke.FORM,setIsUpdated:d})})})]})})})}),e.jsx(z,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:q},children:e.jsxs(M,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(T,{variant:"outlined",className:"footer_action_button_apply",onClick:S,children:"Apply"}),e.jsx(T,{variant:"outlined",className:"footer_action_button",onClick:K,children:"OK"}),e.jsx(T,{variant:"outlined",className:"footer_action_button",onClick:x,children:"Cancel"})]})})]})}),e.jsx(he,{title:"Close Form Builder?",message:"All uncommitted changes will be lost!",open:H,setOpen:k,onConfirm:()=>{v(),a()},onKeep:()=>{a()}})]})};export{qt as default};
