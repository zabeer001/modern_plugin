import{j as d}from"./cm-1.0.61-D9ug3d5m.js";import{u as V}from"./useStoreFormSettings-1.0.61-CgHnNhxx.js";import{l as F,o as w}from"./lib-1.0.61-DoXQcMHD.js";import{B as A}from"./Spinner-1.0.61-khi9zO7Q.js";import{a as E}from"./TextField-1.0.61-DyvT2G_W.js";import{L as R,a as G}from"./Menu-1.0.61-D2OtRuzX.js";import{g as P,l as L,L as T}from"./ListItem-1.0.61-t1ycs9HY.js";import{r as j}from"./redux-1.0.61-CrJ4jvTM.js";import{i as U,j as D,c as S,l as M,r as q,m as z,o as O}from"./Typography-1.0.61-Cg0Css-P.js";import{u as K}from"./useEnhancedEffect-1.0.61-CX4-xj9Z.js";import{a as W,B as H}from"./ButtonBase-1.0.61-BqsrQx8o.js";import{L as J}from"./ListItemIcon-1.0.61-P8epLVMP.js";import{C as Q}from"./Checkbox-1.0.61-BlN5bjuH.js";import{L as X}from"./ListItemText-1.0.61-BEyq6rhn.js";import"./vendor-1.0.61-CN03Eozo.js";import"./loglevel-1.0.61-BZ7XahX3.js";import"./lodash-1.0.61-C8OpKhUs.js";import"./moment-1.0.61-C5S46NFB.js";import"./Select-1.0.61-DmroHcG5.js";import"./index-1.0.61-B7tjLD84.js";import"./ThemeProvider-1.0.61-4HOD8y6D.js";import"./Modal-1.0.61-DVFPMIPt.js";import"./notistack-1.0.61-0awN6uG4.js";import"./iconBase-1.0.61-C8saXaJ2.js";import"./createSvgIcon-1.0.61-DDgmYdEo.js";import"./MenuItem-1.0.61-Bmr1xWyp.js";import"./SwitchBase-1.0.61-C2xa6JFZ.js";const Y=(t,r)=>{const{ownerState:e}=t;return[r.root,e.dense&&r.dense,e.alignItems==="flex-start"&&r.alignItemsFlexStart,e.divider&&r.divider,!e.disableGutters&&r.gutters]},Z=t=>{const{alignItems:r,classes:e,dense:g,disabled:p,disableGutters:n,divider:f,selected:b}=t,u=M({root:["root",g&&"dense",!n&&"gutters",f&&"divider",p&&"disabled",r==="flex-start"&&"alignItemsFlexStart",b&&"selected"]},P,e);return{...e,...u}},_=D(H,{shouldForwardProp:t=>q(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:Y})(z(({theme:t})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${L.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:O(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${L.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:O(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${L.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:O(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:O(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${L.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${L.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:({ownerState:r})=>r.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:r})=>!r.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:r})=>r.dense,style:{paddingTop:4,paddingBottom:4}}]}))),N=j.forwardRef(function(r,e){const g=U({props:r,name:"MuiListItemButton"}),{alignItems:p="center",autoFocus:n=!1,component:f="div",children:b,dense:v=!1,disableGutters:u=!1,divider:k=!1,focusVisibleClassName:y,selected:C=!1,className:$,...m}=g,h=j.useContext(R),B=j.useMemo(()=>({dense:v||h.dense||!1,alignItems:p,disableGutters:u}),[p,h.dense,v,u]),a=j.useRef(null);K(()=>{n&&a.current&&a.current.focus()},[n]);const o={...g,alignItems:p,dense:B.dense,disableGutters:u,divider:k,selected:C},s=Z(o),i=W(a,e);return d.jsx(R.Provider,{value:B,children:d.jsx(_,{ref:i,href:m.href||m.to,component:(m.href||m.to)&&f==="div"?"button":f,focusVisibleClassName:S(s.focusVisible,y),ownerState:o,className:S(s.root,$),...m,classes:s,children:b})})}),Ot=({appId:t,column:r,columnName:e,columnLabel:g,lov:p,lookups:n,columnFilters:f,setColumnFilters:b,setCurrentFilterColumnName:v,clientSideProcessing:u,tableColumns:k})=>{F.debug(e,p,f);const y=V();let C=[];f.map(a=>{a.id===e&&Array.isArray(a.value)&&(C=a.value)});const $=a=>d.jsxs(G,{children:[...a.map(o=>{const s=u?o.key:o.value,i=o.value;return d.jsx(T,{"data-testid":s,children:d.jsxs(N,{selected:C.includes(s),onClick:()=>{const I=[...f].filter(x=>x.id===e),l=I.length===0?[]:I[0].value;if(!l.includes(s))l.push(s);else{const x=l.indexOf(s);x!==-1&&l.splice(x,1)}const c=[...f].filter(x=>x.id!==e);l.length>0&&c.push({id:e,value:l}),l.length===0&&v(""),b(c)},onFocus:()=>{v(e)},onBlur:()=>{v("")},children:[d.jsx(J,{children:d.jsx(Q,{checked:C.includes(s)})}),d.jsx(X,{children:w(i)})]})})})]}),m=a=>a.sort((o,s)=>o.value.localeCompare(s.value)),h=()=>{const a=[],o=k.filter(s=>s.columnName===e)[0];return r.getFacetedUniqueValues().forEach((s,i)=>{var I,l;if(i)if(n&&n[e]&&((I=o==null?void 0:o.lookup)==null?void 0:I.loadOnStartup)!==!0){if(n[e][i]&&typeof n[e][i]=="string"){const c=n[e][i]+" ("+s+")";c!==""&&a.push({key:i,value:c})}else if(n[e][i]&&Array.isArray(n[e][i])){const c=n[e][i].join((l=o==null?void 0:o.lookup)==null?void 0:l.delimiter)+" ("+s+")";c!==""&&a.push({key:i,value:c})}}else{const c=i+" ("+s+")";a.push({key:i,value:c})}}),$(m(a))},B=()=>$(m(p?[...p]:[]));return d.jsxs(A,{className:`pp-column-search-field pp-column-search-field-${y==null?void 0:y.fieldVariant}`,children:[d.jsx(E,{children:g}),u?h():B()]})};export{Ot as default};
