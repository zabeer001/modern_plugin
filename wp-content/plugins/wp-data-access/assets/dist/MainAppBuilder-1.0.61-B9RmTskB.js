const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SettingsApp-1.0.61-BnRsn9rU.js","./cm-1.0.61-D9ug3d5m.js","./redux-1.0.61-CrJ4jvTM.js","./vendor-1.0.61-CN03Eozo.js","./index-1.0.61-B7tjLD84.js","./Typography-1.0.61-Cg0Css-P.js","./lib-1.0.61-DoXQcMHD.js","./loglevel-1.0.61-BZ7XahX3.js","./lodash-1.0.61-C8OpKhUs.js","./moment-1.0.61-C5S46NFB.js","./ButtonBase-1.0.61-BqsrQx8o.js","./useEnhancedEffect-1.0.61-CX4-xj9Z.js","./ThemeProvider-1.0.61-4HOD8y6D.js","./Modal-1.0.61-DVFPMIPt.js","./notistack-1.0.61-0awN6uG4.js","./iconBase-1.0.61-C8saXaJ2.js","./TargetEnum-1.0.61-CIW1jlU5.js","./ConfirmDialog-1.0.61-BrxkBu_y.js","./cjs-1.0.61-D_0erLfe.js","./AdminTheme-1.0.61-D8bUxwpM.js","./DialogContent-1.0.61-Ws3r0VFj.js","./ActionsSettings-1.0.61-NFzvwy8a.js","./RestApi-1.0.61-DdTZ_pIc.js","./AccordionSummary-1.0.61-B21Kp3oq.js","./Collapse-1.0.61-Cww0NnSm.js","./AccordionDetails-1.0.61-CrQNuW_u.js","./TextField-1.0.61-DyvT2G_W.js","./Select-1.0.61-DmroHcG5.js","./Menu-1.0.61-D2OtRuzX.js","./createSvgIcon-1.0.61-DDgmYdEo.js","./hooks-1.0.61-Bklk-gZu.js","./PremiumFeature-1.0.61-BxBWJ4MJ.js","./index-1.0.61-Cpc7oUnN.js","./FormControlLabel-1.0.61-Bu2IQ4da.js","./Switch-1.0.61-CRYcdQMV.js","./SwitchBase-1.0.61-C2xa6JFZ.js","./Spinner-1.0.61-khi9zO7Q.js","./MenuItem-1.0.61-Bmr1xWyp.js","./settings-1.0.61-BN5quc55.js","./Link-1.0.61-BHBICLVE.js","./TabPanel-1.0.61-BtYzUOMH.js","./InputAdornment-1.0.61-23wkGu1k.js","./getThemeProps-1.0.61-OfsHdeDz.js","./CardHeader-1.0.61-gDG-f_-J.js","./settings-1.0.61-DuwCupdk.css","./cmJson-1.0.61-BLURwXOE.js","./rehyperaw-1.0.61-AkovKNCK.js","./markdown-1.0.61-6nAzZWly.js","./Tooltip-1.0.61-De3BL3Jg.js","./Tooltip-1.0.61--D4jr2go.css","./index-1.0.61-Cpig8940.js","./useApp-1.0.61-C7D5dm7s.js","./ActionsApp-1.0.61-CDhPoAR0.js","./FileSaver.min-1.0.61-CuTNgRON.js","./index-1.0.61-CxkvNEVW.js","./ctc-1.0.61-D7oYqo2X.js","./index-1.0.61-CRnugLvI.js","./Checkbox-1.0.61-BlN5bjuH.js","./DynamicModeEnum-1.0.61-BXuL5kgA.js","./ComponentColumn-1.0.61-CqYC2iYt.js","./ActionsExplorer-1.0.61-Bj7vTxIj.js","./Autocomplete-1.0.61-CP0PiliY.js","./Close-1.0.61-CiuKDfYz.js","./Chip-1.0.61-C6TjQKDp.js","./MapsApiKey-1.0.61-BZRYtG-S.js","./RadioGroup-1.0.61-BZHJMWN9.js","./Radio-1.0.61-BXMcBwcB.js","./Languages-1.0.61-BxgPwugF.js","./useLocaleUd-1.0.61-DEEqF_bH.js","./TabList-1.0.61-CK8HCF5k.js","./Tabs-1.0.61-Bhozjonn.js","./SanitizeComponent-1.0.61-jz3CtJfW.js","./dompurify-1.0.61-DhD2mIk-.js","./Divider-1.0.61-C8DX248W.js","./Stepper-1.0.61-DGQ0aYov.js","./ListItemIcon-1.0.61-P8epLVMP.js","./ListItemText-1.0.61-BEyq6rhn.js","./TableRow-1.0.61-70IJJfOz.js","./AppContainerSelector-1.0.61-CxQSQFA9.js","./FallbackSpinner-1.0.61-s3WTN65t.js","./useLoadAppMetaData-1.0.61-CNAzEtPD.js","./StoreTypeEnum-1.0.61-Tot-ESpR.js","./MapPrepare-1.0.61-DrTZp18T.js","./useMetadata-1.0.61-CVl9oDgw.js","./index-1.0.61-BRtOqdFl.js","./main-1.0.61-CGp-2hVp.css","./SettingApps-1.0.61-B-9UjUlx.js","./SettingsData-1.0.61-DAcmjkxJ.js","./SettingsAuthorization-1.0.61-DgR2n9Oz.js","./ResizableDrawer-1.0.61-DK4GcbjM.js","./useScreenSize-1.0.61-B4FX7-PC.js","./CodeField-1.0.61-VcCGL0pj.js","./cmJs-1.0.61-hWh8eEn6.js","./cmHtml-1.0.61-ZqG0tpB4.js","./cmSql-1.0.61-CL9LoKgr.js"])))=>i.map(i=>d[i]);
import{j as e}from"./cm-1.0.61-D9ug3d5m.js";import{r as l}from"./redux-1.0.61-CrJ4jvTM.js";import{l as m,b as Ot,A as h,c as it,s as zt,u as mt,a as R,d as Te,e as ht,f as ot,h as pt,i as lt,j as Bt,S as Ft,R as ee,k as Qt,m as dt,n as Q,C as Ce,o as gt,p as qt,q as Ht,r as Vt,t as Wt,v as ft,w as Gt,x as X,y as Ut,z as Re,B as Yt}from"./lib-1.0.61-DoXQcMHD.js";import{A as le,a as $t}from"./AdminTheme-1.0.61-D8bUxwpM.js";import{u as B,a as q}from"./hooks-1.0.61-Bklk-gZu.js";import{_ as ue}from"./cmJson-1.0.61-BLURwXOE.js";import{T as Me}from"./Tooltip-1.0.61-De3BL3Jg.js";import{B as Jt,a as Kt,b as Zt,H as jt}from"./settings-1.0.61-BN5quc55.js";import{A as bt,T as yt,M as Ee,a as At,b as Tt,c as Ct,d as vt,e as k,f as Xt,g as es,h as ts,i as ss,j as Oe,k as rs,l as as,m as ze,n as ns,o as St,p as is,q as wt,r as os,s as ps,t as ls,u as ds,v as cs,w as us,x as xs}from"./index-1.0.61-B7tjLD84.js";import{a as ms,b as hs,c as gs,d as fs,e as js}from"./index-1.0.61-Cpig8940.js";import{e as d}from"./notistack-1.0.61-0awN6uG4.js";import{u as De}from"./useApp-1.0.61-C7D5dm7s.js";import{a as bs,b as ys,c as As,d as Ts,e as Cs,f as vs,g as Ss,h as ws,i as Is,j as Ds}from"./ActionsApp-1.0.61-CDhPoAR0.js";import{C as de,P as Rs,D as Ms,a as _s}from"./ConfirmDialog-1.0.61-BrxkBu_y.js";import{B as n,S as pe}from"./Spinner-1.0.61-khi9zO7Q.js";import{T as _e}from"./Typography-1.0.61-Cg0Css-P.js";import{I as z}from"./iconBase-1.0.61-C8saXaJ2.js";import{C as ve,a as Se,b as It}from"./CardHeader-1.0.61-gDG-f_-J.js";import{T as Dt,a as ge,P as Ls,b as Ns,c as Ps}from"./TabPanel-1.0.61-BtYzUOMH.js";import{B as $}from"./cjs-1.0.61-D_0erLfe.js";import{F as Rt,a as Mt}from"./index-1.0.61-Cpc7oUnN.js";import{F as ks}from"./FileSaver.min-1.0.61-CuTNgRON.js";import{C as Es}from"./index-1.0.61-CxkvNEVW.js";import{u as Le}from"./index-1.0.61-CRnugLvI.js";import{M as Os,P as zs}from"./Menu-1.0.61-D2OtRuzX.js";import{M as te}from"./MenuItem-1.0.61-Bmr1xWyp.js";import{F as J,a as Ne,T as G,b as ce,I as Pe}from"./TextField-1.0.61-DyvT2G_W.js";import{F as _t}from"./FormControlLabel-1.0.61-Bu2IQ4da.js";import{C as Bs}from"./Checkbox-1.0.61-BlN5bjuH.js";import{L as se}from"./Link-1.0.61-BHBICLVE.js";import{P as Fs}from"./ButtonBase-1.0.61-BqsrQx8o.js";import{D as F}from"./DynamicModeEnum-1.0.61-BXuL5kgA.js";import{C as Qs,a as qs,b as Hs}from"./ComponentColumn-1.0.61-CqYC2iYt.js";import{C as Vs,M as Ws}from"./MapsApiKey-1.0.61-BZRYtG-S.js";import{R as Gs}from"./RadioGroup-1.0.61-BZHJMWN9.js";import{R as ct}from"./Radio-1.0.61-BXMcBwcB.js";import{A as we}from"./Autocomplete-1.0.61-CP0PiliY.js";import{C as Ie}from"./Chip-1.0.61-C6TjQKDp.js";import{S as Us}from"./Switch-1.0.61-CRYcdQMV.js";import{l as Ys}from"./Languages-1.0.61-BxgPwugF.js";import{u as $s,a as Js}from"./useLocaleUd-1.0.61-DEEqF_bH.js";import{P as Ks}from"./PremiumFeature-1.0.61-BxBWJ4MJ.js";import{T as Zs}from"./TabList-1.0.61-CK8HCF5k.js";import{T as ut}from"./Tabs-1.0.61-Bhozjonn.js";import{S as ke}from"./Select-1.0.61-DmroHcG5.js";import{S as Xs}from"./SanitizeComponent-1.0.61-jz3CtJfW.js";import{D as er}from"./Divider-1.0.61-C8DX248W.js";import{D as tr,a as sr,b as rr}from"./DialogContent-1.0.61-Ws3r0VFj.js";import{I as Lt}from"./InputAdornment-1.0.61-23wkGu1k.js";import{R as ar}from"./RestApi-1.0.61-DdTZ_pIc.js";import{S as nr,a as ir,b as or}from"./Stepper-1.0.61-DGQ0aYov.js";import{L as pr}from"./ListItemIcon-1.0.61-P8epLVMP.js";import{L as lr}from"./ListItemText-1.0.61-BEyq6rhn.js";import{T as dr,a as cr,b as oe,c as N}from"./TableRow-1.0.61-70IJJfOz.js";import{A as ur}from"./AppContainerSelector-1.0.61-CxQSQFA9.js";import{T as xr}from"./index-1.0.61-BRtOqdFl.js";/* empty css                    */import{T as mr}from"./ThemeProvider-1.0.61-4HOD8y6D.js";const hr=()=>{const t=B(r=>r.apps.appApps);return m.debug("appApps",t),t},gr=l.lazy(()=>ue(()=>import("./SettingsApp-1.0.61-BnRsn9rU.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85]),import.meta.url)),fr=l.lazy(()=>ue(()=>import("./SettingApps-1.0.61-B-9UjUlx.js"),__vite__mapDeps([86,1,2,3,23,5,6,7,8,9,10,11,4,12,13,14,15,24,19,30,45,46,47,48,49,38,39,40,41,18,42,27,28,29,17,20,36,43,26,37,44,50,51,52,22,32,53,54,55,56,33,57,35,58,59,60,61,62,63,64,65,66,34,67,68,31,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85]),import.meta.url)),jr=l.lazy(()=>ue(()=>import("./SettingsData-1.0.61-DAcmjkxJ.js"),__vite__mapDeps([87,1,2,3,59,6,7,8,9,30,14,60,22,26,5,10,11,27,28,12,4,13,15,29,61,62,63,19,52,36,33,57,35,39,31,32,51,23,24,25,65,66,37,64,45,46,47,48,49,38,40,41,18,42,17,20,43,44,50,53,54,55,56,58,34,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85]),import.meta.url)),br=l.lazy(()=>ue(()=>import("./SettingsAuthorization-1.0.61-DgR2n9Oz.js"),__vite__mapDeps([88,1,2,3,30,6,7,8,9,4,5,10,11,12,13,14,15,36,33,27,28,29,34,35,26,39,54,55,64,37,38,40,41,18,42,17,19,20,43,44,23,24,25,45,46,47,48,49,50,51,52,22,32,53,56,57,58,59,60,61,62,63,65,66,67,68,31,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85]),import.meta.url)),yr=l.lazy(()=>ue(()=>import("./ResizableDrawer-1.0.61-DK4GcbjM.js"),__vite__mapDeps([89,1,2,3,90,6,7,8,9,30,5,12,11,10,13,14,28,4,15]),import.meta.url)),Ar=({appDbId:t})=>{var H,E;m.debug(t);const r=q(),s=De(),p=((H=le)==null?void 0:H.palette.mode)===Ot.LIGHT?(E=le)==null?void 0:E.palette.primary.main:"",[g,u]=l.useState(!1);m.debug(g);const[f,b]=l.useState(!1);m.debug(f);const v=()=>{r(mt())},i=()=>{g?b(!0):v()},x=()=>{if(!s.appName)return d("App name is required",{variant:"error"}),!1;if(!s.appTitle)return d("App title is required",{variant:"error"}),!1;if(s.appType==h.APPCONTAINER)s.appApps.length===0&&d("No apps added",{variant:"info"});else{if(!s.appDatabase)return d("Database is required",{variant:"error"}),!1;if(s.appType==h.CHART){if(!s.appQuery)return d("SQL query is required",{variant:"error"}),!1}else{if(!s.appTable)return d("Table is required",{variant:"error"}),!1;if(s.appColumns.filter(T=>T.isSelected).length===0)return d("At least one column must be selected",{variant:"error"}),!1}if(s.appType==h.MAP){if(s.appMap.columnLatitude==="")return d("Latitude column is required for maps",{variant:"error"}),!1;if(s.appMap.columnLongitude==="")return d("Longitude column is required for maps",{variant:"error"}),!1}}return!0},o=()=>{x()&&bs(s,T=>{if(m.debug(T),T!=null&&T.code&&(T==null?void 0:T.message)!==void 0)switch(T.code){case"ok":d(T.message,{variant:"success"}),r(Te());break;case"info":d(T.message,{variant:"info"});break;default:console.error(T),d(T.message??R.contactSupport,{variant:"error"})}else console.error(T),d(R.contactSupport,{variant:"error"})},T=>{console.error("error",T),d(T??R.contactSupport,{variant:"error"})})},C=()=>{x()&&(o(),v())},w=T=>{r(zt({anchor:T}))},[M,y]=l.useState(0),I=l.useMemo(()=>[{title:"App Info",icon:e.jsx(ms,{})},{title:s.appType==h.APPCONTAINER?"Apps":"Data Source",icon:s.appType==h.APPCONTAINER?e.jsx(hs,{}):e.jsx(gs,{})},{title:"Access",icon:e.jsx(fs,{})}],[]);return e.jsxs(e.Fragment,{children:[e.jsx(l.Suspense,{fallback:e.jsx(pe,{}),children:e.jsxs(yr,{closeDrawer:i,children:[e.jsxs(bt,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(yt,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsxs(n,{sx:{flexGrow:1},children:[e.jsx(_e,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{paddingLeft:"6px"},children:"Manage App"}),e.jsx(_e,{sx:{fontSize:"10px",paddingLeft:"10px"},children:s.appName})]}),e.jsx(Me,{title:"Dock to left",position:"bottom",children:e.jsx(z,{onClick:()=>{w(it.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(Jt,{})})}),e.jsx(Me,{title:"Dock to right",position:"bottom",children:e.jsx(z,{onClick:()=>{w(it.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(Kt,{})})}),e.jsx(Me,{title:"Close",position:"bottom",children:e.jsx(z,{onClick:i,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(Ee,{})})})]}),e.jsx(Zt,{menuItems:I,menuIndex:M,setMenu:y})]}),e.jsx(ve,{className:"pp-settings-container",children:e.jsx(Se,{sx:{padding:0,margin:0},children:e.jsx(Dt,{value:M,children:e.jsxs(n,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(calc(var(--ppViewHeight, 1vh) * 100) - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(ge,{value:0,children:e.jsx(l.Suspense,{fallback:e.jsx(pe,{}),children:e.jsx(gr,{app:s,setIsUpdated:u})})}),e.jsx(ge,{value:1,children:s.appType==h.APPCONTAINER?e.jsx(l.Suspense,{fallback:e.jsx(pe,{}),children:e.jsx(fr,{app:s,setIsUpdated:u})}):e.jsx(l.Suspense,{fallback:e.jsx(pe,{}),children:e.jsx(jr,{app:s,setIsUpdated:u})})}),e.jsx(ge,{value:2,children:e.jsx(l.Suspense,{fallback:e.jsx(pe,{}),children:e.jsx(br,{app:s,setIsUpdated:u})})})]})})})}),e.jsx(ve,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:p},children:e.jsxs(Se,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx($,{variant:"outlined",className:"footer_action_button_apply",onClick:o,children:"Apply"}),e.jsx($,{variant:"outlined",className:"footer_action_button",onClick:C,children:"OK"}),e.jsx($,{variant:"outlined",className:"footer_action_button",onClick:i,children:"Cancel"})]})})]})}),e.jsx(de,{title:"Close App Manager?",message:"All uncommitted changes will be lost!",open:f,setOpen:b,onConfirm:()=>{v()},onKeep:()=>{v()}})]})},Tr=()=>{const t=B(r=>r.apps.showAppStructure);return m.debug("showAppStructure",t),t},Nt=({appType:t})=>t==h.APPCONTAINER?e.jsx(n,{sx:{fontSize:"26px",display:"flex",width:"28px",justifyContent:"center",alignContent:"center",marginRight:"5px"},children:e.jsx(At,{})}):t==h.DATAENTRY?e.jsx(n,{sx:{fontSize:"22px",display:"flex",width:"28px",justifyContent:"center",alignContent:"center",marginRight:"5px"},children:e.jsx(Tt,{})}):t==h.CHART?e.jsx(n,{sx:{fontSize:"22px",display:"flex",width:"28px",justifyContent:"center",alignContent:"center",marginRight:"5px"},children:e.jsx(Ct,{})}):t==h.REGISTRATION?e.jsx(n,{sx:{fontSize:"22px",display:"flex",width:"28px",justifyContent:"center",alignContent:"center",marginRight:"5px"},children:e.jsx(Rt,{})}):t==h.MAP?e.jsx(n,{sx:{fontSize:"22px",display:"flex",width:"28px",justifyContent:"center",alignContent:"center",marginRight:"5px"},children:e.jsx(vt,{})}):e.jsx(n,{sx:{fontSize:"20px",display:"flex",width:"28px",justifyContent:"center",alignContent:"center",marginRight:"5px"},children:e.jsx(Mt,{})}),xt=({app:t,density:r})=>{var re,fe,Z,je;m.debug(t);const s=q(),[p,g]=l.useState(!1),[u,f]=l.useState(!1),[b,v]=l.useState(!1),[i,x]=l.useState(!1),o=a=>{let A={};try{A=JSON.parse(a.app_settings)}catch(_){A.rest_api={authorization:ee.AUTHORIZED,authorized_roles:[],authorized_users:[]},console.error("Invalid JSON - app settings"),console.error(_),d("Invalid JSON, check console",{variant:"error"})}return A},C=a=>{ys(a,A=>{var ae,be,xe,me,j,S,O,Y,ne,L,ye,ie,Ae,Be,Fe,Qe,qe,He,Ve,We,Ge,Ue,Ye,$e,Je,Ke,Ze,Xe,et,tt,st,rt,at,nt;const _=A==null?void 0:A.data;if(m.debug("response data",_),_.app&&_.app.app&&Array.isArray(_.app.app)&&_.app.container&&Array.isArray(_.app.container)&&_.app.apps&&Array.isArray(_.app.apps)){const P=_.app.app[0];if(m.debug(P),P.app_type==h.APPCONTAINER){const D=o(P),he=_.app.apps;m.debug(he,D),s(pt({appDbId:a,appId:lt(a),appName:P.app_name,appTitle:P.app_title,appType:P.app_type,appCntId:0,appCntSeqNr:0,appDatabase:null,appTable:null,appColumns:[],appQuery:"",appRelationTable:null,appRelationColumns:[],appRestApi:D==null?void 0:D.rest_api,appAddToMenu:P.app_add_to_menu!=="0",appMenuTitle:((ae=D==null?void 0:D.settings)==null?void 0:ae.app_menu_title)??P.app_title,appMetaData:_,appLanguage:(be=D==null?void 0:D.settings)==null?void 0:be.app_language,customLanguage:(xe=D==null?void 0:D.settings)==null?void 0:xe.app_translation,fullScreen:((me=D==null?void 0:D.settings)==null?void 0:me.app_fullscreen)??!0,safeMode:((j=D==null?void 0:D.settings)==null?void 0:j.app_safe_mode)??!1,appApps:he}))}else{const D=_.app.container[0];m.debug(D);let he=[];try{he=JSON.parse(D.cnt_cls)}catch(Et){console.error("Invalid JSON - app columns"),console.error(Et),d("Invalid JSON, check console",{variant:"error"})}const c=o(P);s(pt({appDbId:a,appId:lt(a),appName:P.app_name,appTitle:P.app_title,appType:P.app_type,appCntId:D.cnt_id,appCntSeqNr:D.cnt_seq_nr,appDatabase:D.cnt_dbs,appTable:D.cnt_tbl,appColumns:he,appQuery:D.cnt_query??"",appRelationTable:null,appRelationColumns:[],appRestApi:c==null?void 0:c.rest_api,appAddToMenu:P.app_add_to_menu!=="0",appMenuTitle:((S=c==null?void 0:c.settings)==null?void 0:S.app_menu_title)??P.app_title,appMetaData:_,appLanguage:(O=c==null?void 0:c.settings)==null?void 0:O.app_language,customLanguage:(Y=c==null?void 0:c.settings)==null?void 0:Y.app_translation,fullScreen:((ne=c==null?void 0:c.settings)==null?void 0:ne.app_fullscreen)??!0,safeMode:((L=c==null?void 0:c.settings)==null?void 0:L.app_safe_mode)??!1,registrationMessage:((ie=(ye=c==null?void 0:c.settings)==null?void 0:ye.app_registration)==null?void 0:ie.message)??void 0,registrationShowMessage:((Be=(Ae=c==null?void 0:c.settings)==null?void 0:Ae.app_registration)==null?void 0:Be.showMessage)??!1,registrationUrl:((Qe=(Fe=c==null?void 0:c.settings)==null?void 0:Fe.app_registration)==null?void 0:Qe.url)??"",registrationShowUrl:((He=(qe=c==null?void 0:c.settings)==null?void 0:qe.app_registration)==null?void 0:He.showUrl)??!1,registrationUrlTime:((We=(Ve=c==null?void 0:c.settings)==null?void 0:Ve.app_registration)==null?void 0:We.urlTime)??3,registrationAllowUpdates:((Ue=(Ge=c==null?void 0:c.settings)==null?void 0:Ge.app_registration)==null?void 0:Ue.allowUpdates)??!0,cacheData:(($e=(Ye=c==null?void 0:c.settings)==null?void 0:Ye.app_chart)==null?void 0:$e.cacheData)??!1,updateValue:((Ke=(Je=c==null?void 0:c.settings)==null?void 0:Je.app_chart)==null?void 0:Ke.updateValue)??12,updateUnit:((Xe=(Ze=c==null?void 0:c.settings)==null?void 0:Ze.app_chart)==null?void 0:Xe.updateUnit)??"h",mapApiKey:((tt=(et=c==null?void 0:c.settings)==null?void 0:et.app_map)==null?void 0:tt.api_key)??"",mapColumnLatitude:((rt=(st=c==null?void 0:c.settings)==null?void 0:st.app_map)==null?void 0:rt.column_latitude)??"",mapColumnLongitude:((nt=(at=c==null?void 0:c.settings)==null?void 0:at.app_map)==null?void 0:nt.column_longitude)??""}))}}else d(R.contactSupport,{variant:"error"})},A=>{console.error("error",A),d(A??R.contactSupport,{variant:"error"})})},w=()=>{As(t.appId,a=>{if(m.debug(a),a!=null&&a.code&&(a==null?void 0:a.message)!==void 0)switch(a.code){case"ok":d(a.message,{variant:"success"}),s(Te());break;case"info":d(a.message,{variant:"info"});break;default:console.error(a),d(a.message??R.contactSupport,{variant:"error"})}else console.error(a),d(R.contactSupport,{variant:"error"});g(!1)},a=>{console.error("error",a),d(a??R.contactSupport,{variant:"error"}),g(!1)})},M=()=>{Ts(t.appId,a=>{m.debug(a),a!=null&&a.code&&(a==null?void 0:a.message)!==void 0?a.data.data?ks(new Blob([a.data.data],{type:"text/json;charset=utf-8"}),"wpda-export-"+t.appName+".sql"):(console.error(a),d(a.message??R.contactSupport,{variant:"error"})):(console.error(a),d(R.contactSupport,{variant:"error"})),g(!1)},a=>{console.error("error",a),d(a??R.contactSupport,{variant:"error"}),g(!1)})},y=a=>{Cs(a,A=>{if(m.debug(A),A!=null&&A.code&&(A==null?void 0:A.message)!==void 0)switch(A.code){case"ok":d(A.message,{variant:"success"}),s(Te());break;case"info":d(A.message,{variant:"info"});break;default:console.error(A),d(A.message??R.contactSupport,{variant:"error"})}else console.error(A),d(R.contactSupport,{variant:"error"});v(!1)},A=>{console.error("error",A),d(A??R.contactSupport,{variant:"error"}),v(!1)})},I=()=>{if(y(t.appId),t.appType==h.APPCONTAINER&&i===!0){const a=Bt.getSelectors().selectAppAppsList(Ft.getState().apps);a[t.appId]!==void 0&&Array.isArray(a[t.appId])&&(m.debug("start deleting detail apps",a[t.appId]),a[t.appId].map(A=>{m.debug("delete detail app",A),y(A)}))}},H=Le("(max-width:700px)"),[E,T]=l.useState(null),U=!!E,[V,K]=l.useState(!1),W=()=>V?e.jsxs(n,{sx:{display:"flex",alignItems:"center",marginLeft:"10px",gap:"10px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",minWidth:0,flex:1,"& > *":{flexShrink:0},"& > :last-child":{flexShrink:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis"}},children:[e.jsx(n,{sx:{borderLeft:"1px solid black",height:"16px",flexShrink:0}}),e.jsx(k,{title:"Manage App",children:e.jsx(se,{sx:{cursor:"pointer",flexShrink:0},underline:"none",onClick:a=>{C(t.appId),a.preventDefault(),a.stopPropagation()},children:"Manage"})}),e.jsx(n,{sx:{borderLeft:"1px solid black",height:"16px",flexShrink:0}}),e.jsx(k,{title:"Run & Build App",children:e.jsx(se,{sx:{cursor:"pointer",flexShrink:0},underline:"none",onClick:a=>{s(ot({isActive:!0,appDbId:t.appId})),a.preventDefault(),a.stopPropagation()},children:"Run & Build"})})]}):e.jsxs(n,{sx:{display:"block",alignItems:"center",marginLeft:"5px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:["−",e.jsx(n,{sx:{display:"inline-block",width:"5px"}}),`${t.appTitle} (App ID: ${t.appId})`]});return e.jsxs(e.Fragment,{children:[e.jsxs(n,{"data-testid":t.appName+"-"+t.appType,onMouseEnter:()=>K(!0),onMouseLeave:()=>K(!1),className:"unselectable",sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center",padding:r==="small"?"8px 8px 8px 12px":r==="medium"?"16px":"24px"},children:[e.jsxs(n,{sx:{width:"100%",display:"grid",gridTemplateColumns:"auto 1fr",gridGap:r==="small"?"3px":r==="medium"?"6px":"9px",alignItems:"center",overflow:"hidden"},children:[e.jsx(Nt,{appType:t.appType}),e.jsxs(n,{sx:{display:"flex",justifyContent:"left",alignItems:"center",width:"100%",minWidth:0},children:[e.jsx(n,{sx:{fontWeight:"bold",flexShrink:0},children:t.appName}),W()]})]}),e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:"auto auto auto auto auto auto auto",justifyContent:H?"end":"space-evenly",alignItems:"center"},children:[e.jsx(n,{sx:{paddingRight:"10px"},children:H?"":ht(t.appType)}),e.jsx(k,{title:"Manage App",children:e.jsx(z,{sx:{color:(re=le)==null?void 0:re.palette.primary.main},onClick:a=>{C(t.appId),a.preventDefault(),a.stopPropagation()},children:e.jsx(Xt,{})})}),e.jsx(k,{title:"Run & Build App",children:e.jsx(z,{sx:{color:(fe=le)==null?void 0:fe.palette.primary.main},onClick:a=>{s(ot({isActive:!0,appDbId:t.appId})),a.preventDefault(),a.stopPropagation()},children:e.jsx(es,{})})}),e.jsx(k,{title:"More App actions",children:e.jsx(z,{sx:{color:(Z=le)==null?void 0:Z.palette.primary.main},onClick:a=>{T(a.currentTarget),a.preventDefault(),a.stopPropagation()},children:e.jsx(ts,{})})}),e.jsxs(Os,{id:"pp-app-builder-more-actions",anchorEl:E,open:U,onClose:()=>{T(null)},MenuListProps:{"aria-labelledby":"pp-app-builder-more-actions"},sx:{zIndex:9999999999},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsxs(te,{onClick:a=>{T(null),g(!0),a.preventDefault(),a.stopPropagation()},children:[e.jsx(ss,{}),e.jsx("span",{style:{margin:"0 10px"},children:"Copy"})]}),e.jsxs(te,{onClick:a=>{T(null),f(!0),a.preventDefault(),a.stopPropagation()},children:[e.jsx(Oe,{}),e.jsx("span",{style:{margin:"0 10px"},children:"Export"})]}),e.jsx(Es,{text:`[wpda_app app_id="${t.appId}"]`,onCopy:()=>{d(`Shortcode [wpda_app app_id="${t.appId}"] successfully copied to clipboard`,{variant:"info"})},children:e.jsxs(te,{onClick:a=>{T(null),a.preventDefault(),a.stopPropagation()},children:[e.jsx(rs,{}),e.jsx("span",{style:{margin:"0 10px"},children:"Shortcode"})]})}),e.jsxs(te,{onClick:a=>{T(null),v(!0),x(!1),a.preventDefault(),a.stopPropagation()},sx:{color:(je=le)==null?void 0:je.palette.error.main},children:[e.jsx(as,{}),e.jsx("span",{style:{margin:"0 10px"},children:"Delete"})]})]})]})]}),p&&e.jsx(de,{title:"Please confirm",message:t.appType==h.APPCONTAINER?"Copy app including detail apps?":"Copy app?",open:p,setOpen:g,onConfirm:()=>w()}),u&&e.jsx(de,{title:"Please confirm",message:t.appType==h.APPCONTAINER?"Export app including detail apps?":"Export app?",open:u,setOpen:f,onConfirm:()=>M()}),b&&e.jsx(de,{title:"Delete App?",message:e.jsxs("div",{children:["Are you sure you want to delete app ",t.appName,"?",e.jsx("br",{}),e.jsx("strong",{children:"This action cannot be undone!"}),t.appType==h.APPCONTAINER&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("br",{}),e.jsx(J,{children:e.jsx(_t,{control:e.jsx(Bs,{checked:i,onChange:(a,A)=>{x(A)}}),label:"Delete detail app?"})})]})]}),open:b,setOpen:v,onConfirm:()=>I()})]})},Cr=({apps:t,appApps:r,search:s,types:p,isLoading:g,density:u})=>{m.debug(t,r,s,p);const f=Tr(),b=o=>{if(p.length===0&&s.trim()==="")return!0;if(f&&r[o.appId]){let C=!1;if(r[o.appId].map(w=>{const M=t.filter(y=>y.appId==w)[0];M?(s.trim()!==""&&dt(M.appName+" "+M.appTitle,s)&&(C=!0),p.filter(y=>y.id===Number(M.appType)).length>0&&(C=!0)):console.error(`Detail app lost? Data App ${o.appId} cannot find detail app ${w}!`)}),C)return!0}return!(!dt(o.appName+" "+o.appTitle,s)||p.length>0&&p.filter(C=>C.id===Number(o.appType)).length===0)},v=t.filter(o=>b(o)?o:null),i=o=>r[o]?e.jsxs(n,{className:`pp-app-builder-apps pp-app-builder-apps-${u}`,children:[...r[o].map(C=>{const w=t.filter(M=>M.appId==C);return w.length>0?e.jsx(xt,{app:w[0],density:u}):null})]}):null;let x=0;return e.jsx(Fs,{elevation:4,children:e.jsxs(n,{className:"pp-app-builder",children:[...t.map(o=>{const C=b(o);if(f&&Object.keys(r).filter(M=>r[M].includes(Number(o.appId))).length>0)return null;let w="";return C&&(x++,x%2===0?w=" pp-app-details-visible-even":w=" pp-app-details-visible-odd"),e.jsxs(n,{className:"pp-app-details"+w,sx:{visibility:C?"visible":"hidden",position:C?"relative":"fixed"},children:[e.jsx(xt,{app:o,density:u}),f&&i(o.appId)]})}),v.length===0&&e.jsx(n,{className:"pp-app-builder-loading",children:g?e.jsx(pe,{title:"Loading apps...",align:Qt.LEFT}):e.jsx(n,{children:"No apps found"})})]})})},Pt=()=>{const t=B(r=>r.apps.appList);return m.debug("apps",t),t},vr=()=>{const t=B(r=>r.apps.app.appDbId);return m.debug("appDbId",t),t},Sr=()=>{const t=B(r=>r.apps.dbSearch);return m.debug("dbSearch",t),t},wr=()=>{const t=B(r=>r.apps.dbTypes);return m.debug("dbTypes",t),t},Ir=()=>{const t=B(r=>r.apps.designMode);return m.debug("designMode",t),t},Dr=()=>{const t=B(r=>r.apps.reload);return m.debug("reload",t),t},kt=()=>{const t=B(r=>r.apps.appMetaData);return m.debug("appMetaData",t),t},Rr=({setIsUpdated:t})=>{const r=q(),s=De(),p=kt(),g=l.useMemo(()=>{const x=[];if((p==null?void 0:p.roles)!==void 0)for(const o in p.roles)x.push({key:o,value:p.roles[o]});return x},[p.roles]);m.debug(g);const u=l.useMemo(()=>{const x=[];if((p==null?void 0:p.users)!==void 0)for(const o in p.users)x.push({key:o,value:p.users[o]});return x},[p.users]);m.debug(u);const f=l.useMemo(()=>g.filter(x=>s.appRestApi.authorized_roles.includes(x.key)),[s.appRestApi.authorized_roles,g]),b=l.useMemo(()=>u.filter(x=>s.appRestApi.authorized_users.includes(x.key)),[s.appRestApi.authorized_users,u]),[v,i]=l.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("fieldset",{className:"pp-fieldset",children:[e.jsx("legend",{children:"Authorization"}),e.jsx(J,{sx:{width:"100%"},children:e.jsxs(Gs,{children:[e.jsxs(Ne,{className:"align-label-radio",sx:{cursor:"pointer"},children:[e.jsx(ct,{checked:s.appRestApi.authorization===ee.AUTHORIZED,onChange:x=>{r(Q({property:{appRestApi:{...s.appRestApi,authorization:ee.AUTHORIZED}}})),t&&t(!0),x.stopPropagation()}}),"Authorized access only"]}),e.jsxs(n,{sx:{display:"grid",gridGap:"10px",margin:"20px 20px 15px 42px"},children:[e.jsx(we,{multiple:!0,options:g,disableCloseOnSelect:!0,getOptionLabel:x=>x.value,value:f,onChange:(x,o)=>{r(Q({property:{appRestApi:{...s.appRestApi,authorized_roles:o.map(C=>C.key)}}})),t&&t(!0),x.stopPropagation()},renderInput:x=>e.jsx(G,{...x,label:"Roles"}),renderTags:(x,o)=>x.map((C,w)=>{const{key:M,...y}=o({index:w});return e.jsx(Ie,{variant:"outlined",label:C.value,...y},M)})}),e.jsx(we,{multiple:!0,options:u,disableCloseOnSelect:!0,getOptionLabel:x=>x.value,value:b,onChange:(x,o)=>{r(Q({property:{appRestApi:{...s.appRestApi,authorized_users:o.map(C=>C.key)}}})),t&&t(!0),x.stopPropagation()},renderInput:x=>e.jsx(G,{...x,label:"Users"}),renderTags:(x,o)=>x.map((C,w)=>{const{key:M,...y}=o({index:w});return e.jsx(Ie,{variant:"outlined",label:C.value,...y},M)})})]}),e.jsxs(Ne,{className:"align-label-radio",sx:{cursor:"pointer"},children:[e.jsx(ct,{checked:s.appRestApi.authorization===ee.ANONYMOUS,onChange:x=>{r(Q({property:{appRestApi:{...s.appRestApi,authorization:ee.ANONYMOUS}}})),t&&t(!0),x.stopPropagation()}}),"Anonymous access"]})]})})]}),e.jsx(J,{children:e.jsxs(ce,{component:"div",sx:{marginLeft:0},children:[e.jsx(n,{sx:{marginTop:"25px"},children:e.jsxs(se,{sx:{textDecoration:"none",cursor:"pointer",display:"inline-flex","& svg":{fontSize:"1rem",marginRight:"2px"}},onClick:()=>i(!v),children:[e.jsx(ze,{}),"What is the difference between authorized and anonymous access?"]})}),v&&e.jsxs(e.Fragment,{children:[e.jsxs(n,{sx:{marginTop:"20px"},children:[e.jsx("strong",{children:"Authorized access:"}),e.jsxs("ul",{style:{listStyle:"disc",padding:"0 40px"},children:[e.jsx("li",{children:"Users with the selected roles can access this app"}),e.jsx("li",{children:"Selected users can access this app"}),e.jsx("li",{children:"Other registered users cannot access this app"}),e.jsx("li",{children:"Anonymous users cannot access this app"})]})]}),e.jsxs(n,{sx:{marginTop:"20px"},children:[e.jsx("strong",{children:"Anonymous access:"}),e.jsx("ul",{style:{listStyle:"disc",padding:"0 40px"},children:e.jsx("li",{children:"Any user can access this app"})})]}),e.jsx(n,{sx:{marginTop:"20px"},children:"App authorization is applied to both back-end and front-end usage. Back-end access is restricted to registered users only. A Data Table app displayed on the front-end typically allows anonymous access, enabling visitors to view the table. In contrast, Data Management apps usually require authorized access to prevent unauthorized users from altering table data."})]})]})})]})},Mr=({app:t,setIsUpdated:r})=>{const s=q(),[p,g]=l.useState(!1),u=Pt(),f=u.filter(i=>t.appDbId!==i.appId&&i.appType!=h.APPCONTAINER),b=[];t.appApps.map(i=>{const x=u.filter(o=>o.appId===i);x.length===1&&b.push(x[0])});const v=i=>i.appName+(p?" ("+i.appTitle+")":"");return e.jsxs(J,{sx:{width:"100%",marginTop:"8px"},children:[e.jsx(we,{multiple:!0,options:f,value:b,disableCloseOnSelect:!0,getOptionLabel:i=>v(i),onChange:(i,x)=>{s(Q({property:{appApps:x.map(o=>o.appId)}})),r&&r(!0),i.stopPropagation()},renderInput:i=>e.jsx(G,{...i,label:"Apps"}),renderTags:(i,x)=>i.map((o,C)=>{const{key:w,...M}=x({index:C});return e.jsx(Ie,{variant:"outlined",label:v(o),...M},w)})}),e.jsxs(ce,{component:"div",sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Apps will be added in the order they are entered here."}),e.jsx(_t,{sx:{"& span.MuiFormControlLabel-label":{fontSize:"0.75rem"}},control:e.jsx(Us,{checked:p,onChange:i=>{g(!p),i.stopPropagation()}}),label:"Show title",labelPlacement:"end"})]})]})},_r=({app:t,hasErrors:r,setIsUpdated:s})=>{m.debug(t,r);const p=q();return e.jsx(G,{type:"text",label:"App Name",error:r,fullWidth:!0,required:!0,helperText:"App name must be unique.",value:t.appName,autoFocus:!0,autoComplete:"off",onChange:g=>{p(Q({property:{appName:g.target.value}})),s&&s(!0)}})},Lr=({app:t,hasErrors:r,setIsUpdated:s})=>{m.debug(t,r);const p=q();return e.jsx(G,{type:"text",label:"App Title",error:r,fullWidth:!0,required:!0,helperText:"App title describes the purpose of the app.",value:t.appTitle,autoComplete:"off",onChange:g=>{p(Q({property:{appTitle:g.target.value}})),s&&s(!0)}})},Nr=({app:t,setIsUpdated:r})=>{m.debug(t);const s=q();kt();const p=B(o=>Ce.defaultLanguage.code);m.debug("appLanguage",p);const g=B(o=>{});m.debug("customLanguage",g),$s();const u=Js(),f=B(o=>{var C,w;return(w=(C=o==null?void 0:o.apps)==null?void 0:C.app)==null?void 0:w.updateSiteLanguage});m.debug("updateSiteLanguage",f),l.useEffect(()=>{const o={appLanguage:Ce.defaultLanguage.code};s(Q({property:{appLanguage:o.appLanguage}}))},[]);const[b,v]=l.useState(!1),[i,x]=l.useState("plugin");return e.jsxs(n,{sx:{width:"100%"},children:[e.jsxs(Dt,{value:i,children:[e.jsxs(Zs,{onChange:(o,C)=>{x(C)},children:[e.jsx(ut,{label:e.jsx(n,{children:"Use Plugin Language"}),value:"plugin"}),e.jsx(ut,{label:e.jsx(n,{children:"Use Custom Translation"}),value:"custom"})]}),e.jsx(ge,{value:"plugin",sx:{padding:"30px 0 0 0"},children:e.jsxs(J,{fullWidth:!0,disabled:!0,children:[e.jsx(Pe,{variant:"outlined",children:"App Language"}),e.jsxs(ke,{MenuProps:{id:"pp-select-menu"},label:"App Language",value:p,onChange:o=>{},children:[...Ys.map(o=>e.jsx(te,{value:o.code,children:o.language},o.code))]}),e.jsx(ce,{children:"Selected app language is applied to all (master and detail) tables and forms."})]})}),e.jsx(ge,{value:"custom",sx:{padding:"30px 0 0 0"},children:e.jsxs(J,{fullWidth:!0,disabled:!0,children:[e.jsx(Pe,{variant:"outlined",children:"Custom Translation"}),e.jsx(ke,{MenuProps:{id:"pp-select-menu"},label:"Custom Translation",value:g,onChange:o=>{},children:Object.keys(u??{}).map(o=>e.jsx(te,{value:o,children:o},o))}),e.jsx(ce,{children:"Selected translation is applied to all (master and detail) tables and forms."})]})})]}),!1,e.jsx(J,{children:e.jsxs(ce,{component:"div",sx:{marginLeft:0},children:[e.jsx(n,{sx:{marginTop:"20px"},children:e.jsxs(se,{sx:{textDecoration:"none",cursor:"pointer",display:"inline-flex","& svg":{fontSize:"1rem",marginRight:"2px"}},onClick:()=>v(!b),children:[e.jsx(ze,{}),"Which app information is localized?"]})}),b&&e.jsxs(e.Fragment,{children:[e.jsxs(n,{sx:{marginTop:"20px"},children:[e.jsx("strong",{children:"Information provided in the selected app language:"}),e.jsxs("ul",{style:{listStyle:"disc",padding:"0 40px"},children:[e.jsx("li",{children:"Tooltips"}),e.jsx("li",{children:"Field labels"}),e.jsx("li",{children:"Field hints"}),e.jsx("li",{children:"Info and success messages"}),e.jsx("li",{children:"Most error messages"})]})]}),e.jsxs(n,{sx:{marginTop:"20px"},children:[e.jsx("strong",{children:"Information not provided in the selected language:"}),e.jsxs("ul",{style:{listStyle:"disc",padding:"0 40px"},children:[e.jsx("li",{children:"Builders, Wizards and Managers are provided in English"}),e.jsx("li",{children:"Database and server errors are not translated"})]})]}),e.jsx(n,{sx:{marginTop:"20px"},children:"If you discover any translation errors, please let us know. We are committed to improving our translations."})]})]})}),e.jsx(Ks,{})]})},Pr=({queryName:t,qbList:r,setOpenQueryList:s,copyQueryAndDatabase:p})=>e.jsx(n,{sx:{maxWidth:"600px",padding:"5px 25px","&:hover":{backgroundColor:"#efefef"}},children:e.jsxs(n,{sx:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",position:"relative"},children:[e.jsx(n,{sx:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:t}),e.jsxs(n,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(Ls,{variant:"popover",children:g=>e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"View query",children:e.jsx(z,{...Ns(g),children:e.jsx(ns,{})})}),e.jsxs(zs,{...Ps(g),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)","& > .MuiPaper-root":{resize:"both",minWidth:"400px",maxWidth:"80vw",maxHeight:"80vh",padding:"30px"}},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",flexDirection:"row",gap:"5px"},children:[e.jsx(js,{}),e.jsx("strong",{children:r[t].schemaName})]}),e.jsx(er,{sx:{margin:"10px 0"}}),e.jsx(Xs,{html:gt(r[t].query).replaceAll(`
`,"<br/>")})]})]})}),e.jsx(k,{title:"Import query",children:e.jsx(z,{onClick:g=>{p(t),s(!1),g.stopPropagation()},children:e.jsx(Oe,{})})})]})]})},t),kr=({qbList:t,open:r,setOpen:s,setOpenQueryList:p,copyQueryAndDatabase:g})=>{const[u,f]=l.useState("");return e.jsxs(tr,{open:r,onClose:()=>s(!1),PaperComponent:Rs,sx:{"& .MuiPaper-root":{width:"600px",height:"600px"}},"aria-labelledby":"open-query-dialog",closeAfterTransition:!1,children:[e.jsx(Ms,{sx:{cursor:"move"},id:"draggable-dialog-title",children:e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Import from Query Builder"}),e.jsx(G,{type:"text",value:u,onChange:b=>{f(b.target.value)},sx:{width:"160px",backgroundColor:"#fff",fontSize:"1em",margin:0,padding:0,borderRadius:"4px","&.MuiFormControl-root.MuiTextField-root .MuiInputBase-root":{paddingRight:0},"&.MuiFormControl-root.MuiTextField-root input":{padding:"8px"}},slotProps:{input:{startAdornment:e.jsx(Lt,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:e.jsx(St,{})})}}})]})}),e.jsx(sr,{sx:{zIndex:1,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0},children:e.jsxs(_s,{component:"div",sx:{"& svg":{height:"1.2em",width:"1.2em"}},children:[...Object.keys(t).map(b=>t[b]===void 0||t[b]===null||!b.toLowerCase().includes(u.toLowerCase())?null:e.jsx(Pr,{queryName:b,qbList:t,setOpenQueryList:p,copyQueryAndDatabase:g}))]})}),e.jsx(rr,{sx:{padding:"30px","& button":{width:"120px"}},children:e.jsx($,{variant:"contained",onClick:b=>{s(!1),b.stopPropagation()},children:"Cancel"})})]})},Er=()=>{const t=B(r=>r.apps.app.appQuery);return m.debug("appQuery",t),t},Or=l.lazy(()=>ue(()=>import("./CodeField-1.0.61-VcCGL0pj.js"),__vite__mapDeps([91,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,92,45,46,47,93,94,36,33,27,28,29,34,35,20,17,18,19]),import.meta.url)),zr=({setIsUpdated:t})=>{const r=q(),s=Er(),[p,g]=l.useState({}),[u,f]=l.useState(!1),b=()=>{p!=null&&Object.keys(p).length===0?ar(Ce.appUrlQueryBuilderList,{},i=>{m.debug(i),g(i.data??{}),f(!0)},()=>{console.error("Error loading Query Builder list."),g({})}):f(!0)},v=i=>{r(qt({appDatabase:p[i].schema_name})),r(Q({property:{appQuery:gt(p[i].query)}})),t&&t(!0)};return e.jsxs(n,{sx:{width:"100%"},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"flex-end",marginBottom:"5px",position:"relative"},children:[e.jsxs($,{variant:"contained",onClick:()=>{b()},children:["Import from Query Builder  ",e.jsx(Oe,{})]}),p!=null&&Object.keys(p).length>0&&e.jsx(kr,{qbList:p,open:u,setOpen:f,setOpenQueryList:f,copyQueryAndDatabase:v})]}),e.jsx(l.Suspense,{children:e.jsx(Or,{code:s,setCode:i=>{r(Q({property:{appQuery:i}})),t&&t(!0)},dialogTitle:"SQL Query",extension:"sql"})}),e.jsx(J,{children:e.jsx(ce,{children:"Enter a valid SQL query. Test your query in Query Builder before submitting."})})]})},Br=({setMode:t})=>{const r=q(),s=De(),p=()=>s.appType==h.APPCONTAINER,g=p()?["App info","Apps","Authorization"]:["App info","Data source","Authorization"],[u,f]=l.useState(0);l.useEffect(()=>{let y=null;switch(s.appType){case h.DATATABLE:case h.CHART:case h.MAP:y=ee.ANONYMOUS;break;case h.DATAENTRY:case h.REGISTRATION:case h.UPDATEFORM:case h.APPCONTAINER:y=ee.AUTHORIZED;break}y!==null?r(Q({property:{appRestApi:Ht(y)}})):d(R.contactSupport,{variant:"error"})},[s.appType]);const[b,v]=l.useState({appName:!1,appTitle:!1,appDatabase:!1,appTable:!1,appColumns:!1});m.debug(b);const i=()=>{const y=Vt(Wt);y.table.transactions.insert=Number(s.appType)===h.DATAENTRY||Number(s.appType)===h.REGISTRATION,y.table.transactions.update=Number(s.appType)===h.DATAENTRY||Number(s.appType)===h.UPDATEFORM||Number(s.appType)===h.REGISTRATION,y.table.transactions.delete=Number(s.appType)===h.DATAENTRY,vs(s,y,I=>{if(m.debug(I),I!=null&&I.code&&(I==null?void 0:I.message)!==void 0)switch(I.code){case"ok":d(I.message,{variant:"success"}),t(F.TABLE),r(Te());break;case"info":d(I.message,{variant:"info"});break;default:console.error(I),d(I.message??R.contactSupport,{variant:"error"})}else console.error(I),d(R.contactSupport,{variant:"error"})},I=>{console.error("error",I),d(I??R.contactSupport,{variant:"error"})}),s.updateSiteLanguage&&s.appLanguage!==void 0&&Ss(s.appLanguage,()=>{},()=>{})},x=()=>{var I,H,E;let y=!0;if(u===0){let T=!1,U=!1;s.appName.trim()===""&&(d("App name is required",{variant:"error"}),T=!0,y=!1),s.appTitle.trim()===""&&(d("App title is required",{variant:"error"}),U=!0,y=!1),v({...b,appName:T,appTitle:U})}if(u===1){let T=!1,U=!1,V=!1,K=!1;if(p())s.appApps.length===0&&d("No apps added",{variant:"info"});else if(((I=s.appDatabase)==null?void 0:I.trim())===""&&(d("Database is required",{variant:"error"}),T=!0,y=!1),s.appType==h.CHART?((H=s.appQuery)==null?void 0:H.trim())===""&&(d("SQL query is required",{variant:"error"}),K=!0,y=!1):(((E=s.appTable)==null?void 0:E.trim())===""&&(d("Table is required",{variant:"error"}),U=!0,y=!1),s.appColumns.filter(W=>W.isSelected===!0).length===0&&(d("No columns selected",{variant:"error"}),V=!0,y=!1)),s.appType==h.MAP){if(s.appMap.columnLatitude==="")return d("Latitude column is required for maps",{variant:"error"}),!1;if(s.appMap.columnLongitude==="")return d("Longitude column is required for maps",{variant:"error"}),!1}v({...b,appDatabase:T,appTable:U,appQuery:K,appColumns:V})}return u===g.length-1&&i(),m.debug(y),y},o=()=>e.jsxs(n,{sx:{textAlign:"right",display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[u>0?e.jsx($,{variant:"outlined",size:"medium",sx:{width:"160px",marginRight:"10px"},onClick:()=>{f(u-1)},startIcon:e.jsx(is,{}),children:e.jsx(n,{children:"Back"})}):e.jsx(n,{}),e.jsx($,{variant:"contained",size:"medium",sx:{width:"160px"},onClick:()=>{x()&&u<g.length-1&&f(u+1)},startIcon:u>=g.length-1&&e.jsx(os,{}),endIcon:u<g.length-1&&e.jsx(wt,{}),children:e.jsx(n,{children:u<g.length-1?"Next":"Finish"})})]}),C=()=>e.jsxs(e.Fragment,{children:[e.jsx(_r,{app:s,hasErrors:b.appName}),e.jsx(Lr,{app:s,hasErrors:b.appName}),e.jsx(Nr,{app:s}),o()]}),w=()=>p()?e.jsxs(e.Fragment,{children:[e.jsx(Mr,{app:s}),o()]}):e.jsxs(e.Fragment,{children:[e.jsx(Qs,{}),e.jsx(n,{sx:{display:s.appDatabase?"block":"none"},children:s.appType==h.CHART?e.jsx(zr,{}):e.jsx(qs,{})}),s.appType!=h.CHART&&e.jsx(n,{sx:{display:s.appTable?"block":"none"},children:e.jsx(Hs,{app:s})}),s.appType==h.MAP&&s.appColumns.length>0&&e.jsxs("fieldset",{className:"pp-fieldset",style:{marginTop:"-10px"},children:[e.jsx("legend",{children:e.jsx(Ne,{sx:{fontSize:"13px"},children:"Spatial Columns"})}),e.jsx(n,{style:{marginTop:"5px"},children:e.jsx(Vs,{app:s})})]}),o()]}),M=()=>e.jsxs(e.Fragment,{children:[e.jsx(n,{children:e.jsx(Rr,{})}),s.appType==h.MAP&&e.jsx(n,{children:e.jsx(Ws,{app:s})}),o()]});return e.jsxs(e.Fragment,{children:[e.jsx(nr,{activeStep:u,sx:{margin:"10px 0 30px 0"},children:g.map((y,I)=>(m.debug(y,I),e.jsx(ir,{children:e.jsx(or,{children:y})},y)))}),e.jsxs("form",{onSubmit:y=>(y.preventDefault(),x()&&f(u+1),!1),style:{display:"grid",gridGap:"30px"},children:[u===0&&C(),u===1&&w(),u===2&&M(),e.jsx("input",{type:"submit",style:{display:"none"}})]})]})},Fr=({app:t,isNew:r,setIsUpdated:s})=>{m.debug(t);const p=q(),g=ft(),u=r?"Select App Type *":"App Type *";return e.jsxs(n,{sx:{width:"100%"},children:[e.jsx(n,{sx:{width:"100%"},children:e.jsxs(J,{fullWidth:!0,children:[e.jsx(Pe,{variant:"outlined",children:u}),e.jsxs(ke,{MenuProps:{id:"pp-select-menu"},label:u,value:t.appType,disabled:r!==!0&&(t.appType==h.APPCONTAINER||t.appType==h.REGISTRATION||t.appType==h.CHART||t.appType==h.MAP),onChange:f=>{p(Q({property:{appType:f.target.value}})),s&&s(!0)},sx:{"& .MuiSelect-select":{display:"flex",alignItems:"center"}},children:[...g.map(f=>{let b=f.id==h.DATATABLE||f.id==h.DATAENTRY||f.id==h.REGISTRATION||f.id==h.APPCONTAINER||f.id==h.CHART||f.id==h.MAP;return r!==!0&&(f.id==h.APPCONTAINER||f.id==h.REGISTRATION||f.id==h.CHART||f.id==h.MAP)&&(b=!1),e.jsxs(te,{value:f.id,disabled:!b,children:[e.jsx(pr,{sx:{minWidth:"unset"},children:e.jsx(Nt,{appType:f.id})}),e.jsx(lr,{children:f.text})]})})]})]})}),r&&e.jsx(dr,{sx:{marginTop:"30px",width:"auto","& td":{border:"none",padding:"12px 0 0 12px"},"& td:first-of-type":{textAlign:"center",paddingTop:"10px"},"& td:first-of-type svg":{display:"inline-block",verticalAlign:"middle"},"& td:nth-of-type(2)":{fontWeight:"bold",whiteSpace:"nowrap"}},children:e.jsxs(cr,{children:[e.jsxs(oe,{children:[e.jsx(N,{sx:{"& svg":{fontSize:"18px"}},children:e.jsx(Ct,{})}),e.jsx(N,{children:"Chart"}),e.jsx(N,{children:"Create interactive charts with SQL queries using Google Charts"})]}),e.jsxs(oe,{children:[e.jsx(N,{sx:{"& svg":{fontSize:"18px"}},children:e.jsx(Tt,{})}),e.jsx(N,{children:"Data Administration"}),e.jsx(N,{children:"Manage data with full transaction support through entry forms"})]}),e.jsxs(oe,{children:[e.jsx(N,{sx:{"& svg":{fontSize:"20px"}},children:e.jsx(At,{})}),e.jsx(N,{children:"Data App"}),e.jsx(N,{children:"Bundle multiple apps into one with a dedicated menu"})]}),e.jsxs(oe,{children:[e.jsx(N,{children:e.jsx(Mt,{})}),e.jsx(N,{children:"Data Table"}),e.jsx(N,{children:"Display a read-only table with detailed views or inline details"})]}),e.jsxs(oe,{children:[e.jsx(N,{sx:{"& svg":{fontSize:"20px"}},children:e.jsx(vt,{})}),e.jsx(N,{children:"Map"}),e.jsx(N,{children:"Visualize location data on Google Maps"})]}),e.jsxs(oe,{children:[e.jsx(N,{children:e.jsx(Rt,{})}),e.jsx(N,{children:"Registration Form"}),e.jsx(N,{children:"Allow users to submit new entries to a table via a form"})]})]})})]})},Qr=({setMode:t})=>{const r=De();m.debug(r);const[s,p]=l.useState(!1),[g,u]=l.useState(!1),f=s?`Add new ${ht(r.appType)} app`:"Add new app";return e.jsxs(e.Fragment,{children:[e.jsxs(ve,{sx:{padding:"50px 70px 40px 70px",display:"grid",gridGap:"40px"},elevation:4,children:[e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"start"},children:[e.jsx(It,{className:"pp-card-header-help-summary",title:e.jsxs("span",{className:"pp-card-header-title-help-summary",children:[e.jsx("span",{children:"App Wizard"}),e.jsx(jt,{path:"app-wizard/",size:22})]}),subheader:f,sx:{padding:0}}),e.jsx(n,{children:e.jsx(k,{title:"Close",children:e.jsx(se,{sx:{cursor:"pointer"},underline:"none",onClick:b=>{u(!0),b.preventDefault(),b.stopPropagation()},children:e.jsx(n,{sx:{fontSize:"1.5rem",color:"#000"},children:e.jsx(Ee,{})})})})})]}),e.jsx(Se,{sx:{padding:0,display:"grid",gridGap:"30px"},children:s?e.jsx(Br,{setMode:t}):e.jsxs(n,{sx:{display:"grid",gap:"10px"},children:[e.jsx(Fr,{app:r,isNew:!0}),e.jsx(n,{sx:{textAlign:"end"},children:e.jsx($,{variant:"contained",size:"medium",endIcon:e.jsx(wt,{}),onClick:()=>{p(!0)},sx:{width:"160px"},children:"Start Wizard"})})]})})]}),e.jsx(de,{title:"Close App Wizard?",message:"All uncommitted changes will be lost!",open:g,setOpen:u,onConfirm:()=>{t(F.TABLE)}})]})},qr=({close:t})=>{const[r,s]=l.useState(""),[p,g]=l.useState(""),[u,f]=l.useState(!1),[b,v]=l.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(ve,{sx:{padding:"50px 70px 40px 70px",display:"grid",gridGap:"40px"},elevation:4,children:[e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"start"},children:[e.jsx(It,{className:"pp-card-header-help-summary",title:e.jsxs("span",{className:"pp-card-header-title-help-summary",children:[e.jsx("span",{children:"Rename Database"}),e.jsx(jt,{path:"transferring-apps.html#renaming-databases",size:22})]}),sx:{padding:0}}),e.jsx(n,{children:e.jsx(k,{title:"Close",children:e.jsx(se,{sx:{cursor:"pointer"},underline:"none",onClick:i=>{t(),i.preventDefault(),i.stopPropagation()},children:e.jsx(n,{sx:{fontSize:"1.5rem",color:"#000"},children:e.jsx(Ee,{})})})})})]}),e.jsxs(Se,{sx:{padding:0,display:"grid",gridGap:"30px"},children:[e.jsx(G,{type:"text",label:"Old Database Name",fullWidth:!0,required:!0,value:r,onChange:i=>{s(i.target.value)}}),e.jsx(G,{type:"text",label:"New Database Name",fullWidth:!0,required:!0,value:p,onChange:i=>{g(i.target.value)}}),e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(se,{sx:{textDecoration:"none",cursor:"pointer",display:"inline-flex","& svg":{fontSize:"1rem",marginRight:"2px"}},onClick:()=>f(!u),children:[e.jsx(ze,{}),"When is this feature recommended for use?"]}),e.jsx($,{disabled:r.trim()===""||p.trim()==="",variant:"contained",sx:{width:"120px"},onClick:()=>{v(!0)},children:"Rename"})]}),u&&e.jsxs(n,{children:[e.jsx(n,{children:"When databases or tables are renamed or transferred using external tools, the stored database name in the repository may need updating. The Rename Database feature automatically updates all instances of the old database name to the new one across all app types and legacy tools."}),e.jsxs(n,{sx:{"& ul":{listStyleType:"disc",paddingLeft:"30px"}},children:[e.jsx("h3",{children:"Usage"}),e.jsxs("ul",{children:[e.jsx("li",{children:"After exporting a WordPress website to a new server"}),e.jsx("li",{children:"After renaming or moving databases or tables with external tools"})]})]})]})]})]}),b&&e.jsx(de,{title:"Rename Database?",message:e.jsxs(n,{children:["Are you sure you want to replace all occurrences of ",e.jsxs("strong",{children:["`",r,"`"]})," with ",e.jsxs("strong",{children:["`",p,"`"]}),"?",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"This action cannot be undone!"})]}),open:b,setOpen:v,onConfirm:()=>ws(r,p,i=>{if(i!=null&&i.code&&(i==null?void 0:i.message)!==void 0)switch(i.code){case"ok":d(i.message,{variant:"success"});break;case"info":d(i.message,{variant:"info"});break;default:console.error(i),d(i.message??R.contactSupport,{variant:"error"})}else console.error(i),d(R.contactSupport,{variant:"error"})},i=>{console.error(i),d(i??R.contactSupport,{variant:"error"})})})]})},Hr=()=>{var xe,me;const t=q(),r=l.useMemo(()=>Gt(),[]),[s,p]=l.useState(F.TABLE);m.debug(s),l.useEffect(()=>{try{const j=localStorage.getItem("ppAppsDbsSearch");j!==null&&t(X({property:"dbSearch",propertyValue:j}));const S=localStorage.getItem("ppAppsDbsSearchType");if(S!==null){const Y=JSON.parse(S);t(X({property:"dbTypes",propertyValue:Y}))}localStorage.getItem("ppAppsShowStructure")==="false"&&t(X({property:"showAppStructure",propertyValue:!1}))}catch(j){m.debug(j)}window.ppActionRenameDatabase=function(){re(!0)},window.ppActionCustomTranslation=function(){je(!0)}},[]);const g=Pt(),u=hr(),f=vr(),b=Sr(),v=wr(),i=Ir(),x=Dr(),o=j=>{j?(window.document.documentElement.style.setProperty("--addRenameDatabaseVisibility","visible"),window.document.documentElement.style.setProperty("--addAppIconVisibility","visible"),window.document.documentElement.style.setProperty("--addCustomLocalizationVisibility","visible")):(window.document.documentElement.style.setProperty("--addRenameDatabaseVisibility","hidden"),window.document.documentElement.style.setProperty("--addAppIconVisibility","hidden"),window.document.documentElement.style.setProperty("--addCustomLocalizationVisibility","hidden"))},[C,w]=l.useState(!0);l.useEffect(()=>{M()},[x]);const M=()=>{Is(function(j){const S=j==null?void 0:j.data;m.debug("response data",S);const O=j==null?void 0:j.context;if(m.debug("response context",O),Array.isArray(S)){const Y=[];for(let L=0;L<S.length;L++)Y.push({appId:S[L].app_id,appName:S[L].app_name,appTitle:S[L].app_title,appType:S[L].app_type,appSettings:S[L].app_settings,appAddToMenu:S[L].app_add_to_menu});const ne=O.reduce((L,ye)=>{const{app_id:ie,app_id_detail:Ae}=ye;return L[ie]=L[ie]??[],L[ie].push(Number(Ae)),L},{});t(Re({appList:Y,appApps:ne}))}else console.error(S),d((S==null?void 0:S.message)??R.contactSupport,{variant:"error"}),t(Re({appList:[],appApps:{}}));w(!1)},j=>{console.error("error",j),d(j??R.contactSupport,{variant:"error"}),t(Re({appList:[],appApps:{}})),w(!1)})},y=()=>{Ds(function(j){const S=j==null?void 0:j.data;m.debug("response data",S),t(Yt({appMetaData:S}))},j=>{console.error("error",j),d(j??R.contactSupport,{variant:"error"})})};l.useEffect(()=>{s===F.TABLE&&y()},[s]),l.useEffect(()=>{Ce.appPlugin&&(window.ppActionCreateApp=function(){s===0&&!(i.isActive===!0&&i.appDbId>0)&&p(F.FORM)},o(!(s===1||i.isActive===!0&&i.appDbId>0)))},[s,i]);const I=Le("(max-width: 600px)"),H=Le("(max-width: 900px)"),E=$t(),T=ft();m.debug(T);const U=l.useRef(),V=()=>i.isActive===!0&&i.appDbId>0,K=()=>e.jsx(k,{title:"Add New App",children:e.jsx(z,{sx:{color:"inherit"},onClick:()=>{t(mt()),p(F.FORM)},children:e.jsx(xs,{})})}),[W,re]=l.useState(!1);l.useEffect(()=>{o(!W)},[W]);const fe=()=>e.jsx(k,{title:"Rename Database",children:e.jsx(z,{sx:{color:"inherit"},onClick:()=>{re(!W)},children:e.jsx(xr,{})})}),[Z,je]=l.useState(!1);l.useEffect(()=>{o(!Z)},[Z]);const a={};V()&&(a.visibility="hidden");let A="smell";try{A=localStorage.getItem("ppAppsDensity")}catch(j){m.debug(j)}const[_,ae]=l.useState(A==="large"||A==="medium"?A:"small");l.useEffect(()=>{try{localStorage.setItem("ppAppsDensity",_)}catch(j){m.debug(j)}},[_]);const be=()=>W?e.jsx(qr,{close:()=>re(!1)}):e.jsxs(e.Fragment,{children:[s===F.TABLE&&e.jsx(Cr,{apps:g,appApps:u,search:b,types:v,isLoading:C,density:_}),s===F.FORM&&e.jsx(Qr,{setMode:p}),f!==0&&f!==void 0&&e.jsx(Ar,{appDbId:f})]});return e.jsxs(mr,{theme:E,children:[e.jsxs(n,{className:"pp-applist",sx:{width:"100%",visibility:V()?"hidden":"visible",position:V()?"fixed":"auto",height:V()?0:"auto",...V()&&{visibility:"hidden",position:"absolute",left:-99999,top:-99999},"& .pp-app-details":{...a}},children:[e.jsx(bt,{position:"relative",elevation:4,sx:{margin:"0 0 5px 0"},children:e.jsxs(yt,{className:"pp-applist-toolbar",sx:{display:"grid",gap:"12px",paddingRight:"12px !important",...I?{gap:0,paddingRight:"10px",paddingBottom:"10px",paddingLeft:"10px","& .pp-applist-search":{gridTemplateColumns:"1fr",gridGap:"2px"}}:{...H?{gap:0,paddingRight:"10px",paddingBottom:"10px",paddingLeft:"10px","& .pp-applist-search":{justifyContent:"end",gridTemplateColumns:"auto auto auto"}}:{justifyContent:"space-between",gridTemplateColumns:"auto 1fr"}}},children:[e.jsxs(n,{className:"pp-applist-title",sx:{display:"inline-grid",gridTemplateColumns:"auto auto auto",justifyContent:"start",alignItems:"center",gridGap:"10px"},children:[e.jsx(_e,{className:"pp-toolbar-title unselectable",variant:"subtitle1",color:(me=(xe=E==null?void 0:E.palette)==null?void 0:xe.primary)==null?void 0:me.contrastText,sx:{padding:0},children:"Apps"}),e.jsxs(n,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto auto",justifyContent:"start",alignItems:"center"},children:[e.jsx(n,{children:s===F.TABLE&&!W&&!Z&&e.jsx(e.Fragment,{children:K()})}),e.jsx(n,{children:s===F.TABLE&&!W&&!Z&&e.jsx(e.Fragment,{children:fe()})}),e.jsx(n,{children:!1})]})]}),e.jsxs(n,{className:"pp-applist-search",sx:{display:"grid",gridTemplateColumns:"auto auto auto",gridGap:"10px",justifyContent:"end",alignItems:"center"},children:[e.jsxs(n,{sx:{textAlign:"right"},children:[e.jsx(k,{title:"App View",children:e.jsx(z,{onClick:()=>{t(X({property:"showAppStructure",propertyValue:!0}));try{localStorage.setItem("ppAppsShowStructure","true")}catch(j){m.debug(j)}},sx:{color:"#fff"},children:e.jsx(ps,{})})}),e.jsx(k,{title:"List View",children:e.jsx(z,{onClick:()=>{t(X({property:"showAppStructure",propertyValue:!1}));try{localStorage.setItem("ppAppsShowStructure","false")}catch(j){m.debug(j)}},sx:{color:"#fff"},children:e.jsx(ls,{})})}),e.jsx(k,{title:"Toggle density",children:e.jsx(z,{onClick:()=>{ae(_==="large"?"medium":_==="medium"?"small":"large")},sx:{color:"#fff"},children:_==="small"?e.jsx(ds,{}):_==="medium"?e.jsx(cs,{}):e.jsx(us,{})})})]}),e.jsx(G,{value:b,type:"search",placeholder:"Search",disabled:s===F.FORM,onChange:j=>{t(X({property:"dbSearch",propertyValue:j.target.value}));try{localStorage.setItem("ppAppsDbsSearch",j.target.value)}catch(S){m.debug(S)}},sx:{backgroundColor:"#fff",fontSize:"1em",margin:0,padding:0,borderRadius:"4px","&.MuiFormControl-root.MuiTextField-root .MuiInputBase-root":{paddingRight:0},"&.MuiFormControl-root.MuiTextField-root input":{padding:"8px"}},slotProps:{input:{startAdornment:e.jsx(Lt,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:e.jsx(St,{})})}}}),e.jsx(we,{multiple:!0,size:"small",options:T,getOptionLabel:j=>j.text,isOptionEqualToValue:(j,S)=>j.id===S.id,value:v,disableCloseOnSelect:!0,disabled:s===F.FORM,onChange:(j,S)=>{t(X({property:"dbTypes",propertyValue:S.map(O=>({id:O.id,text:Object.values(Ut)[O.id]}))}));try{localStorage.setItem("ppAppsDbsSearchType",JSON.stringify(S))}catch(O){m.debug(O)}},renderInput:j=>e.jsx(n,{ref:U,children:e.jsx(G,{...j,sx:{minWidth:"250px","& .MuiInputBase-root":{backgroundColor:"#fff",padding:"0",maxHeight:"39px",overflow:"hidden"},"& .MuiButtonBase-root.MuiChip-root.MuiAutocomplete-tag":{height:"auto"}},placeholder:v.length===0?"Select app types":""})}),renderTags:(j,S)=>j.map((O,Y)=>{const{key:ne,...L}=S({index:Y});return e.jsx(Ie,{variant:"outlined",label:O.text,...L},ne)})})]})]})}),be()]}),i.isActive===!0&&i.appDbId>0&&e.jsx(ur,{appId:r,appDbId:i.appDbId,designMode:!0,isExploring:!0})]})},Ya=Object.freeze(Object.defineProperty({__proto__:null,default:Hr},Symbol.toStringTag,{value:"Module"}));export{_r as A,zr as C,Ya as M,Lr as a,Fr as b,Nr as c,Mr as d,Rr as e};
