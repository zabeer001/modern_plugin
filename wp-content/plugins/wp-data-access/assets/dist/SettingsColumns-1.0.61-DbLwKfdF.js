const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ComputedFieldMore-1.0.61-DV852GFn.js","./cm-1.0.61-D9ug3d5m.js","./redux-1.0.61-CrJ4jvTM.js","./vendor-1.0.61-CN03Eozo.js","./index-1.0.61-B7tjLD84.js","./Typography-1.0.61-Cg0Css-P.js","./lib-1.0.61-DoXQcMHD.js","./loglevel-1.0.61-BZ7XahX3.js","./lodash-1.0.61-C8OpKhUs.js","./moment-1.0.61-C5S46NFB.js","./ButtonBase-1.0.61-BqsrQx8o.js","./useEnhancedEffect-1.0.61-CX4-xj9Z.js","./ThemeProvider-1.0.61-4HOD8y6D.js","./Modal-1.0.61-DVFPMIPt.js","./notistack-1.0.61-0awN6uG4.js","./iconBase-1.0.61-C8saXaJ2.js","./ConfirmDialog-1.0.61-BrxkBu_y.js","./cjs-1.0.61-D_0erLfe.js","./AdminTheme-1.0.61-D8bUxwpM.js","./DialogContent-1.0.61-Ws3r0VFj.js","./index-1.0.61-Cpc7oUnN.js","./Menu-1.0.61-D2OtRuzX.js","./MenuItem-1.0.61-Bmr1xWyp.js"])))=>i.map(i=>d[i]);
import{j as e}from"./cm-1.0.61-D9ug3d5m.js";import{u as ye,S as Te,a as Fe,I as V,b as Ce,c as Le,d as Q,D as Pe,e as ke,f as we,g as Ee,h as Ae,T as Re,M as Oe,P as Ge}from"./useMetadataColumns-1.0.61-TT5M5XKt.js";import{_ as He}from"./cmJson-1.0.61-BLURwXOE.js";import{a as P,u as be}from"./hooks-1.0.61-Bklk-gZu.js";import{y as U,af as Ve,av as ze,ai as fe,aw as Ye,al as Ue,am as We,an as Be,ao as qe}from"./index-1.0.61-B7tjLD84.js";import{T as z}from"./Tooltip-1.0.61-De3BL3Jg.js";import{r as L}from"./redux-1.0.61-CrJ4jvTM.js";import{l as u,cA as X,c6 as p,cu as h,cB as Qe,bY as Xe,k as _,cC as Ze}from"./lib-1.0.61-DoXQcMHD.js";import{s as Je}from"./index-1.0.61-Cpc7oUnN.js";import{u as k}from"./useFormUpdater-1.0.61-D3TDEm-F.js";import{D as Se}from"./DynamicModeEnum-1.0.61-BXuL5kgA.js";import{u as Ke,b as _e}from"./SharedContainer-1.0.61-D5Lln0NA.js";import{h as $e,i as Ie,e as Me}from"./index-1.0.61-BRtOqdFl.js";import{P as K}from"./PremiumFeature-1.0.61-BxBWJ4MJ.js";import{u as De}from"./useStoreFormSettings-1.0.61-CgHnNhxx.js";import{H as $}from"./settings-1.0.61-BN5quc55.js";import{A as W,a as B}from"./AccordionSummary-1.0.61-B21Kp3oq.js";import{A as q}from"./AccordionDetails-1.0.61-CrQNuW_u.js";import{B as b}from"./Spinner-1.0.61-khi9zO7Q.js";import{F as x,a as f,b as g,T as y}from"./TextField-1.0.61-DyvT2G_W.js";import{S as es}from"./Slider-1.0.61-BGScnB2M.js";import{R as ve}from"./RadioGroup-1.0.61-BZHJMWN9.js";import{R as T}from"./Radio-1.0.61-BXMcBwcB.js";import{E as Z}from"./EnumTypeEnum-1.0.61-Ws4BsaYD.js";import{N as J}from"./react-number-format.es-1.0.61-3K4hYgeH.js";import{F as A}from"./FormControlLabel-1.0.61-Bu2IQ4da.js";import{S as R}from"./Switch-1.0.61-CRYcdQMV.js";import{L as je}from"./Link-1.0.61-BHBICLVE.js";import{u as Ne}from"./useMetadata-1.0.61-CVl9oDgw.js";import{C as ss}from"./ConfirmDialog-1.0.61-BrxkBu_y.js";import{I as Y}from"./iconBase-1.0.61-C8saXaJ2.js";import"./vendor-1.0.61-CN03Eozo.js";import"./notistack-1.0.61-0awN6uG4.js";import"./useTableUpdater-1.0.61-D-pqUshE.js";import"./useTableIsUpdated-1.0.61-CCSFtZgQ.js";import"./cjs-1.0.61-D_0erLfe.js";import"./Typography-1.0.61-Cg0Css-P.js";import"./ButtonBase-1.0.61-BqsrQx8o.js";import"./useEnhancedEffect-1.0.61-CX4-xj9Z.js";import"./AdminTheme-1.0.61-D8bUxwpM.js";import"./ActionsDml-1.0.61-DA32DqSB.js";import"./RestApi-1.0.61-DdTZ_pIc.js";import"./Select-1.0.61-DmroHcG5.js";import"./Menu-1.0.61-D2OtRuzX.js";import"./ThemeProvider-1.0.61-4HOD8y6D.js";import"./Modal-1.0.61-DVFPMIPt.js";import"./createSvgIcon-1.0.61-DDgmYdEo.js";import"./MenuItem-1.0.61-Bmr1xWyp.js";import"./DefaultWhere-1.0.61-D25JpoiD.js";import"./Stepper-1.0.61-DGQ0aYov.js";import"./Checkbox-1.0.61-BlN5bjuH.js";import"./SwitchBase-1.0.61-C2xa6JFZ.js";import"./rehyperaw-1.0.61-AkovKNCK.js";import"./markdown-1.0.61-6nAzZWly.js";import"./loglevel-1.0.61-BZ7XahX3.js";import"./lodash-1.0.61-C8OpKhUs.js";import"./moment-1.0.61-C5S46NFB.js";import"./Collapse-1.0.61-Cww0NnSm.js";import"./useAppFunctions-1.0.61-EdKk0_Mu.js";import"./useRemoveAppFromStore-1.0.61-E72jey9_.js";import"./Languages-1.0.61-BxgPwugF.js";import"./AppTheme-1.0.61-CGnMRNDC.js";import"./index-1.0.61-CRnugLvI.js";import"./getThemeProps-1.0.61-OfsHdeDz.js";import"./useChartSettings-1.0.61-BIp9UVZM.js";import"./useLocaleUd-1.0.61-DEEqF_bH.js";import"./useScreenSize-1.0.61-B4FX7-PC.js";import"./index-1.0.61-LP991tft.js";import"./dayjs.min-1.0.61-21Xi_c_9.js";import"./dompurify-1.0.61-DhD2mIk-.js";import"./useFormDetails-1.0.61-677sicqv.js";import"./StoreTypeEnum-1.0.61-Tot-ESpR.js";import"./FallbackSpinner-1.0.61-s3WTN65t.js";import"./main-1.0.61.js";import"./TabPanel-1.0.61-BtYzUOMH.js";import"./InputAdornment-1.0.61-23wkGu1k.js";import"./CardHeader-1.0.61-gDG-f_-J.js";import"./visuallyHidden-1.0.61-Dan1xhjv.js";import"./DialogContent-1.0.61-Ws3r0VFj.js";const rs=({appId:i,columnIndex:n,tableColumn:s})=>{u.debug(i,n,s),P();const r=De();k(i);const d=t=>[];return e.jsxs(W,{disableGutters:!0,children:[e.jsxs(B,{expandIcon:e.jsx(U,{}),className:"pp-context-help-summary",sx:{fontSize:"1rem","& .MuiAccordionSummary-content":{padding:"1rem",alignItems:"center"}},children:[e.jsx($e,{}),e.jsx("span",{style:{paddingLeft:"0.5rem"},children:"Grid positioning"}),e.jsx($,{path:"form-builder/menu/columns/grid-positioning.html",size:22})]}),e.jsxs(q,{sx:{paddingTop:"0.5rem"},children:[e.jsxs(b,{children:[e.jsxs(x,{sx:{display:"grid"},children:[e.jsx(f,{children:"Grid cells"}),e.jsx(es,{value:s.cells,min:1,max:r.cellsPerRow,step:1,marks:d(r.cellsPerRow),valueLabelDisplay:"auto",disabled:!0,onChange:(t,a)=>{u.debug(t,a)},sx:{width:"calc(100% - 40px)",margin:"20px"}})]}),e.jsx(g,{children:"Number of grid cells used (can be changed in FORM > Grid)."}),e.jsxs(x,{sx:{width:"100%"},children:[e.jsx(f,{sx:{margin:"15px 0 5px 0"},children:"Grid positioning"}),e.jsx(ve,{sx:{flexDirection:"column",alignContent:"flex-start",marginLeft:"10px",marginBottom:"5px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",justifyContent:"center",alignItems:"center"},children:[e.jsxs(f,{className:"align-label-radio",children:[e.jsx(T,{checked:s.cellClass===X.AUTO,disabled:!0,onChange:t=>{t.stopPropagation()}}),"Auto"]}),e.jsxs(f,{className:"align-label-radio",children:[e.jsx(T,{checked:s.cellClass===X.START,disabled:!0,onChange:t=>{t.stopPropagation()}}),"Start"]}),e.jsxs(f,{className:"align-label-radio",children:[e.jsx(T,{checked:s.cellClass===X.END,disabled:!0,onChange:t=>{t.stopPropagation()}}),"End"]}),e.jsxs(f,{children:[e.jsx(T,{checked:typeof s.cellClass=="number",disabled:!0,onChange:t=>{t.stopPropagation()}}),"Add"]}),e.jsxs("div",{style:{marginLeft:"10px",gridColumn:"span 2",display:"grid",gridTemplateColumns:"auto auto",alignItems:"center"},children:[e.jsx(y,{id:"pp-cells-before",sx:{width:"60px"},className:"pp-cells-before",type:"number",defaultValue:1,slotProps:{htmlInput:{min:1,max:r.cellsPerRow-1},inputLabel:{shrink:!0}},disabled:!0,onChange:t=>{t.stopPropagation()}}),e.jsx(f,{sx:{marginLeft:"10px"},children:"cell(s) before"})]})]})})]}),e.jsx(g,{children:"Grid positioning relative to surrounding cells."})]}),e.jsx(K,{single:!1})]})]})},ts=({appId:i,columnIndex:n,tableColumn:s,columnMetaData:r})=>{u.debug(i,n,s),P(),k(i);const[d,t]=L.useState(!1);return s.computedField!==void 0||n===void 0||r===void 0||(r==null?void 0:r.data_type)!==void 0&&p(r.data_type)!=="number"?null:e.jsxs(W,{disableGutters:!0,children:[e.jsxs(B,{expandIcon:e.jsx(U,{}),className:"pp-context-help-summary",sx:{fontSize:"1rem","& .MuiAccordionSummary-content":{padding:"1rem",alignItems:"center"}},children:[e.jsx(Ie,{}),e.jsx("span",{style:{paddingLeft:"0.5rem"},children:"Validation"}),e.jsx($,{path:"form-builder/menu/columns/validation.html",size:22})]}),e.jsxs(q,{sx:{paddingTop:"1rem"},children:[e.jsxs(x,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[e.jsx(y,{error:d,type:"number",label:"Minimum value allowed",disabled:!0,value:s.numericMin??"",required:!1,slotProps:{inputLabel:{shrink:!0}},onChange:a=>{u.debug(a)}}),e.jsx(y,{error:d,type:"number",label:"Maximum value allowed",disabled:!0,value:s.numericMax??"",required:!1,slotProps:{inputLabel:{shrink:!0}},onChange:a=>{u.debug(a)}})]}),e.jsx(K,{})]})]})},is=({appId:i,columnIndex:n,tableColumn:s,columnMetaData:r,metaData:d})=>{var O,G,v,m,c,H,I,M,D,ee,se,re,te,ie,ne,oe,de,ae,le,pe,me,ue,ce,xe,he,ge;u.debug(i,n,s,r,d);const t=P(),a=Ke(i),j=k(i),[S,F]=L.useState(!1),[C,N]=L.useState(Number(s.maxLength)<1||Number(s.maxLength)>((r==null?void 0:r.character_maximum_length)??0)),l=ye(i),w={marginTop:"20px",marginLeft:"10px"};return e.jsxs(W,{disableGutters:!0,children:[e.jsxs(B,{expandIcon:e.jsx(U,{}),className:"pp-context-help-summary",sx:{fontSize:"1rem","& .MuiAccordionSummary-content":{padding:"1rem",alignItems:"center"}},children:[e.jsx(Me,{}),e.jsx("span",{style:{paddingLeft:"0.5rem"},children:"Column settings"}),e.jsx($,{path:"form-builder/menu/columns/column-settings.html",size:22})]}),e.jsxs(q,{sx:{display:"grid",gridGap:"2rem",paddingTop:"1rem"},children:[!1,(s.computedField||l[s.columnName]!==void 0&&s.lookup===void 0&&(p((O=l[s.columnName])==null?void 0:O.data_type)==="float"||p((G=l[s.columnName])==null?void 0:G.data_type)==="number"||p((v=l[s.columnName])==null?void 0:v.data_type)==="time"||p((m=l[s.columnName])==null?void 0:m.data_type,!0)==="date"||p((c=l[s.columnName])==null?void 0:c.data_type,!0)==="datetime"||p((H=l[s.columnName])==null?void 0:H.data_type,!0)==="timestamp"||p((I=l[s.columnName])==null?void 0:I.data_type,!0)==="time"))&&e.jsxs(b,{children:[e.jsxs(x,{children:[e.jsx(A,{control:e.jsx(R,{checked:!1,disabled:!0,onClick:o=>{o.stopPropagation()}}),label:"Localize",labelPlacement:"end"}),e.jsx(g,{children:p((M=l[s.columnName])==null?void 0:M.data_type)==="float"||p((D=l[s.columnName])==null?void 0:D.data_type)==="number"?"Localize decimal and thousands seperators.":"Localize date and time fields."})]}),(p((ee=l[s.columnName])==null?void 0:ee.data_type,!0)==="date"||p((se=l[s.columnName])==null?void 0:se.data_type,!0)==="datetime"||p((re=l[s.columnName])==null?void 0:re.data_type,!0)==="timestamp"||p((te=l[s.columnName])==null?void 0:te.data_type,!0)==="time")&&e.jsxs(x,{children:[e.jsx(A,{control:e.jsx(R,{checked:!1,disabled:!0,onClick:o=>{o.stopPropagation()}}),label:"MySQL format",labelPlacement:"end"}),e.jsxs(g,{children:[p((ie=l[s.columnName])==null?void 0:ie.data_type,!0)==="date"&&e.jsx(e.Fragment,{children:"Format: YYYY-MM-DD."}),(p((ne=l[s.columnName])==null?void 0:ne.data_type,!0)==="datetime"||p((oe=l[s.columnName])==null?void 0:oe.data_type,!0)==="timestamp")&&e.jsx(e.Fragment,{children:"Format: YYYY-MM-DD HH:mm:ss."}),p((de=l[s.columnName])==null?void 0:de.data_type,!0)==="time"&&e.jsx(e.Fragment,{children:"Format: HH:mm:ss."})]})]}),!s.localize&&!s.mysqlFormat&&(p((ae=l[s.columnName])==null?void 0:ae.data_type,!0)==="date"||p((le=l[s.columnName])==null?void 0:le.data_type,!0)==="datetime"||p((pe=l[s.columnName])==null?void 0:pe.data_type,!0)==="timestamp"||p((me=l[s.columnName])==null?void 0:me.data_type,!0)==="time")&&e.jsx(x,{fullWidth:!0,children:e.jsxs(g,{component:"div",sx:{display:"flex",alignItems:"center",gap:"2px","& svg":{marginTop:"-2px"}},children:[e.jsx(Ve,{}),e.jsx("i",{children:"Currently using browser default."})]})})]}),l[s.columnName]!==void 0&&p((ue=l[s.columnName])==null?void 0:ue.data_type,!0)==="time"&&e.jsx(b,{sx:{marginBottom:"10px"},children:e.jsxs(x,{children:[e.jsx(A,{control:e.jsx(R,{checked:s.duration,onClick:o=>{t(h({appId:i,index:n,property:{duration:!s.duration}})),j(!0),o.stopPropagation()}}),label:"Duration format",labelPlacement:"end"}),e.jsx(g,{children:"Enables storage of durations up to 99 hours in the MySQL time format (hh:mm:ss)."})]})}),n!==void 0&&(r==null?void 0:r.data_type)==="enum"&&e.jsxs(b,{children:[e.jsx(f,{children:"Show values in"}),e.jsxs(ve,{sx:{flexDirection:"column",alignContent:"flex-start",margin:"10px 0 5px 10px"},children:[e.jsxs(f,{className:"align-label-radio",children:[e.jsx(T,{checked:s.updatableEnum===void 0||s.updatableEnum===Z.LIST,disabled:!0,onChange:o=>{o.stopPropagation()}}),"Drop-down List"]}),e.jsxs(f,{className:"align-label-radio",children:[e.jsx(T,{checked:s.updatableEnum===Z.RADIO_HORIZONTAL,disabled:!0,onChange:o=>{o.stopPropagation()}}),"Horizontal radio group"]}),e.jsxs(f,{className:"align-label-radio",children:[e.jsx(T,{checked:s.updatableEnum===Z.RADIO_VERTICAL,disabled:!0,onChange:o=>{o.stopPropagation()}}),"Vertical radio group"]})]})]}),e.jsxs(x,{children:[e.jsx(y,{type:"text",variant:"outlined",label:"Default value",value:s.defaultValue??"",placeholder:(r==null?void 0:r.column_default)??"",slotProps:{inputLabel:{shrink:!0}},onChange:o=>{t(h({appId:i,index:n,property:{defaultValue:o.target.value===""?null:o.target.value}})),j(!0),o.stopPropagation()}}),e.jsxs(g,{component:"div",children:[e.jsx(e.Fragment,{children:(r==null?void 0:r.column_default)!==void 0&&(r==null?void 0:r.column_default)!==null&&(r==null?void 0:r.column_default)!==""&&e.jsx(b,{sx:{fontWeight:"bold"},children:"Leave empty to use column default constraint."})}),e.jsxs("div",{children:["Only applied on insert ",S?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:e.jsx(je,{sx:{cursor:"pointer"},underline:"none",onClick:()=>{F(!1)},children:"(hide examples)"})}),e.jsxs("ul",{style:{listStyle:"disc",padding:"0 40px"},children:[e.jsx("li",{children:"Hello World"}),e.jsx("li",{children:"@wpda_wp_user_id"}),e.jsx("li",{children:"@now"})]}),e.jsx("div",{style:w,children:"Notes"}),e.jsxs("ul",{style:{listStyle:"disc",padding:"0 40px"},children:[e.jsx("li",{children:"@wpda_wp_user_id returns the WordPress user ID or 0 for anonymous requests"}),e.jsx("li",{children:"@now returns the current date/time and works with date/time fields only"}),e.jsxs("li",{children:["Column default constraints defined in the database are automatically applied",(r==null?void 0:r.column_default)!==void 0&&(r==null?void 0:r.column_default)!==null&&(r==null?void 0:r.column_default)!==""&&e.jsxs(e.Fragment,{children:[" (current value is ",e.jsx("strong",{children:r==null?void 0:r.column_default}),")"]})]})]})]}):e.jsx("span",{children:e.jsx(je,{sx:{cursor:"pointer"},underline:"none",onClick:()=>{F(!0)},children:"(show examples)"})})]})]})]}),((r==null?void 0:r.data_type)!==void 0&&r.data_type.toLowerCase()!=="text"&&r.data_type.toLowerCase()!=="enum"&&r.data_type.toLowerCase()!=="set"&&r.column_type.toLowerCase()!=="tinyint(1)"&&(p(r.data_type)==="string"||p(r.data_type)==="number")||s.computedField)&&e.jsxs(x,{children:[e.jsx(b,{sx:{display:"grid",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:e.jsxs(e.Fragment,{children:[e.jsx(y,{type:"text",variant:"outlined",label:"Prefix",value:s.prefix,disabled:!0,slotProps:{inputLabel:{shrink:!0}},onChange:o=>{o.stopPropagation()}}),e.jsx(y,{type:"text",variant:"outlined",label:"Suffix",value:s.suffix,disabled:!0,slotProps:{inputLabel:{shrink:!0}},onChange:o=>{o.stopPropagation()}})]})}),e.jsx(g,{children:"Adds a prefix and/or suffix to the column content."})]}),e.jsxs(x,{children:[e.jsx(y,{type:"text",variant:"outlined",label:"CSS classes",fullWidth:!0,value:s.classNames,slotProps:{inputLabel:{shrink:!0}},onChange:o=>{t(h({appId:i,index:n,property:{classNames:o.target.value}})),j(!0),o.stopPropagation()}}),e.jsx(g,{children:"CSS classes (seperated by spaces) for custom styling."})]}),e.jsxs(x,{children:[e.jsx(y,{type:"text",variant:"outlined",label:"Hint",fullWidth:!0,value:s.hint,disabled:!0,slotProps:{inputLabel:{shrink:!0}},onChange:o=>{o.stopPropagation()}}),e.jsx(g,{children:"Help text displayed below data entry field."})]}),(r==null?void 0:r.data_type)!==void 0&&(r.data_type.toLowerCase()==="varchar"||r.data_type.toLowerCase()==="text")&&e.jsxs(x,{sx:{marginTop:"-10px"},children:[e.jsx(A,{control:e.jsx(R,{checked:!1,disabled:!0,onChange:(o,E)=>{o.stopPropagation()}}),label:"Skip sanitization",labelPlacement:"end"}),e.jsx(g,{children:"Skips sanitization while removing backslashes for basic security precautions. Useful to, for example, store code snippets."})]}),!1,((ce=d==null?void 0:d.table_info)==null?void 0:ce.engine)==="CONNECT"&&(p((xe=l[s.columnName])==null?void 0:xe.data_type)==="float"||p((he=l[s.columnName])==null?void 0:he.data_type)==="number")&&e.jsxs(x,{children:[e.jsx(A,{control:e.jsx(R,{checked:((ge=a==null?void 0:a.form)==null?void 0:ge.remoteAutoIncrementColumn)===s.columnName,onChange:(o,E)=>{t(Qe({appId:i,property:{remoteAutoIncrementColumn:E?s.columnName:void 0}})),j(!0),o.stopPropagation()}}),label:"Remote auto-increment",labelPlacement:"end"}),e.jsx(g,{children:"Treats the column as auto-incremented on the remote server (e.g., SQL Server IDENTITY). Use for remote IDENTITY or sequence-based columns to avoid manual value entry."})]}),(r==null?void 0:r.data_type)!==void 0&&r.data_type.toLowerCase()==="text"&&e.jsxs(b,{sx:{display:"grid",gridTemplateColumns:"auto auto auto",alignItems:"center",gap:"10px"},children:[e.jsx(J,{customInput:y,label:"Min rows",value:s.minRows,helperText:"Min rows visible",variant:"outlined",onValueChange:({value:o})=>{t(h({appId:i,index:n,property:{minRows:o}})),j(!0)},onInvalid:o=>{o.preventDefault()},sx:{"& input":{textAlign:"right"}}}),e.jsx(J,{customInput:y,label:"Max rows",value:s.maxRows,helperText:"Max rows visible",variant:"outlined",onValueChange:({value:o})=>{t(h({appId:i,index:n,property:{maxRows:o}})),j(!0)},onInvalid:o=>{o.preventDefault()},sx:{"& input":{textAlign:"right"}}}),e.jsx(J,{customInput:y,label:"Max length",value:s.maxLength??r.character_maximum_length,error:C,helperText:"Max text length",variant:"outlined",onValueChange:({value:o})=>{const E=Number(o);N(E<1||E>r.character_maximum_length),t(h({appId:i,index:n,property:{maxLength:o===""?void 0:o}})),j(!0)},onInvalid:o=>{o.preventDefault()},sx:{"& input":{textAlign:"right"}}})]}),e.jsx(K,{single:!1,margin:"0"})]})]})},ns=({appId:i,columnIndex:n,tableColumn:s})=>{var C,N;u.debug(i,n,s);const r=P(),d=k(i),t=_e(i),a=Ne(i),S=ye(i)[s.columnName],F=(l,w)=>{r(h({appId:i,index:l,property:{lookup:w}})),d(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(rs,{appId:i,columnIndex:n,tableColumn:s}),e.jsx(is,{appId:i,columnIndex:n,tableColumn:s,columnMetaData:S,metaData:a}),(((C=a==null?void 0:a.privs)==null?void 0:C.insert)||((N=a==null?void 0:a.privs)==null?void 0:N.update))&&(t.table.transactions.insert||t.table.transactions.update)&&e.jsx(ts,{appId:i,columnIndex:n,tableColumn:s,columnMetaData:S}),e.jsx(Te,{appId:i,columnIndex:n,tableColumn:s,columnMetaData:S,setLookup:F,target:Se.FORM}),e.jsx(Fe,{columnMetaData:S,metaData:a})]})},os=(i,n)=>{const s=be(r=>{var d;return(d=r.forms[i])==null?void 0:d.columns[n]});return u.debug("storeColumn",s),s};L.lazy(()=>He(()=>import("./ComputedFieldMore-1.0.61-DV852GFn.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]),import.meta.url));const ds=({appId:i,columnIndex:n})=>{u.debug(i,n);const s=P(),r=Ne(i),d=_e(i),t=os(i,n),a=k(i),j=(m,c)=>{u.debug(m,c),s(h({appId:i,index:m,property:{visible:c}})),a(!0)},S=(m,c)=>{u.debug(m,c),s(h({appId:i,index:m,property:{more:c}})),a(!0)},F=(m,c)=>{u.debug(m,c),s(h({appId:i,index:m,property:{updatable:c}})),a(!0)};Xe.TEXT;const[C,N]=L.useState(!1),[l,w]=L.useState(void 0),O=m=>{m!==void 0&&(s(Ze({appId:i,index:m})),a(!0))},G=(m,c,H)=>(u.debug(m,c,H),e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsx(Ce,{id:m,enabled:!1})}),e.jsxs(b,{sx:{display:"inline-grid",gridTemplateColumns:t.computedField!==void 0?"auto auto":"auto",justifyContent:"start",alignItems:"center",gap:"10px","& svg":{opacity:"0.5"}},children:[t.computedField!==void 0&&e.jsx(Je,{}),e.jsx(f,{children:c})]})]})),v=!r.primary_key.includes(t.columnName);return e.jsxs(e.Fragment,{children:[e.jsxs(W,{disableGutters:!0,slotProps:{transition:{unmountOnExit:!0}},children:[e.jsxs(B,{className:"pp-column-settings",component:"div",expandIcon:e.jsx(U,{}),sx:{justifyContent:"space-between"},children:[e.jsx(b,{sx:{display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center","& svg":{display:"flex"}},children:G(t.columnName,t.columnLabel,n)}),e.jsxs(b,{style:{display:"grid",gridTemplateColumns:"40px 40px 40px"},children:[e.jsx(z,{title:"Visibility",position:"bottom",children:e.jsx(Y,{onClick:m=>{t.visible?t.more?(j(n,!1),S(n,!1)):S(n,!0):t.more?S(n,!1):j(n,!0),m.stopPropagation()},children:t.visible?e.jsx(e.Fragment,{children:t.more?e.jsx(V,{checked:!0,children:e.jsx(ze,{})}):e.jsx(V,{checked:!0,children:e.jsx(fe,{})})}):e.jsx(V,{checked:!1,children:e.jsx(fe,{})})})}),t.computedField?e.jsx(e.Fragment,{children:e.jsx(z,{title:"Delete",position:"bottom",children:e.jsx(Y,{onClick:m=>{N(!0),w(n),m.stopPropagation()},children:e.jsx(Ue,{})})})}):e.jsx(z,{title:"Updatable",position:"bottom",disabled:!d.table.transactions.insert&&!d.table.transactions.update||!v||!t.visible,children:e.jsx(Y,{disabled:!d.table.transactions.insert&&!d.table.transactions.update||!v||!t.visible,onClick:m=>{F(n,!t.updatable),m.stopPropagation()},children:e.jsx(V,{checked:t.updatable&&v&&(d.table.transactions.insert||d.table.transactions.update),disabled:!d.table.transactions.insert&&!d.table.transactions.update||!v,forceOff:!v||!t.visible,children:e.jsx(Ye,{})})})}),e.jsx(z,{title:"Alignment",position:"bottom",disabled:!t.visible,children:e.jsxs(Y,{disabled:!t.visible,onClick:m=>{t.alignment===_.LEFT?s(h({appId:i,index:n,property:{alignment:_.CENTER}})):t.alignment===_.CENTER?s(h({appId:i,index:n,property:{alignment:_.RIGHT}})):t.alignment===_.RIGHT&&s(h({appId:i,index:n,property:{alignment:_.LEFT}})),a(!0),m.stopPropagation()},children:[t.alignment===_.LEFT&&e.jsx(We,{}),t.alignment===_.CENTER&&e.jsx(Be,{}),t.alignment===_.RIGHT&&e.jsx(qe,{})]})})]})]}),e.jsx(q,{children:e.jsx(ns,{appId:i,columnIndex:n,tableColumn:t})})]},n),e.jsx(ss,{title:"Delete computed field?",message:"Are you sure you want to delete this computed field? This action cannot be undone!",open:C,setOpen:N,onConfirm:()=>O(l)})]})},as=i=>{const n=be(s=>{var r,d;return(d=(r=s.forms[i])==null?void 0:r.state)==null?void 0:d.sortedColumns});return u.debug("sortedColumns",n),n},Rr=({appId:i})=>{u.debug(i),P();const n=Le(Q(Ge),Q(Oe),Q(Re));k(i);const s=d=>{const{active:t,over:a}=d;(t==null?void 0:t.id)!==(a==null?void 0:a.id)&&u.debug(t,a)},r=as(i);return r===void 0||r.length===0?null:e.jsxs(e.Fragment,{children:[e.jsx(Pe,{autoScroll:!0,sensors:n,collisionDetection:ke,onDragEnd:s,children:e.jsx(we,{items:r,children:r.map((d,t)=>e.jsx(Ee,{id:d,children:e.jsx(ds,{appId:i,columnIndex:t})},d))})}),e.jsx(Ae,{appId:i,target:Se.FORM})]})};export{Rr as default};
