import{j as i}from"./cm-1.0.61-D9ug3d5m.js";import{l as p,bi as c,bj as g,bw as S,bx as w,by as x}from"./lib-1.0.61-DoXQcMHD.js";import{r as a}from"./redux-1.0.61-CrJ4jvTM.js";import{A,u as C}from"./AppTheme-1.0.61-CGnMRNDC.js";import{u as h}from"./useTableSettings-1.0.61-C890ZGxM.js";import{u as j}from"./useStoreFormSettings-1.0.61-CgHnNhxx.js";import{u as F}from"./useMetadata-1.0.61-CVl9oDgw.js";import{u as y}from"./useGlobalCode-1.0.61-BrC3IXaa.js";import{u as M}from"./useAppFunctions-1.0.61-EdKk0_Mu.js";import{T as v}from"./ThemeProvider-1.0.61-4HOD8y6D.js";import"./vendor-1.0.61-CN03Eozo.js";import"./loglevel-1.0.61-BZ7XahX3.js";import"./lodash-1.0.61-C8OpKhUs.js";import"./moment-1.0.61-C5S46NFB.js";import"./index-1.0.61-CRnugLvI.js";import"./Typography-1.0.61-Cg0Css-P.js";import"./getThemeProps-1.0.61-OfsHdeDz.js";import"./useEnhancedEffect-1.0.61-CX4-xj9Z.js";import"./hooks-1.0.61-Bklk-gZu.js";const W=({appId:o,children:d})=>{p.debug(o);const b=h(o),E=j(),T=C(),s=F(o);let n;s.appRootId===void 0&&(n=A(T,b,E));const t=y(),u=`pp-global-code-${o}`,{app:l}=M(o);return a.useEffect(()=>{var e,r;p.debug("open app",(e=t.onAppOpen)==null?void 0:e.code),c(((r=t.onAppOpen)==null?void 0:r.code)??"",g(s),!1,{app:l,loadScript:x,loadStyle:w})},[]),a.useEffect(()=>()=>{var e;p.debug("close app"),c(((e=t.onAppClose)==null?void 0:e.code)??"",g(s),!1,{app:l})},[]),a.useEffect(()=>{var e,r,f;if(t!==void 0&&S(s)){(e=window.document.getElementById(u))==null||e.remove();const m=window.document.createElement("script");m.id=u,m.innerHTML=((r=t.global)==null?void 0:r.code)??"",(f=window.document.getElementById(`pp-app-${o}`))==null||f.appendChild(m)}},[t]),n!==void 0?i.jsx(v,{theme:n,children:d}):i.jsx(i.Fragment,{children:d})};export{W as default};
