import{j as e}from"./cm-1.0.61-D9ug3d5m.js";import{u as U,L as ee,S as te,a as ie,I as z,b as se,c as re,d as G,D as ae,e as ne,f as oe,g as le,h as de,T as ce,M as me,P as pe}from"./useMetadataColumns-1.0.61-TT5M5XKt.js";import{r as C}from"./redux-1.0.61-CrJ4jvTM.js";import{u as ue,a as D}from"./hooks-1.0.61-Bklk-gZu.js";import{l as j,cp as M,a as B,c6 as m,C as xe,bL as he,cq as je,cr as fe,k as v,H as ge,cs as be}from"./lib-1.0.61-DoXQcMHD.js";import{s as ye}from"./index-1.0.61-Cpc7oUnN.js";import{y as _,m as Se,af as q,ag as Te,ah as ke,ai as Ne,o as ve,aj as Me,ak as Pe,al as De,am as Fe,an as Ae,ao as Le}from"./index-1.0.61-B7tjLD84.js";import{T as A}from"./Tooltip-1.0.61-De3BL3Jg.js";import{u as F}from"./useTableUpdater-1.0.61-D-pqUshE.js";import{B as c}from"./Spinner-1.0.61-khi9zO7Q.js";import{a as H,F as x,b as h,T as E}from"./TextField-1.0.61-DyvT2G_W.js";import{S as J}from"./Slider-1.0.61-BGScnB2M.js";import{u as Y}from"./useMetadata-1.0.61-CVl9oDgw.js";import{D as K}from"./DynamicModeEnum-1.0.61-BXuL5kgA.js";import{P as W}from"./PremiumFeature-1.0.61-BxBWJ4MJ.js";import"./moment-1.0.61-C5S46NFB.js";import{b as Ce}from"./SharedContainer-1.0.61-D5Lln0NA.js";import{d as we,e as Ee,c as Ue}from"./index-1.0.61-BRtOqdFl.js";import{H as Q}from"./settings-1.0.61-BN5quc55.js";import{A as O,a as R}from"./AccordionSummary-1.0.61-B21Kp3oq.js";import{A as V}from"./AccordionDetails-1.0.61-CrQNuW_u.js";import{F as b}from"./FormControlLabel-1.0.61-Bu2IQ4da.js";import{S as y}from"./Switch-1.0.61-CRYcdQMV.js";import{L as _e}from"./Link-1.0.61-BHBICLVE.js";import{A as Oe}from"./AdminTheme-1.0.61-D8bUxwpM.js";import{A as Re}from"./Autocomplete-1.0.61-CP0PiliY.js";import{C as Ve}from"./Checkbox-1.0.61-BlN5bjuH.js";import{C as ze}from"./ConfirmDialog-1.0.61-BrxkBu_y.js";import{I as L}from"./iconBase-1.0.61-C8saXaJ2.js";import{u as Ge}from"./useTableColumnOrder-1.0.61-Ds81s_GP.js";import"./vendor-1.0.61-CN03Eozo.js";import"./cmJson-1.0.61-BLURwXOE.js";import"./rehyperaw-1.0.61-AkovKNCK.js";import"./markdown-1.0.61-6nAzZWly.js";import"./notistack-1.0.61-0awN6uG4.js";import"./useFormUpdater-1.0.61-D3TDEm-F.js";import"./Typography-1.0.61-Cg0Css-P.js";import"./Stepper-1.0.61-DGQ0aYov.js";import"./ButtonBase-1.0.61-BqsrQx8o.js";import"./useEnhancedEffect-1.0.61-CX4-xj9Z.js";import"./createSvgIcon-1.0.61-DDgmYdEo.js";import"./Collapse-1.0.61-Cww0NnSm.js";import"./Modal-1.0.61-DVFPMIPt.js";import"./useTableIsUpdated-1.0.61-CCSFtZgQ.js";import"./RadioGroup-1.0.61-BZHJMWN9.js";import"./Radio-1.0.61-BXMcBwcB.js";import"./SwitchBase-1.0.61-C2xa6JFZ.js";import"./Select-1.0.61-DmroHcG5.js";import"./Menu-1.0.61-D2OtRuzX.js";import"./ThemeProvider-1.0.61-4HOD8y6D.js";import"./cjs-1.0.61-D_0erLfe.js";import"./ActionsDml-1.0.61-DA32DqSB.js";import"./RestApi-1.0.61-DdTZ_pIc.js";import"./MenuItem-1.0.61-Bmr1xWyp.js";import"./DefaultWhere-1.0.61-D25JpoiD.js";import"./loglevel-1.0.61-BZ7XahX3.js";import"./lodash-1.0.61-C8OpKhUs.js";import"./visuallyHidden-1.0.61-Dan1xhjv.js";import"./useAppFunctions-1.0.61-EdKk0_Mu.js";import"./useStoreFormSettings-1.0.61-CgHnNhxx.js";import"./useRemoveAppFromStore-1.0.61-E72jey9_.js";import"./Languages-1.0.61-BxgPwugF.js";import"./AppTheme-1.0.61-CGnMRNDC.js";import"./index-1.0.61-CRnugLvI.js";import"./getThemeProps-1.0.61-OfsHdeDz.js";import"./useChartSettings-1.0.61-BIp9UVZM.js";import"./useLocaleUd-1.0.61-DEEqF_bH.js";import"./useScreenSize-1.0.61-B4FX7-PC.js";import"./index-1.0.61-LP991tft.js";import"./dayjs.min-1.0.61-21Xi_c_9.js";import"./dompurify-1.0.61-DhD2mIk-.js";import"./useFormDetails-1.0.61-677sicqv.js";import"./StoreTypeEnum-1.0.61-Tot-ESpR.js";import"./FallbackSpinner-1.0.61-s3WTN65t.js";import"./main-1.0.61.js";import"./TabPanel-1.0.61-BtYzUOMH.js";import"./InputAdornment-1.0.61-23wkGu1k.js";import"./CardHeader-1.0.61-gDG-f_-J.js";import"./Close-1.0.61-CiuKDfYz.js";import"./Chip-1.0.61-C6TjQKDp.js";import"./DialogContent-1.0.61-Ws3r0VFj.js";var T=(i=>(i[i.SUM=0]="SUM",i[i.MIN=1]="MIN",i[i.MAX=2]="MAX",i[i.AVG=3]="AVG",i[i.COUNT=4]="COUNT",i[i.UNIQUE=5]="UNIQUE",i[i.STD=6]="STD",i[i.VARIANCE=7]="VARIANCE",i[i.MEDIAN=8]="MEDIAN",i))(T||{}),k=(i=>(i.SUM="Total",i.MIN="Minimum",i.MAX="Maximum",i.AVG="Average",i.COUNT="Count",i.UNIQUE="Unique",i.STD="Standard deviation",i.VARIANCE="Variance",i.MEDIAN="Median",i))(k||{});const Be=(i,a)=>{const t=ue(l=>l.tables[i].columns[a]);return j.debug("tableColumn",t),t},He=({appId:i,columnIndex:a,tableColumn:t})=>{const l=D(),s=F(i);return e.jsxs(c,{sx:{margin:"0 1rem 2rem 1rem"},children:[e.jsx(H,{children:"Width"}),e.jsxs(c,{sx:{display:"grid",gridTemplateColumns:"1fr auto",gridGap:"30px",alignItems:"center"},children:[e.jsx(J,{min:60,max:420,step:1,value:t.width,marks:[{value:60,label:"60"},{value:120,label:"120"},{value:180,label:"180"},{value:240,label:"240"},{value:300,label:"320"},{value:360,label:"360"},{value:420,label:"420"}],valueLabelDisplay:"auto",onChange:(r,p)=>{l(M({appId:i,index:a,property:{width:p}})),s(!0),r.stopPropagation()}}),e.jsx("span",{children:"px"})]}),e.jsx(x,{children:e.jsxs(h,{children:["Column width is relative when responsiveness = ",e.jsx("strong",{children:"auto column hiding"}),"."]})})]})},We=({appId:i,columnIndex:a,tableColumn:t})=>{var N,P,n;j.debug(i,a,t),D();const l=Ce(i),s=Y(i);U(i,s);const[r,p]=C.useState(!1),[d,u]=C.useState(!1);return F(i),e.jsxs(O,{disableGutters:!0,children:[e.jsxs(R,{expandIcon:e.jsx(_,{}),className:"pp-context-help-summary",sx:{fontSize:"1rem","& .MuiAccordionSummary-content":{padding:"1rem",alignItems:"center"}},children:[e.jsx(we,{}),e.jsx("span",{style:{paddingLeft:"0.5rem"},children:"Column actions"}),e.jsx(Q,{path:"table-builder/menu/columns/column-actions.html",size:22})]}),e.jsxs(V,{sx:{display:"grid",paddingTop:"1rem"},children:[e.jsxs(c,{sx:{margin:"0 10px",display:"grid",gridTemplateColumns:"auto"},children:[t.computedField?e.jsx(b,{control:e.jsx(y,{checked:!1,disabled:!0}),label:"Enable inline search",labelPlacement:"end"}):e.jsx(b,{control:e.jsx(y,{checked:t.inlineSearch&&!1,disabled:!0,onChange:(S,w)=>{S.stopPropagation()}}),label:"Enable column filter",labelPlacement:"end"}),t.inlineSearch&&!1,((N=s==null?void 0:s.privs)==null?void 0:N.update)&&s.primary_key.length>0&&e.jsx(e.Fragment,{children:!t.computedField&&!t.columnName.startsWith(B.relationTablePrefix)&&!(((P=l==null?void 0:l.state)==null?void 0:P.masterDetailConditions)!==void 0&&((n=l==null?void 0:l.state)==null?void 0:n.masterDetailConditions[t.columnName])!==void 0)?e.jsx(b,{control:e.jsx(y,{checked:t.visible&&t.inlineEditing,disabled:!0,onChange:(S,w)=>{S.stopPropagation()}}),label:"Enable inline editing",labelPlacement:"end"}):e.jsx(b,{control:e.jsx(y,{checked:!1,disabled:!0}),label:"Enable inline editing",labelPlacement:"end"})})]}),!1,e.jsxs(h,{component:"div",sx:{marginTop:"30px"},children:[e.jsx(c,{children:e.jsxs(_e,{sx:{textDecoration:"none",cursor:"pointer",display:"inline-flex","& svg":{fontSize:"1rem",marginRight:"2px"}},onClick:()=>p(!r),children:[e.jsx(Se,{}),"What are column actions?"]})}),r&&e.jsxs(c,{sx:{marginTop:"20px",display:"grid",gap:"20px",marginBottom:"20px"},children:[e.jsx(c,{children:"Column actions are actions added to a table column to enhance usability and user-friendliness."}),e.jsx(c,{children:e.jsx("strong",{children:"Column filtering"})}),e.jsx(c,{children:"When column filtering is enabled, a search field is added to the table for performing column-specific searches. A search box allows wildcard searches, while drop-down lists perform exact searches. Exact searches can improve performance, especially when the searched columns are well-indexed."}),e.jsx(c,{children:"To enable the column filter feature, go to the TABLE section under Column Filters. You can also change the position of the column filters."}),e.jsx(c,{children:"The global filter performs a wildcard search. This feature can be disabled in the TABLE section under Global filter."}),e.jsx(c,{children:e.jsx("strong",{children:"Inline editing"})}),e.jsx(c,{children:"Inline editing allows users to change table columns directly, without needing to open a data entry form. This feature is not available for primary key fields. Drop-down lists are automatically generated for enum and set data types."})]})]}),e.jsx(ee,{}),e.jsx(W,{})]})]})},Qe=({appId:i,columnIndex:a,tableColumn:t})=>{var d,u,g,N,P;const l=D(),s=F(i),r=U(i),p=(n,S)=>{j.debug(n,S)};return e.jsxs(O,{disableGutters:!0,children:[e.jsxs(R,{expandIcon:e.jsx(_,{}),className:"pp-context-help-summary",sx:{fontSize:"1rem","& .MuiAccordionSummary-content":{padding:"1rem",alignItems:"center"}},children:[e.jsx(Ee,{}),e.jsx("span",{style:{paddingLeft:"0.5rem"},children:"Column settings"}),e.jsx(Q,{path:"table-builder/menu/columns/column-settings.html",size:22})]}),e.jsxs(V,{sx:{display:"grid",gridGap:"2rem",paddingTop:"1rem"},children:[(t.computedField||r[t.columnName]!==void 0&&!t.inlineEditing&&t.lookup===void 0&&(m(r[t.columnName].data_type)==="float"||m(r[t.columnName].data_type)==="number"||m(r[t.columnName].data_type)==="time"||m(r[t.columnName].data_type,!0)==="date"||m(r[t.columnName].data_type,!0)==="datetime"||m(r[t.columnName].data_type,!0)==="timestamp"||m(r[t.columnName].data_type,!0)==="time"))&&e.jsx(c,{children:e.jsxs(x,{children:[e.jsx(b,{control:e.jsx(y,{checked:!1,disabled:!0,onClick:n=>{n.stopPropagation()}}),label:"Localize",labelPlacement:"end"}),e.jsx(h,{children:m((d=r[t.columnName])==null?void 0:d.data_type)==="float"||m((u=r[t.columnName])==null?void 0:u.data_type)==="number"?"Localize decimal and thousands seperators.":"Localize date and time fields."})]})}),r[t.columnName]!==void 0&&t.inlineEditing&&(m(r[t.columnName].data_type,!0)==="date"||m(r[t.columnName].data_type,!0)==="datetime"||m(r[t.columnName].data_type,!0)==="timestamp"||m(r[t.columnName].data_type,!0)==="time")&&e.jsxs(c,{children:[e.jsxs(x,{children:[e.jsx(b,{control:e.jsx(y,{checked:!1,disabled:!0,onClick:n=>{n.stopPropagation()}}),label:"Localize",labelPlacement:"end"}),e.jsx(h,{children:"Localize date and time fields."})]}),e.jsxs(x,{children:[e.jsx(b,{control:e.jsx(y,{checked:!1,disabled:!0,onClick:n=>{n.stopPropagation()}}),label:"MySQL format",labelPlacement:"end"}),e.jsx(h,{children:"Localize date and time fields."})]}),!t.duration&&!t.localize&&!t.mysqlFormat&&e.jsx(x,{fullWidth:!0,children:e.jsxs(h,{component:"div",sx:{display:"flex",alignItems:"center",gap:"2px","& svg":{marginTop:"-2px"}},children:[e.jsx(q,{}),e.jsx("i",{children:"Currently using browser default."})]})}),t.duration&&e.jsx(x,{fullWidth:!0,children:e.jsxs(h,{component:"div",sx:{display:"flex",alignItems:"center",gap:"2px","& svg":{marginTop:"-2px"}},children:[e.jsx(q,{}),e.jsx("i",{children:"Currently using duration format."})]})})]}),r[t.columnName]!==void 0&&m((g=r[t.columnName])==null?void 0:g.data_type,!0)==="time"&&e.jsx(c,{children:e.jsx(c,{sx:{marginBottom:"10px"},children:e.jsxs(x,{children:[e.jsx(b,{control:e.jsx(y,{checked:t.duration,onClick:n=>{l(M({appId:i,index:a,property:{duration:!t.duration}})),s(!0),n.stopPropagation()}}),label:"Duration format",labelPlacement:"end"}),e.jsx(h,{children:"Enables storage of durations up to 99 hours in the MySQL time format (hh:mm:ss)."})]})})}),(r[t.columnName]!==void 0&&t.lookup===void 0&&m(r[t.columnName].data_type,!0)==="float"||t.computedField!==void 0)&&e.jsxs(x,{children:[e.jsx(H,{children:"Decimals"}),e.jsx(J,{min:0,max:6,value:t.decimals,marks:[{value:0,label:"0"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"∞"}],valueLabelDisplay:"auto",disabled:!0,onChange:(n,S)=>{j.debug(S),n.stopPropagation()}}),e.jsx(h,{children:"Number of decimals displayed."})]}),r[t.columnName]!==void 0&&t.localize===!0&&(m(r[t.columnName].data_type,!0)==="date"||m(r[t.columnName].data_type,!0)==="datetime"||m(r[t.columnName].data_type,!0)==="timestamp")&&e.jsx(c,{children:e.jsx(x,{children:e.jsx(b,{control:e.jsx(y,{checked:!1,disabled:!0,onClick:n=>{n.stopPropagation()}}),label:"Add leading zeros to days and month",labelPlacement:"end"})})}),e.jsxs(x,{children:[e.jsxs(c,{sx:{display:"grid",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(E,{type:"text",variant:"outlined",label:"Prefix",value:t.prefix,disabled:!0,slotProps:{inputLabel:{shrink:!0}},onChange:n=>{n.stopPropagation()}}),e.jsx(E,{type:"text",variant:"outlined",label:"Suffix",value:t.suffix,disabled:!0,slotProps:{inputLabel:{shrink:!0}},onChange:n=>{n.stopPropagation()}})]}),e.jsx(h,{children:"Adds a prefix and/or suffix to the column content (also added to inline text and number fields)."})]}),e.jsxs(x,{children:[e.jsx(E,{type:"text",variant:"outlined",label:"CSS classes",fullWidth:!0,value:t.classNames,slotProps:{inputLabel:{shrink:!0}},onChange:n=>{l(M({appId:i,index:a,property:{classNames:n.target.value}})),s(!0),n.stopPropagation()}}),e.jsx(h,{children:"CSS classes (seperated by spaces) for custom styling."})]}),e.jsxs(x,{children:[e.jsx(b,{control:e.jsx(y,{checked:t.allowMarkup,onChange:(n,S)=>{l(M({appId:i,index:a,property:{allowMarkup:S}})),s(!0),n.stopPropagation()}}),label:"Allow inline HTML",labelPlacement:"end"}),e.jsxs(h,{children:["Allows markup in column content. ",e.jsx("span",{style:{...t.allowMarkup&&{color:((P=(N=Oe)==null?void 0:N.palette)==null?void 0:P.error.main)??"red"}},children:"Enabling this feature may pose a risk of cross-site scripting (XSS) attacks."})]})]}),e.jsxs(c,{sx:{display:"grid",gridTemplateColumns:"auto"},children:[e.jsx(b,{control:e.jsx(y,{checked:!1,disabled:!0,onClick:n=>{xe.appFeature===!0&&p(a,!t.visibleTablet),n.stopPropagation()}}),label:"Show column on tablet",labelPlacement:"end"}),e.jsx(b,{control:e.jsx(y,{checked:!1,disabled:!0,onClick:n=>{n.stopPropagation()}}),label:"Show column on mobile",labelPlacement:"end"})]}),e.jsx(W,{single:!1,margin:"0"})]})]})},qe=[{key:T.SUM,label:k.SUM},{key:T.MIN,label:k.MIN},{key:T.MAX,label:k.MAX},{key:T.AVG,label:k.AVG},{key:T.COUNT,label:k.COUNT},{key:T.UNIQUE,label:k.UNIQUE},{key:T.STD,label:k.STD},{key:T.VARIANCE,label:k.VARIANCE},{key:T.MEDIAN,label:k.MEDIAN}],X=[...qe],Xe=({appId:i,columnIndex:a,tableColumn:t})=>{j.debug(i,a,t),D(),F(i);const l=U(i),s=C.useMemo(()=>{var r;return(t==null?void 0:t.aggregation)===void 0?[]:(r=t==null?void 0:t.aggregation)==null?void 0:r.map(p=>X.filter(d=>d.key===p)[0])},[t==null?void 0:t.aggregation]);return!he(i)||t.computedField===void 0&&m(l[t.columnName].data_type)!=="number"?null:e.jsxs(O,{disableGutters:!0,children:[e.jsxs(R,{expandIcon:e.jsx(_,{}),className:"pp-context-help-summary",sx:{fontSize:"1rem","& .MuiAccordionSummary-content":{padding:"1rem",alignItems:"center"}},children:[e.jsx(Ue,{}),e.jsx("span",{style:{paddingLeft:"0.5rem"},children:"Aggregations"}),e.jsx(Q,{path:"table-builder/menu/columns/column-aggregations.html",size:22})]}),e.jsxs(V,{sx:{marginTop:"10px"},children:[e.jsxs(x,{fullWidth:!0,children:[e.jsx(Re,{multiple:!0,options:X,disabled:!0,disableCloseOnSelect:!0,getOptionLabel:r=>r.label,value:s,onChange:(r,p)=>{r.stopPropagation()},renderOption:(r,p,{selected:d})=>C.createElement("li",{...r,key:p.label},e.jsx(Ve,{icon:e.jsx(ke,{}),checkedIcon:e.jsx(Te,{}),style:{marginRight:8},checked:d}),p.label),renderInput:r=>e.jsx(E,{...r,label:"Select from list"})}),e.jsx(h,{children:"Allows multiple selections. Displayed in order of entry."})]}),e.jsx(x,{sx:{marginTop:"20px",marginLeft:"-10px"},children:e.jsxs(h,{component:"div",children:["Aggregations are calculated:",e.jsxs("ul",{style:{marginBottom:0,listStyleType:"disc",paddingLeft:"40px"},children:[e.jsx("li",{children:"per table with client-side processing enabled"}),e.jsx("li",{children:"per page with server-side processing enabled"})]})]})}),e.jsx(W,{})]})]})},Je=({appId:i,columnIndex:a,tableColumn:t})=>{j.debug(i,a,t);const l=D(),s=F(i),r=Y(i),d=U(i)[t.columnName],u=(g,N)=>{l(je({appId:i,columnName:t.columnName})),l(fe({appId:i,columnName:t.columnName})),l(M({appId:i,index:g,property:{lookup:N}})),s(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(He,{appId:i,columnIndex:a,tableColumn:t}),e.jsx(Qe,{appId:i,columnIndex:a,tableColumn:t}),e.jsx(We,{appId:i,columnIndex:a,tableColumn:t}),e.jsx(te,{appId:i,columnIndex:a,tableColumn:t,columnMetaData:d,setLookup:u,target:K.TABLE}),e.jsx(Xe,{appId:i,columnIndex:a,tableColumn:t}),e.jsx(ie,{columnMetaData:d,metaData:r})]})},Ye=({appId:i,columnIndex:a,tableType:t})=>{j.debug(i,a,t);const l=D(),s=Be(i,a),r=F(i),[p,d]=C.useState(!1),[u,g]=C.useState(void 0),N=o=>{o!==void 0&&(l(be({appId:i,index:o})),r(!0))},P=(o,f)=>{j.debug(o,f),l(M({appId:i,index:o,property:{visible:f}})),r(!0)},n=(o,f)=>{j.debug(o,f),l(M({appId:i,index:o,property:{queryable:f}})),r(!0)},S=(o,f)=>{j.debug(o,f),l(M({appId:i,index:o,property:{orderable:f}})),r(!0)},w=(o,f)=>{l(M({appId:i,index:o,property:{alignment:f}})),r(!0)},Z=o=>{j.debug(o),l(ge({appId:i,property:{computedFieldIndex:a}}))},$=(o,f,I)=>(j.debug(o,f,I),e.jsxs(e.Fragment,{children:[e.jsx(c,{sx:{"& svg":{pointerEvents:"none",opacity:"0.5"}},children:e.jsx(se,{id:o,enabled:!1},o)}),e.jsxs(c,{sx:{display:"inline-grid",gridTemplateColumns:s.computedField!==void 0?"auto auto":"auto",justifyContent:"start",alignItems:"center",gap:"10px","& svg":{opacity:"0.5"}},children:[s.computedField!==void 0&&e.jsx(ye,{}),e.jsx(H,{children:s.computedField!==void 0?s.computedField.label:f})]})]}));return e.jsxs(e.Fragment,{children:[e.jsxs(O,{disableGutters:!0,slotProps:{transition:{unmountOnExit:!0}},children:[e.jsxs(R,{className:"pp-column-settings",component:"div",expandIcon:e.jsx(_,{}),sx:{justifyContent:"space-between",position:"relative"},children:[t!==""&&e.jsx(c,{sx:{position:"absolute",top:"5px",right:"5px",fontSize:"50%"},children:t}),e.jsx(c,{sx:{display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center","& svg":{display:"flex"}},children:$(s.columnName,s.columnLabel,a)}),e.jsxs("div",{style:{display:"inline-grid",gridTemplateColumns:"40px 40px 40px 40px"},children:[e.jsx(A,{title:"Visibility",position:"bottom",children:e.jsx(L,{onClick:o=>{P(a,!s.visible),o.stopPropagation()},children:e.jsx(z,{checked:s.visible,children:e.jsx(Ne,{})})})}),s.computedField?e.jsx(A,{title:"Edit",position:"bottom",children:e.jsx("span",{children:e.jsx(L,{onClick:o=>{Z(a),o.stopPropagation()},children:e.jsx(Me,{})})})}):e.jsx(A,{title:"Searchable",position:"bottom",children:e.jsx(L,{onClick:o=>{n(a,!s.queryable),o.stopPropagation()},children:e.jsx(z,{checked:s.queryable,alignRight:!1,children:e.jsx(ve,{})})})}),s.computedField?e.jsx(A,{title:"Delete",position:"bottom",children:e.jsx(L,{onClick:o=>{g(a),d(!0),o.stopPropagation()},children:e.jsx(De,{})})}):e.jsx(A,{title:"Sortable",position:"bottom",disabled:s.visible===!1,children:e.jsx(L,{disabled:s.visible===!1,onClick:o=>{S(a,!s.orderable),o.stopPropagation()},children:e.jsx(z,{checked:s.orderable,forceOff:s.visible===!1,children:e.jsx(Pe,{})})})}),e.jsx(A,{title:"Alignment",position:"bottom",disabled:s.visible===!1,children:e.jsxs(L,{disabled:s.visible===!1,onClick:o=>{s.alignment===v.LEFT?w(a,v.CENTER):s.alignment===v.CENTER?w(a,v.RIGHT):s.alignment===v.RIGHT&&w(a,v.LEFT),r(!0),o.stopPropagation()},children:[s.alignment===v.LEFT&&e.jsx(Fe,{}),s.alignment===v.CENTER&&e.jsx(Ae,{}),s.alignment===v.RIGHT&&e.jsx(Le,{})]})})]})]}),e.jsx(V,{children:e.jsx(Je,{appId:i,columnIndex:a,tableColumn:s})})]},a),e.jsx(ze,{title:"Delete computed field?",message:"Are you sure you want to delete this computed field? This action cannot be undone!",open:p,setOpen:d,onConfirm:()=>N(u)})]})},ki=({appId:i,metaData:a})=>{j.debug(i,a),D();const t=re(G(pe),G(me),G(ce));F(i);const l=d=>{const{active:u,over:g}=d;j.debug(u,g),u==null||u.id,g==null||g.id},s=Ge(i),r=()=>(s==null?void 0:s.filter(d=>d.startsWith(B.relationTablePrefix)).length)>0,p=d=>r()?d.startsWith(B.relationTablePrefix)?"Relation Table Column":"Join Table Column":"";return s===void 0||s.length===0?null:e.jsxs(e.Fragment,{children:[e.jsx(ae,{autoScroll:!0,sensors:t,collisionDetection:ne,onDragEnd:l,children:e.jsx(oe,{items:s,children:s.map((d,u)=>e.jsx(le,{id:d,children:e.jsx(Ye,{appId:i,columnIndex:u,tableType:p(d)})},d))})}),e.jsx(de,{appId:i,target:K.TABLE})]})};export{ki as default};
