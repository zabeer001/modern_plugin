const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SharedContainer-1.0.61-D5Lln0NA.js","./cmJson-1.0.61-BLURwXOE.js","./cm-1.0.61-D9ug3d5m.js","./redux-1.0.61-CrJ4jvTM.js","./vendor-1.0.61-CN03Eozo.js","./lib-1.0.61-DoXQcMHD.js","./loglevel-1.0.61-BZ7XahX3.js","./lodash-1.0.61-C8OpKhUs.js","./moment-1.0.61-C5S46NFB.js","./rehyperaw-1.0.61-AkovKNCK.js","./markdown-1.0.61-6nAzZWly.js","./hooks-1.0.61-Bklk-gZu.js","./Spinner-1.0.61-khi9zO7Q.js","./Typography-1.0.61-Cg0Css-P.js","./AdminTheme-1.0.61-D8bUxwpM.js","./ActionsDml-1.0.61-DA32DqSB.js","./RestApi-1.0.61-DdTZ_pIc.js","./notistack-1.0.61-0awN6uG4.js","./useAppFunctions-1.0.61-EdKk0_Mu.js","./useMetadata-1.0.61-CVl9oDgw.js","./useStoreFormSettings-1.0.61-CgHnNhxx.js","./useRemoveAppFromStore-1.0.61-E72jey9_.js","./Languages-1.0.61-BxgPwugF.js","./AppTheme-1.0.61-CGnMRNDC.js","./index-1.0.61-CRnugLvI.js","./getThemeProps-1.0.61-OfsHdeDz.js","./useEnhancedEffect-1.0.61-CX4-xj9Z.js","./useChartSettings-1.0.61-BIp9UVZM.js","./useLocaleUd-1.0.61-DEEqF_bH.js","./useScreenSize-1.0.61-B4FX7-PC.js","./cjs-1.0.61-D_0erLfe.js","./ButtonBase-1.0.61-BqsrQx8o.js","./index-1.0.61-LP991tft.js","./dayjs.min-1.0.61-21Xi_c_9.js","./index-1.0.61-B7tjLD84.js","./ThemeProvider-1.0.61-4HOD8y6D.js","./Modal-1.0.61-DVFPMIPt.js","./iconBase-1.0.61-C8saXaJ2.js","./dompurify-1.0.61-DhD2mIk-.js","./useFormDetails-1.0.61-677sicqv.js","./DynamicModeEnum-1.0.61-BXuL5kgA.js","./StoreTypeEnum-1.0.61-Tot-ESpR.js","./FallbackSpinner-1.0.61-s3WTN65t.js","./main-1.0.61.js","./SharedContainer-1.0.61-CL-1K3JO.css"])))=>i.map(i=>d[i]);
import{j as a}from"./cm-1.0.61-D9ug3d5m.js";import{r as f,R as k}from"./redux-1.0.61-CrJ4jvTM.js";import{b as F,s as v}from"./SharedContainer-1.0.61-D5Lln0NA.js";import{d as S}from"./index.esm-1.0.61-Dhj7A6Yv.js";import{l as L,cL as P,S as A,c6 as M,cM as O,C as B}from"./lib-1.0.61-DoXQcMHD.js";import{e as R}from"./tab-1.0.61-B4c65fpQ.js";import{B as x}from"./Spinner-1.0.61-khi9zO7Q.js";import{_ as W}from"./cmJson-1.0.61-BLURwXOE.js";import"./moment-1.0.61-C5S46NFB.js";import"./vendor-1.0.61-CN03Eozo.js";import"./hooks-1.0.61-Bklk-gZu.js";import"./AdminTheme-1.0.61-D8bUxwpM.js";import"./Typography-1.0.61-Cg0Css-P.js";import"./ActionsDml-1.0.61-DA32DqSB.js";import"./RestApi-1.0.61-DdTZ_pIc.js";import"./notistack-1.0.61-0awN6uG4.js";import"./useAppFunctions-1.0.61-EdKk0_Mu.js";import"./useMetadata-1.0.61-CVl9oDgw.js";import"./useStoreFormSettings-1.0.61-CgHnNhxx.js";import"./useRemoveAppFromStore-1.0.61-E72jey9_.js";import"./Languages-1.0.61-BxgPwugF.js";import"./AppTheme-1.0.61-CGnMRNDC.js";import"./index-1.0.61-CRnugLvI.js";import"./getThemeProps-1.0.61-OfsHdeDz.js";import"./useEnhancedEffect-1.0.61-CX4-xj9Z.js";import"./useChartSettings-1.0.61-BIp9UVZM.js";import"./useLocaleUd-1.0.61-DEEqF_bH.js";import"./useScreenSize-1.0.61-B4FX7-PC.js";import"./cjs-1.0.61-D_0erLfe.js";import"./ButtonBase-1.0.61-BqsrQx8o.js";import"./index-1.0.61-LP991tft.js";import"./lodash-1.0.61-C8OpKhUs.js";import"./dayjs.min-1.0.61-21Xi_c_9.js";import"./index-1.0.61-B7tjLD84.js";import"./ThemeProvider-1.0.61-4HOD8y6D.js";import"./Modal-1.0.61-DVFPMIPt.js";import"./iconBase-1.0.61-C8saXaJ2.js";import"./dompurify-1.0.61-DhD2mIk-.js";import"./useFormDetails-1.0.61-677sicqv.js";import"./DynamicModeEnum-1.0.61-BXuL5kgA.js";import"./StoreTypeEnum-1.0.61-Tot-ESpR.js";import"./FallbackSpinner-1.0.61-s3WTN65t.js";import"./main-1.0.61.js";import"./rehyperaw-1.0.61-AkovKNCK.js";import"./markdown-1.0.61-6nAzZWly.js";import"./loglevel-1.0.61-BZ7XahX3.js";import"./createSvgIcon-1.0.61-DDgmYdEo.js";import"./Stack-1.0.61-CNGwl0k7.js";import"./InputAdornment-1.0.61-23wkGu1k.js";import"./Select-1.0.61-DmroHcG5.js";import"./Menu-1.0.61-D2OtRuzX.js";import"./Radio-1.0.61-BXMcBwcB.js";import"./SwitchBase-1.0.61-C2xa6JFZ.js";import"./Checkbox-1.0.61-BlN5bjuH.js";import"./Chip-1.0.61-C6TjQKDp.js";import"./Collapse-1.0.61-Cww0NnSm.js";import"./AlertTitle-1.0.61-hpo1u3Vv.js";import"./Close-1.0.61-CiuKDfYz.js";import"./TextField-1.0.61-DyvT2G_W.js";import"./MenuItem-1.0.61-Bmr1xWyp.js";import"./TableRow-1.0.61-70IJJfOz.js";import"./DialogContent-1.0.61-Ws3r0VFj.js";import"./ConfirmDialog-1.0.61-BrxkBu_y.js";import"./ListItemIcon-1.0.61-P8epLVMP.js";import"./TableHead-1.0.61-urAqheBu.js";import"./Divider-1.0.61-C8DX248W.js";import"./FormControlLabel-1.0.61-Bu2IQ4da.js";import"./Switch-1.0.61-CRYcdQMV.js";import"./Autocomplete-1.0.61-CP0PiliY.js";import"./Slider-1.0.61-BGScnB2M.js";import"./visuallyHidden-1.0.61-Dan1xhjv.js";import"./TimePicker-1.0.61-CeYQPlC5.js";import"./useMobilePicker-1.0.61-Dvb2yEEp.js";import"./ListItem-1.0.61-t1ycs9HY.js";import"./timeViewRenderers-1.0.61-Cu86BQXJ.js";import"./DateTimePicker-1.0.61-B22uat3C.js";import"./Tabs-1.0.61-Bhozjonn.js";import"./dateViewRenderers-1.0.61-7dkntk_V.js";import"./DatePicker-1.0.61-CDckGagl.js";const z=({tableStore:l,columnValues:e,notMobile:n})=>{const[g,b]=f.useState(l.table.detailColumns??R(l));return f.useEffect(()=>{l.table.detailColumns&&b(l.table.detailColumns)},[l.table.detailColumns]),a.jsx(x,{onClick:t=>{t.stopPropagation()},className:"pp-table-detail-panel",sx:{margin:0,padding:"2rem 1rem",display:"grid",...n&&{gridTemplateColumns:"repeat(auto-fit, minmax(470px, 1fr))",padding:"2rem"},gap:"0.25rem"},children:Object.keys(g).map((t,N)=>{var m,d,c,h,E;if(!g[t].enabled)return null;const C=g[t].layout==="rendered"?((m=e==null?void 0:e[t])==null?void 0:m.cell)??"":((d=e==null?void 0:e[t])==null?void 0:d.originalValue)??"";return a.jsx(k.Fragment,{children:a.jsxs(x,{sx:{display:"grid",gridTemplateColumns:"2fr 3fr",alignItems:"start",gap:"0.5rem"},children:[a.jsx(x,{sx:{textAlign:"right",whiteSpace:"nowrap",textOverflow:"ellepsis",overflow:"hidden"},className:"label",children:((c=e==null?void 0:e[t])==null?void 0:c.label)??""}),a.jsx(x,{sx:{fontWeight:"bold",textOverflow:"ellepsis",overflow:"hidden"},className:"content",children:(h=e==null?void 0:e[t])!=null&&h.inlineEditing?((E=e==null?void 0:e[t])==null?void 0:E.renderedValue)??"":C})]})},t+String(N))})})};f.lazy(()=>W(()=>import("./SharedContainer-1.0.61-D5Lln0NA.js").then(l=>l.D),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44]),import.meta.url));const de=({appId:l,table:e,row:n,columns:g,appSettings:b,metaData:t,tableSettings:N,data:C})=>{var j;L.debug(l,e,n,g,t,N,C);const m=f.useRef(null),d=F(l),c=(r,i)=>{var o;let p=i.getValue();return M(O(t,r.columnName))==="number"&&r.localize&&(p=Number(p).toLocaleString(((o=b==null?void 0:b.language)==null?void 0:o.code)??B.defaultLanguage.code,{minimumFractionDigits:r.decimals,maximumFractionDigits:r.decimals})),r.prefix+p+r.suffix},h=f.useMemo(()=>{const r={};return g.map(i=>{var y,D,T;const p=n.getAllCells().filter(s=>s.id===`${n.id}_${i.columnName}`)[0],u=a.jsx(S,{cell:p,table:e});let o=n.original[i.columnName];if(i.lookup===void 0)try{i.inlineEditing===!0&&((y=d.state.permissions.inlineEditing)==null?void 0:y[i.columnName])!==!1?o=c(i,p):(i.computedField===void 0&&(o=v.renderToString(u)),i.computedField!==void 0&&(o=v.renderToString(u)))}catch(s){console.error("Error rendering column "+i.columnName+"/"+i.lookup),console.error("Cell value",u),console.error(s),o=void 0}else{const s=P.getSelectors().selectLookupValue(A.getState().lookups,l,i.columnName,p.getValue());s!==void 0?Array.isArray(s)?o=s.join(i.lookup.delimiter):o=s:o=p.getValue()}o!==void 0&&(i.computedField===void 0&&(r[i.columnName]={label:i.columnLabel,originalValue:n.original[i.columnName],renderedValue:o,cell:u,inlineEditing:i.inlineEditing&&((D=d.state.permissions.inlineEditing)==null?void 0:D[i.columnName])!==!1}),i.computedField!==void 0&&(r[i.columnName]={label:i.computedField.label,originalValue:n.original[i.columnName],renderedValue:o,cell:u,inlineEditing:i.inlineEditing&&((T=d.state.permissions.inlineEditing)==null?void 0:T[i.columnName])!==!1}))}),r},[n]),[E,_]=f.useState(!1);return f.useEffect(()=>{var r;_(((r=m==null?void 0:m.current)==null?void 0:r.offsetWidth)>500)},[(j=m==null?void 0:m.current)==null?void 0:j.offsetWidth]),a.jsxs(x,{sx:{position:"relative"},children:[a.jsx(x,{ref:m,sx:{border:"none",margin:0,padding:0},children:a.jsx(z,{tableStore:d,columnValues:h,notMobile:E})}),!1]})};export{de as default};
