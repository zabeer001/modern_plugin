const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CodeField-1.0.61-VcCGL0pj.js","./cm-1.0.61-D9ug3d5m.js","./redux-1.0.61-CrJ4jvTM.js","./vendor-1.0.61-CN03Eozo.js","./index-1.0.61-B7tjLD84.js","./Typography-1.0.61-Cg0Css-P.js","./lib-1.0.61-DoXQcMHD.js","./loglevel-1.0.61-BZ7XahX3.js","./lodash-1.0.61-C8OpKhUs.js","./moment-1.0.61-C5S46NFB.js","./ButtonBase-1.0.61-BqsrQx8o.js","./useEnhancedEffect-1.0.61-CX4-xj9Z.js","./ThemeProvider-1.0.61-4HOD8y6D.js","./Modal-1.0.61-DVFPMIPt.js","./notistack-1.0.61-0awN6uG4.js","./iconBase-1.0.61-C8saXaJ2.js","./cmJs-1.0.61-hWh8eEn6.js","./cmJson-1.0.61-BLURwXOE.js","./rehyperaw-1.0.61-AkovKNCK.js","./markdown-1.0.61-6nAzZWly.js","./cmHtml-1.0.61-ZqG0tpB4.js","./cmSql-1.0.61-CL9LoKgr.js","./Spinner-1.0.61-khi9zO7Q.js","./FormControlLabel-1.0.61-Bu2IQ4da.js","./Select-1.0.61-DmroHcG5.js","./Menu-1.0.61-D2OtRuzX.js","./createSvgIcon-1.0.61-DDgmYdEo.js","./Switch-1.0.61-CRYcdQMV.js","./SwitchBase-1.0.61-C2xa6JFZ.js","./DialogContent-1.0.61-Ws3r0VFj.js","./ConfirmDialog-1.0.61-BrxkBu_y.js","./cjs-1.0.61-D_0erLfe.js","./AdminTheme-1.0.61-D8bUxwpM.js"])))=>i.map(i=>d[i]);
import{j as r}from"./cm-1.0.61-D9ug3d5m.js";import{ap as lr,aq as en,M as vn,U as ar,ar as cr,h as dr,q as Le,p as it,z as ur,r as fr,m as Dt,l as pr,y as yn}from"./index-1.0.61-B7tjLD84.js";import{D as ne}from"./DynamicModeEnum-1.0.61-BXuL5kgA.js";import{r as l,R as V}from"./redux-1.0.61-CrJ4jvTM.js";import{l as P,bY as Z,H as tn,ct as nn,cp as hr,cu as gr,cv as xr,cw as br,b3 as Cn,S as qe,b5 as jn,r as wt,a as At,bL as wn,c6 as rn,b4 as mr}from"./lib-1.0.61-DoXQcMHD.js";import{b as vr,u as yr}from"./SharedContainer-1.0.61-D5Lln0NA.js";import{_ as Sn}from"./cmJson-1.0.61-BLURwXOE.js";import{r as Xe,e as at}from"./notistack-1.0.61-0awN6uG4.js";import{a as Cr,u as Rn}from"./hooks-1.0.61-Bklk-gZu.js";import{t as jr,u as wr,q as Sr,r as Rr,v as Er}from"./index-1.0.61-Cpc7oUnN.js";import{u as Pt}from"./useTableUpdater-1.0.61-D-pqUshE.js";import{u as Tr,S as kr}from"./useFormUpdater-1.0.61-D3TDEm-F.js";import{u as Dr,a as Ar}from"./useTableIsUpdated-1.0.61-CCSFtZgQ.js";import{B as R}from"./Spinner-1.0.61-khi9zO7Q.js";import{T as we,F as Ee,b as ce,a as Or}from"./TextField-1.0.61-DyvT2G_W.js";import{R as Ir}from"./RadioGroup-1.0.61-BZHJMWN9.js";import{F as ut}from"./FormControlLabel-1.0.61-Bu2IQ4da.js";import{R as sn}from"./Radio-1.0.61-BXMcBwcB.js";import{I as ct}from"./iconBase-1.0.61-C8saXaJ2.js";import{B as z}from"./cjs-1.0.61-D_0erLfe.js";import{L as Ge}from"./Link-1.0.61-BHBICLVE.js";import{A as Ot}from"./AdminTheme-1.0.61-D8bUxwpM.js";import{f as Lr,g as Fr}from"./index-1.0.61-BRtOqdFl.js";import{a as Nr,b as Mr,c as Pr}from"./ActionsDml-1.0.61-DA32DqSB.js";import{S as Ye}from"./Select-1.0.61-DmroHcG5.js";import{M as ge}from"./MenuItem-1.0.61-Bmr1xWyp.js";import{M as Br}from"./Menu-1.0.61-D2OtRuzX.js";import{D as _r}from"./DefaultWhere-1.0.61-D25JpoiD.js";import{S as zr,a as Wr,b as Ur}from"./Stepper-1.0.61-DGQ0aYov.js";import{C as $r}from"./Checkbox-1.0.61-BlN5bjuH.js";import{C as Xr}from"./ConfirmDialog-1.0.61-BrxkBu_y.js";import{H as En}from"./settings-1.0.61-BN5quc55.js";import{A as Tn,a as kn}from"./AccordionSummary-1.0.61-B21Kp3oq.js";import{A as Dn}from"./AccordionDetails-1.0.61-CrQNuW_u.js";import{S as Yr}from"./Switch-1.0.61-CRYcdQMV.js";function Hr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo(()=>s=>{t.forEach(o=>o(s))},t)}const bt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ne(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Bt(e){return"nodeType"in e}function q(e){var t,n;return e?Ne(e)?e:Bt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function _t(e){const{Document:t}=q(e);return e instanceof t}function et(e){return Ne(e)?!1:e instanceof q(e).HTMLElement}function An(e){return e instanceof q(e).SVGElement}function Me(e){return e?Ne(e)?e.document:Bt(e)?_t(e)?e:et(e)||An(e)?e.ownerDocument:document:document:document}const de=bt?l.useLayoutEffect:l.useEffect;function zt(e){const t=l.useRef(e);return de(()=>{t.current=e}),l.useCallback(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return t.current==null?void 0:t.current(...s)},[])}function Kr(){const e=l.useRef(null),t=l.useCallback((s,o)=>{e.current=setInterval(s,o)},[]),n=l.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Je(e,t){t===void 0&&(t=[e]);const n=l.useRef(e);return de(()=>{n.current!==e&&(n.current=e)},t),n}function tt(e,t){const n=l.useRef();return l.useMemo(()=>{const s=e(n.current);return n.current=s,s},[...t])}function ft(e){const t=zt(e),n=l.useRef(null),s=l.useCallback(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,s]}function It(e){const t=l.useRef();return l.useEffect(()=>{t.current=e},[e]),t.current}let St={};function nt(e,t){return l.useMemo(()=>{if(t)return t;const n=St[e]==null?0:St[e]+1;return St[e]=n,e+"-"+n},[e,t])}function On(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return s.reduce((i,a)=>{const c=Object.entries(a);for(const[d,u]of c){const f=i[d];f!=null&&(i[d]=f+e*u)}return i},{...t})}}const Fe=On(1),pt=On(-1);function Vr(e){return"clientX"in e&&"clientY"in e}function Wt(e){if(!e)return!1;const{KeyboardEvent:t}=q(e.target);return t&&e instanceof t}function qr(e){if(!e)return!1;const{TouchEvent:t}=q(e.target);return t&&e instanceof t}function Lt(e){if(qr(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Vr(e)?{x:e.clientX,y:e.clientY}:null}const Qe=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Qe.Translate.toString(e),Qe.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:s}=e;return t+" "+n+"ms "+s}}}),on="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Gr(e){return e.matches(on)?e:e.querySelector(on)}const Jr={display:"none"};function Qr(e){let{id:t,value:n}=e;return V.createElement("div",{id:t,style:Jr},n)}function Zr(e){let{id:t,announcement:n,ariaLiveType:s="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return V.createElement("div",{id:t,style:o,role:"status","aria-live":s,"aria-atomic":!0},n)}function es(){const[e,t]=l.useState("");return{announce:l.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const In=l.createContext(null);function ts(e){const t=l.useContext(In);l.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function ns(){const[e]=l.useState(()=>new Set),t=l.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[l.useCallback(s=>{let{type:o,event:i}=s;e.forEach(a=>{var c;return(c=a[o])==null?void 0:c.call(a,i)})},[e]),t]}const rs={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ss={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function os(e){let{announcements:t=ss,container:n,hiddenTextDescribedById:s,screenReaderInstructions:o=rs}=e;const{announce:i,announcement:a}=es(),c=nt("DndLiveRegion"),[d,u]=l.useState(!1);if(l.useEffect(()=>{u(!0)},[]),ts(l.useMemo(()=>({onDragStart(p){let{active:b}=p;i(t.onDragStart({active:b}))},onDragMove(p){let{active:b,over:x}=p;t.onDragMove&&i(t.onDragMove({active:b,over:x}))},onDragOver(p){let{active:b,over:x}=p;i(t.onDragOver({active:b,over:x}))},onDragEnd(p){let{active:b,over:x}=p;i(t.onDragEnd({active:b,over:x}))},onDragCancel(p){let{active:b,over:x}=p;i(t.onDragCancel({active:b,over:x}))}}),[i,t])),!d)return null;const f=V.createElement(V.Fragment,null,V.createElement(Qr,{id:s,value:o.draggable}),V.createElement(Zr,{id:c,announcement:a}));return n?Xe.createPortal(f,n):f}var W;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(W||(W={}));function ht(){}function Rt(e,t){return l.useMemo(()=>({sensor:e,options:{}}),[e,t])}function is(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const oe=Object.freeze({x:0,y:0});function ls(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function as(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return n-s}function cs(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return s-n}function ds(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function ln(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const us=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const o=ln(t,t.left,t.top),i=[];for(const a of s){const{id:c}=a,d=n.get(c);if(d){const u=ls(ln(d),o);i.push({id:c,data:{droppableContainer:a,value:u}})}}return i.sort(as)};function fs(e,t){const n=Math.max(t.top,e.top),s=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),a=o-s,c=i-n;if(s<o&&n<i){const d=t.width*t.height,u=e.width*e.height,f=a*c,p=f/(d+u-f);return Number(p.toFixed(4))}return 0}const ps=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const o=[];for(const i of s){const{id:a}=i,c=n.get(a);if(c){const d=fs(c,t);d>0&&o.push({id:a,data:{droppableContainer:i,value:d}})}}return o.sort(cs)};function hs(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Ln(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:oe}function gs(e){return function(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),i=1;i<s;i++)o[i-1]=arguments[i];return o.reduce((a,c)=>({...a,top:a.top+e*c.y,bottom:a.bottom+e*c.y,left:a.left+e*c.x,right:a.right+e*c.x}),{...n})}}const xs=gs(1);function bs(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function ms(e,t,n){const s=bs(t);if(!s)return e;const{scaleX:o,scaleY:i,x:a,y:c}=s,d=e.left-a-(1-o)*parseFloat(n),u=e.top-c-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),f=o?e.width/o:e.width,p=i?e.height/i:e.height;return{width:f,height:p,top:u,right:d+f,bottom:u+p,left:d}}const vs={ignoreTransform:!1};function Pe(e,t){t===void 0&&(t=vs);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:f}=q(e).getComputedStyle(e);u&&(n=ms(n,u,f))}const{top:s,left:o,width:i,height:a,bottom:c,right:d}=n;return{top:s,left:o,width:i,height:a,bottom:c,right:d}}function an(e){return Pe(e,{ignoreTransform:!0})}function ys(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Cs(e,t){return t===void 0&&(t=q(e).getComputedStyle(e)),t.position==="fixed"}function js(e,t){t===void 0&&(t=q(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const i=t[o];return typeof i=="string"?n.test(i):!1})}function Ut(e,t){const n=[];function s(o){if(t!=null&&n.length>=t||!o)return n;if(_t(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!et(o)||An(o)||n.includes(o))return n;const i=q(e).getComputedStyle(o);return o!==e&&js(o,i)&&n.push(o),Cs(o,i)?n:s(o.parentNode)}return e?s(e):n}function Fn(e){const[t]=Ut(e,1);return t??null}function Et(e){return!bt||!e?null:Ne(e)?e:Bt(e)?_t(e)||e===Me(e).scrollingElement?window:et(e)?e:null:null}function Nn(e){return Ne(e)?e.scrollX:e.scrollLeft}function Mn(e){return Ne(e)?e.scrollY:e.scrollTop}function Ft(e){return{x:Nn(e),y:Mn(e)}}var $;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})($||($={}));function Pn(e){return!bt||!e?!1:e===document.scrollingElement}function Bn(e){const t={x:0,y:0},n=Pn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,a=e.scrollTop>=s.y,c=e.scrollLeft>=s.x;return{isTop:o,isLeft:i,isBottom:a,isRight:c,maxScroll:s,minScroll:t}}const ws={x:.2,y:.2};function Ss(e,t,n,s,o){let{top:i,left:a,right:c,bottom:d}=n;s===void 0&&(s=10),o===void 0&&(o=ws);const{isTop:u,isBottom:f,isLeft:p,isRight:b}=Bn(e),x={x:0,y:0},h={x:0,y:0},v={height:t.height*o.y,width:t.width*o.x};return!u&&i<=t.top+v.height?(x.y=$.Backward,h.y=s*Math.abs((t.top+v.height-i)/v.height)):!f&&d>=t.bottom-v.height&&(x.y=$.Forward,h.y=s*Math.abs((t.bottom-v.height-d)/v.height)),!b&&c>=t.right-v.width?(x.x=$.Forward,h.x=s*Math.abs((t.right-v.width-c)/v.width)):!p&&a<=t.left+v.width&&(x.x=$.Backward,h.x=s*Math.abs((t.left+v.width-a)/v.width)),{direction:x,speed:h}}function Rs(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}const{top:t,left:n,right:s,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:s,bottom:o,width:e.clientWidth,height:e.clientHeight}}function _n(e){return e.reduce((t,n)=>Fe(t,Ft(n)),oe)}function Es(e){return e.reduce((t,n)=>t+Nn(n),0)}function Ts(e){return e.reduce((t,n)=>t+Mn(n),0)}function ks(e,t){if(t===void 0&&(t=Pe),!e)return;const{top:n,left:s,bottom:o,right:i}=t(e);Fn(e)&&(o<=0||i<=0||n>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Ds=[["x",["left","right"],Es],["y",["top","bottom"],Ts]];class $t{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Ut(n),o=_n(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,a,c]of Ds)for(const d of a)Object.defineProperty(this,d,{get:()=>{const u=c(s),f=o[i]-u;return this.rect[d]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class He{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=t}add(t,n,s){var o;(o=this.target)==null||o.addEventListener(t,n,s),this.listeners.push([t,n,s])}}function As(e){const{EventTarget:t}=q(e);return e instanceof t?e:Me(e)}function Tt(e,t){const n=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+s**2)>t:"x"in t&&"y"in t?n>t.x&&s>t.y:"x"in t?n>t.x:"y"in t?s>t.y:!1}var re;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(re||(re={}));function cn(e){e.preventDefault()}function Os(e){e.stopPropagation()}var F;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(F||(F={}));const zn={start:[F.Space,F.Enter],cancel:[F.Esc],end:[F.Space,F.Enter,F.Tab]},Is=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case F.Right:return{...n,x:n.x+25};case F.Left:return{...n,x:n.x-25};case F.Down:return{...n,y:n.y+25};case F.Up:return{...n,y:n.y-25}}};class Wn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new He(Me(n)),this.windowListeners=new He(q(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(re.Resize,this.handleCancel),this.windowListeners.add(re.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(re.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,s=t.node.current;s&&ks(s),n(oe)}handleKeyDown(t){if(Wt(t)){const{active:n,context:s,options:o}=this.props,{keyboardCodes:i=zn,coordinateGetter:a=Is,scrollBehavior:c="smooth"}=o,{code:d}=t;if(i.end.includes(d)){this.handleEnd(t);return}if(i.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:u}=s.current,f=u?{x:u.left,y:u.top}:oe;this.referenceCoordinates||(this.referenceCoordinates=f);const p=a(t,{active:n,context:s.current,currentCoordinates:f});if(p){const b=pt(p,f),x={x:0,y:0},{scrollableAncestors:h}=s.current;for(const v of h){const g=t.code,{isTop:j,isRight:w,isLeft:S,isBottom:D,maxScroll:y,minScroll:E}=Bn(v),T=Rs(v),C={x:Math.min(g===F.Right?T.right-T.width/2:T.right,Math.max(g===F.Right?T.left:T.left+T.width/2,p.x)),y:Math.min(g===F.Down?T.bottom-T.height/2:T.bottom,Math.max(g===F.Down?T.top:T.top+T.height/2,p.y))},N=g===F.Right&&!w||g===F.Left&&!S,A=g===F.Down&&!D||g===F.Up&&!j;if(N&&C.x!==p.x){const I=v.scrollLeft+b.x,m=g===F.Right&&I<=y.x||g===F.Left&&I>=E.x;if(m&&!b.y){v.scrollTo({left:I,behavior:c});return}m?x.x=v.scrollLeft-I:x.x=g===F.Right?v.scrollLeft-y.x:v.scrollLeft-E.x,x.x&&v.scrollBy({left:-x.x,behavior:c});break}else if(A&&C.y!==p.y){const I=v.scrollTop+b.y,m=g===F.Down&&I<=y.y||g===F.Up&&I>=E.y;if(m&&!b.x){v.scrollTo({top:I,behavior:c});return}m?x.y=v.scrollTop-I:x.y=g===F.Down?v.scrollTop-y.y:v.scrollTop-E.y,x.y&&v.scrollBy({top:-x.y,behavior:c});break}}this.handleMove(t,Fe(pt(p,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:s}=this.props;t.preventDefault(),s(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Wn.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:s=zn,onActivation:o}=t,{active:i}=n;const{code:a}=e.nativeEvent;if(s.start.includes(a)){const c=i.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function dn(e){return!!(e&&"distance"in e)}function un(e){return!!(e&&"delay"in e)}class Xt{constructor(t,n,s){var o;s===void 0&&(s=As(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:a}=i;this.props=t,this.events=n,this.document=Me(a),this.documentListeners=new He(this.document),this.listeners=new He(s),this.windowListeners=new He(q(a)),this.initialCoordinates=(o=Lt(i))!=null?o:oe,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(re.Resize,this.handleCancel),this.windowListeners.add(re.DragStart,cn),this.windowListeners.add(re.VisibilityChange,this.handleCancel),this.windowListeners.add(re.ContextMenu,cn),this.documentListeners.add(re.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(un(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(dn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:s,onPending:o}=this.props;o(s,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(re.Click,Os,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(re.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:s,initialCoordinates:o,props:i}=this,{onMove:a,options:{activationConstraint:c}}=i;if(!o)return;const d=(n=Lt(t))!=null?n:oe,u=pt(o,d);if(!s&&c){if(dn(c)){if(c.tolerance!=null&&Tt(u,c.tolerance))return this.handleCancel();if(Tt(u,c.distance))return this.handleStart()}if(un(c)&&Tt(u,c.tolerance))return this.handleCancel();this.handlePending(c,u);return}t.cancelable&&t.preventDefault(),a(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===F.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Ls={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Yt extends Xt{constructor(t){const{event:n}=t,s=Me(n.target);super(t,Ls,s)}}Yt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return!n.isPrimary||n.button!==0?!1:(s==null||s({event:n}),!0)}}];const Fs={move:{name:"mousemove"},end:{name:"mouseup"}};var Nt;(function(e){e[e.RightClick=2]="RightClick"})(Nt||(Nt={}));class Un extends Xt{constructor(t){super(t,Fs,Me(t.event.target))}}Un.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return n.button===Nt.RightClick?!1:(s==null||s({event:n}),!0)}}];const kt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class $n extends Xt{constructor(t){super(t,kt)}static setup(){return window.addEventListener(kt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(kt.move.name,t)};function t(){}}}$n.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;const{touches:o}=n;return o.length>1?!1:(s==null||s({event:n}),!0)}}];var Ke;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ke||(Ke={}));var gt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(gt||(gt={}));function Ns(e){let{acceleration:t,activator:n=Ke.Pointer,canScroll:s,draggingRect:o,enabled:i,interval:a=5,order:c=gt.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:f,delta:p,threshold:b}=e;const x=Ps({delta:p,disabled:!i}),[h,v]=Kr(),g=l.useRef({x:0,y:0}),j=l.useRef({x:0,y:0}),w=l.useMemo(()=>{switch(n){case Ke.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Ke.DraggableRect:return o}},[n,o,d]),S=l.useRef(null),D=l.useCallback(()=>{const E=S.current;if(!E)return;const T=g.current.x*j.current.x,C=g.current.y*j.current.y;E.scrollBy(T,C)},[]),y=l.useMemo(()=>c===gt.TreeOrder?[...u].reverse():u,[c,u]);l.useEffect(()=>{if(!i||!u.length||!w){v();return}for(const E of y){if((s==null?void 0:s(E))===!1)continue;const T=u.indexOf(E),C=f[T];if(!C)continue;const{direction:N,speed:A}=Ss(E,C,w,t,b);for(const I of["x","y"])x[I][N[I]]||(A[I]=0,N[I]=0);if(A.x>0||A.y>0){v(),S.current=E,h(D,a),g.current=A,j.current=N;return}}g.current={x:0,y:0},j.current={x:0,y:0},v()},[t,D,s,v,i,a,JSON.stringify(w),JSON.stringify(x),h,u,y,f,JSON.stringify(b)])}const Ms={x:{[$.Backward]:!1,[$.Forward]:!1},y:{[$.Backward]:!1,[$.Forward]:!1}};function Ps(e){let{delta:t,disabled:n}=e;const s=It(t);return tt(o=>{if(n||!s||!o)return Ms;const i={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[$.Backward]:o.x[$.Backward]||i.x===-1,[$.Forward]:o.x[$.Forward]||i.x===1},y:{[$.Backward]:o.y[$.Backward]||i.y===-1,[$.Forward]:o.y[$.Forward]||i.y===1}}},[n,t,s])}function Bs(e,t){const n=t!=null?e.get(t):void 0,s=n?n.node.current:null;return tt(o=>{var i;return t==null?null:(i=s??o)!=null?i:null},[s,t])}function _s(e,t){return l.useMemo(()=>e.reduce((n,s)=>{const{sensor:o}=s,i=o.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,s)}));return[...n,...i]},[]),[e,t])}var Ze;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ze||(Ze={}));var Mt;(function(e){e.Optimized="optimized"})(Mt||(Mt={}));const fn=new Map;function zs(e,t){let{dragging:n,dependencies:s,config:o}=t;const[i,a]=l.useState(null),{frequency:c,measure:d,strategy:u}=o,f=l.useRef(e),p=g(),b=Je(p),x=l.useCallback(function(j){j===void 0&&(j=[]),!b.current&&a(w=>w===null?j:w.concat(j.filter(S=>!w.includes(S))))},[b]),h=l.useRef(null),v=tt(j=>{if(p&&!n)return fn;if(!j||j===fn||f.current!==e||i!=null){const w=new Map;for(let S of e){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){w.set(S.id,S.rect.current);continue}const D=S.node.current,y=D?new $t(d(D),D):null;S.rect.current=y,y&&w.set(S.id,y)}return w}return j},[e,i,n,p,d]);return l.useEffect(()=>{f.current=e},[e]),l.useEffect(()=>{p||x()},[n,p]),l.useEffect(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),l.useEffect(()=>{p||typeof c!="number"||h.current!==null||(h.current=setTimeout(()=>{x(),h.current=null},c))},[c,p,x,...s]),{droppableRects:v,measureDroppableContainers:x,measuringScheduled:i!=null};function g(){switch(u){case Ze.Always:return!1;case Ze.BeforeDragging:return n;default:return!n}}}function Xn(e,t){return tt(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Ws(e,t){return Xn(e,t)}function Us(e){let{callback:t,disabled:n}=e;const s=zt(t),o=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,n]);return l.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function mt(e){let{callback:t,disabled:n}=e;const s=zt(t),o=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[n]);return l.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function $s(e){return new $t(Pe(e),e)}function pn(e,t,n){t===void 0&&(t=$s);const[s,o]=l.useState(null);function i(){o(d=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=d??n)!=null?u:null}const f=t(e);return JSON.stringify(d)===JSON.stringify(f)?d:f})}const a=Us({callback(d){if(e)for(const u of d){const{type:f,target:p}=u;if(f==="childList"&&p instanceof HTMLElement&&p.contains(e)){i();break}}}}),c=mt({callback:i});return de(()=>{i(),e?(c==null||c.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),a==null||a.disconnect())},[e]),s}function Xs(e){const t=Xn(e);return Ln(e,t)}const hn=[];function Ys(e){const t=l.useRef(e),n=tt(s=>e?s&&s!==hn&&e&&t.current&&e.parentNode===t.current.parentNode?s:Ut(e):hn,[e]);return l.useEffect(()=>{t.current=e},[e]),n}function Hs(e){const[t,n]=l.useState(null),s=l.useRef(e),o=l.useCallback(i=>{const a=Et(i.target);a&&n(c=>c?(c.set(a,Ft(a)),new Map(c)):null)},[]);return l.useEffect(()=>{const i=s.current;if(e!==i){a(i);const c=e.map(d=>{const u=Et(d);return u?(u.addEventListener("scroll",o,{passive:!0}),[u,Ft(u)]):null}).filter(d=>d!=null);n(c.length?new Map(c):null),s.current=e}return()=>{a(e),a(i)};function a(c){c.forEach(d=>{const u=Et(d);u==null||u.removeEventListener("scroll",o)})}},[o,e]),l.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,a)=>Fe(i,a),oe):_n(e):oe,[e,t])}function gn(e,t){t===void 0&&(t=[]);const n=l.useRef(null);return l.useEffect(()=>{n.current=null},t),l.useEffect(()=>{const s=e!==oe;s&&!n.current&&(n.current=e),!s&&n.current&&(n.current=null)},[e]),n.current?pt(e,n.current):oe}function Ks(e){l.useEffect(()=>{if(!bt)return;const t=e.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Vs(e,t){return l.useMemo(()=>e.reduce((n,s)=>{let{eventName:o,handler:i}=s;return n[o]=a=>{i(a,t)},n},{}),[e,t])}function Yn(e){return l.useMemo(()=>e?ys(e):null,[e])}const xn=[];function qs(e,t){t===void 0&&(t=Pe);const[n]=e,s=Yn(n?q(n):null),[o,i]=l.useState(xn);function a(){i(()=>e.length?e.map(d=>Pn(d)?s:new $t(t(d),d)):xn)}const c=mt({callback:a});return de(()=>{c==null||c.disconnect(),a(),e.forEach(d=>c==null?void 0:c.observe(d))},[e]),o}function Gs(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return et(t)?t:e}function Js(e){let{measure:t}=e;const[n,s]=l.useState(null),o=l.useCallback(u=>{for(const{target:f}of u)if(et(f)){s(p=>{const b=t(f);return p?{...p,width:b.width,height:b.height}:b});break}},[t]),i=mt({callback:o}),a=l.useCallback(u=>{const f=Gs(u);i==null||i.disconnect(),f&&(i==null||i.observe(f)),s(f?t(f):null)},[t,i]),[c,d]=ft(a);return l.useMemo(()=>({nodeRef:c,rect:n,setRef:d}),[n,c,d])}const Qs=[{sensor:Yt,options:{}},{sensor:Wn,options:{}}],Zs={current:{}},dt={draggable:{measure:an},droppable:{measure:an,strategy:Ze.WhileDragging,frequency:Mt.Optimized},dragOverlay:{measure:Pe}};class Ve extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,s;return(n=(s=this.get(t))==null?void 0:s.node.current)!=null?n:void 0}}const eo={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ve,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ht},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:dt,measureDroppableContainers:ht,windowRect:null,measuringScheduled:!1},to={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ht,draggableNodes:new Map,over:null,measureDroppableContainers:ht},vt=l.createContext(to),Hn=l.createContext(eo);function no(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ve}}}function ro(e,t){switch(t.type){case W.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case W.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case W.DragEnd:case W.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case W.RegisterDroppable:{const{element:n}=t,{id:s}=n,o=new Ve(e.droppable.containers);return o.set(s,n),{...e,droppable:{...e.droppable,containers:o}}}case W.SetDroppableDisabled:{const{id:n,key:s,disabled:o}=t,i=e.droppable.containers.get(n);if(!i||s!==i.key)return e;const a=new Ve(e.droppable.containers);return a.set(n,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:a}}}case W.UnregisterDroppable:{const{id:n,key:s}=t,o=e.droppable.containers.get(n);if(!o||s!==o.key)return e;const i=new Ve(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function so(e){let{disabled:t}=e;const{active:n,activatorEvent:s,draggableNodes:o}=l.useContext(vt),i=It(s),a=It(n==null?void 0:n.id);return l.useEffect(()=>{if(!t&&!s&&i&&a!=null){if(!Wt(i)||document.activeElement===i.target)return;const c=o.get(a);if(!c)return;const{activatorNode:d,node:u}=c;if(!d.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[d.current,u.current]){if(!f)continue;const p=Gr(f);if(p){p.focus();break}}})}},[s,t,o,a,i]),null}function oo(e,t){let{transform:n,...s}=t;return e!=null&&e.length?e.reduce((o,i)=>i({transform:o,...s}),n):n}function io(e){return l.useMemo(()=>({draggable:{...dt.draggable,...e==null?void 0:e.draggable},droppable:{...dt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...dt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function lo(e){let{activeNode:t,measure:n,initialRect:s,config:o=!0}=e;const i=l.useRef(!1),{x:a,y:c}=typeof o=="boolean"?{x:o,y:o}:o;de(()=>{if(!a&&!c||!t){i.current=!1;return}if(i.current||!s)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const f=n(u),p=Ln(f,s);if(a||(p.x=0),c||(p.y=0),i.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const b=Fn(u);b&&b.scrollBy({top:p.y,left:p.x})}},[t,a,c,s,n])}const Kn=l.createContext({...oe,scaleX:1,scaleY:1});var Se;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Se||(Se={}));const ao=l.memo(function(t){var n,s,o,i;let{id:a,accessibility:c,autoScroll:d=!0,children:u,sensors:f=Qs,collisionDetection:p=ps,measuring:b,modifiers:x,...h}=t;const v=l.useReducer(ro,void 0,no),[g,j]=v,[w,S]=ns(),[D,y]=l.useState(Se.Uninitialized),E=D===Se.Initialized,{draggable:{active:T,nodes:C,translate:N},droppable:{containers:A}}=g,I=T!=null?C.get(T):null,m=l.useRef({initial:null,translated:null}),k=l.useMemo(()=>{var Y;return T!=null?{id:T,data:(Y=I==null?void 0:I.data)!=null?Y:Zs,rect:m}:null},[T,I]),L=l.useRef(null),[M,H]=l.useState(null),[O,_]=l.useState(null),U=Je(h,Object.values(h)),xe=nt("DndDescribedBy",a),se=l.useMemo(()=>A.getEnabled(),[A]),K=io(b),{droppableRects:ue,measureDroppableContainers:Re,measuringScheduled:Be}=zs(se,{dragging:E,dependencies:[N.x,N.y],config:K.droppable}),ee=Bs(C,T),rt=l.useMemo(()=>O?Lt(O):null,[O]),be=ir(),fe=Ws(ee,K.draggable.measure);lo({activeNode:T!=null?C.get(T):null,config:be.layoutShiftCompensation,initialRect:fe,measure:K.draggable.measure});const B=pn(ee,K.draggable.measure,fe),_e=pn(ee?ee.parentElement:null),ie=l.useRef({activatorEvent:null,active:null,activeNode:ee,collisionRect:null,collisions:null,droppableRects:ue,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Te=A.getNodeFor((n=ie.current.over)==null?void 0:n.id),pe=Js({measure:K.dragOverlay.measure}),ke=(s=pe.nodeRef.current)!=null?s:ee,De=E?(o=pe.rect)!=null?o:B:null,Ht=!!(pe.nodeRef.current&&pe.rect),Kt=Xs(Ht?null:B),yt=Yn(ke?q(ke):null),me=Ys(E?Te??ee:null),st=qs(me),ot=oo(x,{transform:{x:N.x-Kt.x,y:N.y-Kt.y,scaleX:1,scaleY:1},activatorEvent:O,active:k,activeNodeRect:B,containerNodeRect:_e,draggingNodeRect:De,over:ie.current.over,overlayNodeRect:pe.rect,scrollableAncestors:me,scrollableAncestorRects:st,windowRect:yt}),Vt=rt?Fe(rt,N):null,qt=Hs(me),Zn=gn(qt),er=gn(qt,[B]),Ae=Fe(ot,Zn),Oe=De?xs(De,ot):null,ze=k&&Oe?p({active:k,collisionRect:Oe,droppableRects:ue,droppableContainers:se,pointerCoordinates:Vt}):null,Gt=ds(ze,"id"),[ve,Jt]=l.useState(null),tr=Ht?ot:Fe(ot,er),nr=hs(tr,(i=ve==null?void 0:ve.rect)!=null?i:null,B),Ct=l.useRef(null),Qt=l.useCallback((Y,G)=>{let{sensor:J,options:ye}=G;if(L.current==null)return;const te=C.get(L.current);if(!te)return;const Q=Y.nativeEvent,le=new J({active:L.current,activeNode:te,event:Q,options:ye,context:ie,onAbort(X){if(!C.get(X))return;const{onDragAbort:ae}=U.current,he={id:X};ae==null||ae(he),w({type:"onDragAbort",event:he})},onPending(X,Ce,ae,he){if(!C.get(X))return;const{onDragPending:Ue}=U.current,je={id:X,constraint:Ce,initialCoordinates:ae,offset:he};Ue==null||Ue(je),w({type:"onDragPending",event:je})},onStart(X){const Ce=L.current;if(Ce==null)return;const ae=C.get(Ce);if(!ae)return;const{onDragStart:he}=U.current,We={activatorEvent:Q,active:{id:Ce,data:ae.data,rect:m}};Xe.unstable_batchedUpdates(()=>{he==null||he(We),y(Se.Initializing),j({type:W.DragStart,initialCoordinates:X,active:Ce}),w({type:"onDragStart",event:We}),H(Ct.current),_(Q)})},onMove(X){j({type:W.DragMove,coordinates:X})},onEnd:Ie(W.DragEnd),onCancel:Ie(W.DragCancel)});Ct.current=le;function Ie(X){return async function(){const{active:ae,collisions:he,over:We,scrollAdjustedTranslate:Ue}=ie.current;let je=null;if(ae&&Ue){const{cancelDrop:$e}=U.current;je={activatorEvent:Q,active:ae,collisions:he,delta:Ue,over:We},X===W.DragEnd&&typeof $e=="function"&&await Promise.resolve($e(je))&&(X=W.DragCancel)}L.current=null,Xe.unstable_batchedUpdates(()=>{j({type:X}),y(Se.Uninitialized),Jt(null),H(null),_(null),Ct.current=null;const $e=X===W.DragEnd?"onDragEnd":"onDragCancel";if(je){const jt=U.current[$e];jt==null||jt(je),w({type:$e,event:je})}})}}},[C]),rr=l.useCallback((Y,G)=>(J,ye)=>{const te=J.nativeEvent,Q=C.get(ye);if(L.current!==null||!Q||te.dndKit||te.defaultPrevented)return;const le={active:Q};Y(J,G.options,le)===!0&&(te.dndKit={capturedBy:G.sensor},L.current=ye,Qt(J,G))},[C,Qt]),Zt=_s(f,rr);Ks(f),de(()=>{B&&D===Se.Initializing&&y(Se.Initialized)},[B,D]),l.useEffect(()=>{const{onDragMove:Y}=U.current,{active:G,activatorEvent:J,collisions:ye,over:te}=ie.current;if(!G||!J)return;const Q={active:G,activatorEvent:J,collisions:ye,delta:{x:Ae.x,y:Ae.y},over:te};Xe.unstable_batchedUpdates(()=>{Y==null||Y(Q),w({type:"onDragMove",event:Q})})},[Ae.x,Ae.y]),l.useEffect(()=>{const{active:Y,activatorEvent:G,collisions:J,droppableContainers:ye,scrollAdjustedTranslate:te}=ie.current;if(!Y||L.current==null||!G||!te)return;const{onDragOver:Q}=U.current,le=ye.get(Gt),Ie=le&&le.rect.current?{id:le.id,rect:le.rect.current,data:le.data,disabled:le.disabled}:null,X={active:Y,activatorEvent:G,collisions:J,delta:{x:te.x,y:te.y},over:Ie};Xe.unstable_batchedUpdates(()=>{Jt(Ie),Q==null||Q(X),w({type:"onDragOver",event:X})})},[Gt]),de(()=>{ie.current={activatorEvent:O,active:k,activeNode:ee,collisionRect:Oe,collisions:ze,droppableRects:ue,draggableNodes:C,draggingNode:ke,draggingNodeRect:De,droppableContainers:A,over:ve,scrollableAncestors:me,scrollAdjustedTranslate:Ae},m.current={initial:De,translated:Oe}},[k,ee,ze,Oe,C,ke,De,ue,A,ve,me,Ae]),Ns({...be,delta:N,draggingRect:Oe,pointerCoordinates:Vt,scrollableAncestors:me,scrollableAncestorRects:st});const sr=l.useMemo(()=>({active:k,activeNode:ee,activeNodeRect:B,activatorEvent:O,collisions:ze,containerNodeRect:_e,dragOverlay:pe,draggableNodes:C,droppableContainers:A,droppableRects:ue,over:ve,measureDroppableContainers:Re,scrollableAncestors:me,scrollableAncestorRects:st,measuringConfiguration:K,measuringScheduled:Be,windowRect:yt}),[k,ee,B,O,ze,_e,pe,C,A,ue,ve,Re,me,st,K,Be,yt]),or=l.useMemo(()=>({activatorEvent:O,activators:Zt,active:k,activeNodeRect:B,ariaDescribedById:{draggable:xe},dispatch:j,draggableNodes:C,over:ve,measureDroppableContainers:Re}),[O,Zt,k,B,j,xe,C,ve,Re]);return V.createElement(In.Provider,{value:S},V.createElement(vt.Provider,{value:or},V.createElement(Hn.Provider,{value:sr},V.createElement(Kn.Provider,{value:nr},u)),V.createElement(so,{disabled:(c==null?void 0:c.restoreFocus)===!1})),V.createElement(os,{...c,hiddenTextDescribedById:xe}));function ir(){const Y=(M==null?void 0:M.autoScrollEnabled)===!1,G=typeof d=="object"?d.enabled===!1:d===!1,J=E&&!Y&&!G;return typeof d=="object"?{...d,enabled:J}:{enabled:J}}}),co=l.createContext(null),bn="button",uo="Draggable";function Vn(e){let{id:t,data:n,disabled:s=!1,attributes:o}=e;const i=nt(uo),{activators:a,activatorEvent:c,active:d,activeNodeRect:u,ariaDescribedById:f,draggableNodes:p,over:b}=l.useContext(vt),{role:x=bn,roleDescription:h="draggable",tabIndex:v=0}=o??{},g=(d==null?void 0:d.id)===t,j=l.useContext(g?Kn:co),[w,S]=ft(),[D,y]=ft(),E=Vs(a,t),T=Je(n);de(()=>(p.set(t,{id:t,key:i,node:w,activatorNode:D,data:T}),()=>{const N=p.get(t);N&&N.key===i&&p.delete(t)}),[p,t]);const C=l.useMemo(()=>({role:x,tabIndex:v,"aria-disabled":s,"aria-pressed":g&&x===bn?!0:void 0,"aria-roledescription":h,"aria-describedby":f.draggable}),[s,x,v,g,h,f.draggable]);return{active:d,activatorEvent:c,activeNodeRect:u,attributes:C,isDragging:g,listeners:s?void 0:E,node:w,over:b,setNodeRef:S,setActivatorNodeRef:y,transform:j}}function fo(){return l.useContext(Hn)}const po="Droppable",ho={timeout:25};function go(e){let{data:t,disabled:n=!1,id:s,resizeObserverConfig:o}=e;const i=nt(po),{active:a,dispatch:c,over:d,measureDroppableContainers:u}=l.useContext(vt),f=l.useRef({disabled:n}),p=l.useRef(!1),b=l.useRef(null),x=l.useRef(null),{disabled:h,updateMeasurementsFor:v,timeout:g}={...ho,...o},j=Je(v??s),w=l.useCallback(()=>{if(!p.current){p.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{u(Array.isArray(j.current)?j.current:[j.current]),x.current=null},g)},[g]),S=mt({callback:w,disabled:h||!a}),D=l.useCallback((C,N)=>{S&&(N&&(S.unobserve(N),p.current=!1),C&&S.observe(C))},[S]),[y,E]=ft(D),T=Je(t);return l.useEffect(()=>{!S||!y.current||(S.disconnect(),p.current=!1,S.observe(y.current))},[y,S]),l.useEffect(()=>(c({type:W.RegisterDroppable,element:{id:s,key:i,disabled:n,node:y,rect:b,data:T}}),()=>c({type:W.UnregisterDroppable,key:i,id:s})),[s]),l.useEffect(()=>{n!==f.current.disabled&&(c({type:W.SetDroppableDisabled,id:s,key:i,disabled:n}),f.current.disabled=n)},[s,i,n,c]),{active:a,rect:b,isOver:(d==null?void 0:d.id)===s,node:y,over:d,setNodeRef:E}}function xt(e,t,n){const s=e.slice();return s.splice(n<0?s.length+n:n,0,s.splice(t,1)[0]),s}function xo(e,t){return e.reduce((n,s,o)=>{const i=t.get(s);return i&&(n[o]=i),n},Array(e.length))}function lt(e){return e!==null&&e>=0}function bo(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function mo(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const qn=e=>{let{rects:t,activeIndex:n,overIndex:s,index:o}=e;const i=xt(t,s,n),a=t[o],c=i[o];return!c||!a?null:{x:c.left-a.left,y:c.top-a.top,scaleX:c.width/a.width,scaleY:c.height/a.height}},Gn="Sortable",Jn=V.createContext({activeIndex:-1,containerId:Gn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:qn,disabled:{draggable:!1,droppable:!1}});function vo(e){let{children:t,id:n,items:s,strategy:o=qn,disabled:i=!1}=e;const{active:a,dragOverlay:c,droppableRects:d,over:u,measureDroppableContainers:f}=fo(),p=nt(Gn,n),b=c.rect!==null,x=l.useMemo(()=>s.map(E=>typeof E=="object"&&"id"in E?E.id:E),[s]),h=a!=null,v=a?x.indexOf(a.id):-1,g=u?x.indexOf(u.id):-1,j=l.useRef(x),w=!bo(x,j.current),S=g!==-1&&v===-1||w,D=mo(i);de(()=>{w&&h&&f(x)},[w,x,h,f]),l.useEffect(()=>{j.current=x},[x]);const y=l.useMemo(()=>({activeIndex:v,containerId:p,disabled:D,disableTransforms:S,items:x,overIndex:g,useDragOverlay:b,sortedRects:xo(x,d),strategy:o}),[v,p,D.draggable,D.droppable,S,x,g,d,b,o]);return V.createElement(Jn.Provider,{value:y},t)}const yo=e=>{let{id:t,items:n,activeIndex:s,overIndex:o}=e;return xt(n,s,o).indexOf(t)},Co=e=>{let{containerId:t,isSorting:n,wasDragging:s,index:o,items:i,newIndex:a,previousItems:c,previousContainerId:d,transition:u}=e;return!u||!s||c!==i&&o===a?!1:n?!0:a!==o&&t===d},jo={duration:200,easing:"ease"},Qn="transform",wo=Qe.Transition.toString({property:Qn,duration:0,easing:"linear"}),So={roleDescription:"sortable"};function Ro(e){let{disabled:t,index:n,node:s,rect:o}=e;const[i,a]=l.useState(null),c=l.useRef(n);return de(()=>{if(!t&&n!==c.current&&s.current){const d=o.current;if(d){const u=Pe(s.current,{ignoreTransform:!0}),f={x:d.left-u.left,y:d.top-u.top,scaleX:d.width/u.width,scaleY:d.height/u.height};(f.x||f.y)&&a(f)}}n!==c.current&&(c.current=n)},[t,n,s,o]),l.useEffect(()=>{i&&a(null)},[i]),i}function Eo(e){let{animateLayoutChanges:t=Co,attributes:n,disabled:s,data:o,getNewIndex:i=yo,id:a,strategy:c,resizeObserverConfig:d,transition:u=jo}=e;const{items:f,containerId:p,activeIndex:b,disabled:x,disableTransforms:h,sortedRects:v,overIndex:g,useDragOverlay:j,strategy:w}=l.useContext(Jn),S=To(s,x),D=f.indexOf(a),y=l.useMemo(()=>({sortable:{containerId:p,index:D,items:f},...o}),[p,o,D,f]),E=l.useMemo(()=>f.slice(f.indexOf(a)),[f,a]),{rect:T,node:C,isOver:N,setNodeRef:A}=go({id:a,data:y,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...d}}),{active:I,activatorEvent:m,activeNodeRect:k,attributes:L,setNodeRef:M,listeners:H,isDragging:O,over:_,setActivatorNodeRef:U,transform:xe}=Vn({id:a,data:y,attributes:{...So,...n},disabled:S.draggable}),se=Hr(A,M),K=!!I,ue=K&&!h&&lt(b)&&lt(g),Re=!j&&O,Be=Re&&ue?xe:null,rt=ue?Be??(c??w)({rects:v,activeNodeRect:k,activeIndex:b,overIndex:g,index:D}):null,be=lt(b)&&lt(g)?i({id:a,items:f,activeIndex:b,overIndex:g}):D,fe=I==null?void 0:I.id,B=l.useRef({activeId:fe,items:f,newIndex:be,containerId:p}),_e=f!==B.current.items,ie=t({active:I,containerId:p,isDragging:O,isSorting:K,id:a,index:D,items:f,newIndex:B.current.newIndex,previousItems:B.current.items,previousContainerId:B.current.containerId,transition:u,wasDragging:B.current.activeId!=null}),Te=Ro({disabled:!ie,index:D,node:C,rect:T});return l.useEffect(()=>{K&&B.current.newIndex!==be&&(B.current.newIndex=be),p!==B.current.containerId&&(B.current.containerId=p),f!==B.current.items&&(B.current.items=f)},[K,be,p,f]),l.useEffect(()=>{if(fe===B.current.activeId)return;if(fe!=null&&B.current.activeId==null){B.current.activeId=fe;return}const ke=setTimeout(()=>{B.current.activeId=fe},50);return()=>clearTimeout(ke)},[fe]),{active:I,activeIndex:b,attributes:L,data:y,rect:T,index:D,newIndex:be,items:f,isOver:N,isSorting:K,isDragging:O,listeners:H,node:C,overIndex:g,over:_,setNodeRef:se,setActivatorNodeRef:U,setDroppableNodeRef:A,setDraggableNodeRef:M,transform:Te??rt,transition:pe()};function pe(){if(Te||_e&&B.current.newIndex===D)return wo;if(!(Re&&!Wt(m)||!u)&&(K||ie))return Qe.Transition.toString({...u,property:Qn})}}function To(e,t){var n,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(s=e==null?void 0:e.droppable)!=null?s:t.droppable}}F.Down,F.Right,F.Up,F.Left;const ko=e=>{const{setNodeRef:t,transform:n,transition:s}=Eo({id:e.id}),o={transform:Qe.Transform.toString(n),transition:s};return r.jsx("div",{ref:t,style:o,children:e.children},e.id)},Do=l.lazy(()=>Sn(()=>import("./CodeField-1.0.61-VcCGL0pj.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]),import.meta.url)),Ao=({columns:e,appId:t,columnIndex:n,computedField:s,target:o,setOpen:i})=>{const a=Pt(t),c=Tr(t),d=Dr(t),u=Ar(t);P.debug(e,t,n,s,o);const f=Cr(),p=l.useRef(null),[b,x]=l.useState(null),[h,v]=l.useState(!1),[g,j]=l.useState(s);P.debug("computedFieldState",g);const[w,S]=l.useState(n);P.debug(w);const[D,y]=l.useState(!1),E=l.useMemo(()=>{const O=[];for(let _=0;_<e.length;_++)e[_].computedField===void 0&&O.push(e[_].columnName);return O.sort((_,U)=>_>U?1:-1),O},[t]);P.debug(E);const[T,C]=l.useState(!1);l.useEffect(()=>{(p==null?void 0:p.current)!==null&&setTimeout(()=>{p.current.scrollIntoView({behavior:"smooth",block:"end"})},300)},[]);const N={marginTop:"20px",marginLeft:"10px"},A=e[w];P.debug(A);const I=()=>{o===ne.TABLE?a(!0):c(!0)};l.useEffect(()=>{var O,_,U;w===-1&&(d||u)&&e[e.length-1].computedField!==void 0&&((O=e[e.length-1].computedField)==null?void 0:O.label)===g.label&&((_=e[e.length-1].computedField)==null?void 0:_.type)===g.type&&((U=e[e.length-1].computedField)==null?void 0:U.expression)===g.expression&&(console.error(e[e.length-1]),S(e.length-1))},[e.length]);const m=O=>{if(g.expression==="")return at("Expression is required",{variant:"error"}),!1;if(w>-1?o===ne.TABLE?f(hr({appId:t,index:w,property:{computedField:{label:g.label,type:g.type,expression:g.expression}}})):o===ne.FORM&&f(gr({appId:t,index:w,property:{computedField:{label:g.label,type:g.type,expression:g.expression}}})):o===ne.TABLE?f(xr({appId:t,computedField:{label:g.label,type:g.type,expression:g.expression}})):o===ne.FORM&&f(br({appId:t,computedField:{label:g.label,type:g.type,expression:g.expression}})),o===ne.TABLE?(f(tn({appId:t,property:{computedFieldIndex:-1}})),a(!0)):(f(nn({appId:t,columnIndex:-1})),c(!0)),O){const _={label:"",type:Z.TEXT,expression:""};j(_),i(!1)}},k=()=>{m(!1)},L=()=>{m(!0)},M=()=>{o===ne.TABLE?f(tn({appId:t,property:{computedFieldIndex:-1}})):f(nn({appId:t,columnIndex:-1})),i(!1)},H=O=>{const _=O?"50px":"unset",U=O?"unset":"0";return r.jsxs("div",{style:{display:D?"block":"none",backgroundColor:"#fff",padding:"0",margin:"0",border:"1px solid rgba(0, 0, 0, 0.23)",borderRadius:"4px",position:"absolute",zIndex:"999999",top:_,bottom:U,right:"0"},children:[r.jsxs("div",{style:{color:"#fff",backgroundColor:"#333",padding:"10px 20px",whiteSpace:"nowrap"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{children:"Add placeholder"}),r.jsx(ct,{onClick:()=>{y(!1)},size:"small",color:"inherit",sx:{fontSize:"1em",marginRight:"-5px","&:hover":{backgroundColor:"#666"}},children:r.jsx(vn,{})})]}),r.jsx("div",{style:{fontSize:"70%"},children:"Position cursor in code and select placeholder"})]}),r.jsx("div",{style:{padding:"10px 0",height:"160px",overflowY:"auto"},children:E.map(se=>r.jsxs(z,{style:{display:"grid",gridTemplateColumns:"auto 1fr",justifyContent:"left",alignItems:"center",padding:"5px 20px",margin:"0",width:"100%",textAlign:"left",whiteSpace:"nowrap",borderRadius:"0"},children:[r.jsx("span",{style:{marginRight:"10px"},children:r.jsx(jr,{})}),r.jsx("span",{onClick:()=>{v(!h),x(`{:${se}}`),y(!1),I()},children:se})]},se))})]})};return r.jsxs("fieldset",{id:"pp-table-settings-computed-field",className:"pp-fieldset",style:{padding:"10px",marginLeft:"15px",marginRight:"15px",marginBottom:"15px"},children:[r.jsx("legend",{children:"Computed field"}),r.jsxs(R,{ref:p,style:{display:"grid",gridTemplateColumns:"1fr auto auto",alignItems:"center",gap:"15px",padding:"20px",margin:"0"},children:[r.jsx(we,{label:"Label",value:g.label,onChange:O=>{j({...g,label:O.target.value}),I()}}),r.jsx(Ee,{children:r.jsxs(Ir,{sx:{"& label span.MuiRadio-root":{padding:"3px"},"& label span.MuiFormControlLabel-label":{fontSize:"84%"}},children:[r.jsx(ut,{control:r.jsx(sn,{size:"small",disableRipple:!0,checked:g.type===Z.TEXT,onChange:O=>{j({...g,type:Z.TEXT}),I(),O.stopPropagation()}}),value:Z.TEXT,label:r.jsxs(R,{sx:{display:"flex",alignItems:"center","& svg":{fontSize:"28px",marginLeft:(A==null?void 0:A.allowMarkup)===!0?"7px":0}},children:["Text",(A==null?void 0:A.allowMarkup)===!0?r.jsx(lr,{}):r.jsx(r.Fragment,{})]})},Z.TEXT),r.jsx(ut,{control:r.jsx(sn,{size:"small",disableRipple:!0,checked:g.type===Z.CODE,disabled:!0,onChange:O=>{O.stopPropagation()}}),value:Z.CODE,label:"Code"},Z.CODE)]})}),r.jsx(R,{children:r.jsx(ct,{onClick:()=>{y(!0)},sx:{color:"#000",fontSize:"2.2em"},disabled:g.type===Z.CODE&&!0,children:r.jsx(en,{})})}),r.jsxs(R,{style:{position:"relative",gridColumn:" 1 / span 3 "},children:[r.jsx(l.Suspense,{children:r.jsx(Do,{code:g.expression,setCode:O=>{j({...g,expression:O}),I()},doPaste:h,pasteValue:b,dialogTitle:r.jsxs(R,{sx:{position:"relative",display:"grid",gridTemplateColumns:"auto auto",alignItems:"center"},children:[r.jsxs("span",{children:["Computed Field ",g.label]}),r.jsx(R,{children:r.jsx(ct,{onClick:()=>{y(!0)},sx:{color:"#000"},disabled:g.type===Z.CODE&&!0,children:r.jsx(en,{})})}),H(!0)]}),buttonApply:k,buttonOk:L,buttonCancel:M,extension:g.type===Z.CODE?"js":(A==null?void 0:A.allowMarkup)===!0?"html":void 0,isReadOnly:g.type===Z.CODE&&!0})}),H(!1)]}),r.jsxs("div",{style:{gridColumn:"1 / span 3 ",display:"grid",gridTemplateColumns:"auto auto auto",gap:"10px"},children:[r.jsx(z,{variant:"outlined",onClick:()=>{k()},children:"Apply"}),r.jsx(z,{variant:"contained",onClick:()=>{L()},children:"OK"}),r.jsx(z,{variant:"contained",onClick:()=>{M()},children:"Cancel"})]}),r.jsxs(ce,{component:"div",sx:{gridColumn:" 1 / span 3 "},children:["Use text for column value substitutions and code for calculations and expressions.",T?r.jsxs(r.Fragment,{children:[r.jsx("span",{children:r.jsx(Ge,{sx:{cursor:"pointer"},underline:"none",onClick:()=>{C(!1)},children:"(hide examples)"})}),r.jsx("div",{style:N,children:"Text examples"}),r.jsxs("ul",{style:{listStyle:"disc",padding:"0 40px"},children:[r.jsx("li",{children:"Full name: {:first_name} {:last_name}"}),r.jsx("li",{children:"Currently {:stock} items in stock"})]}),r.jsx("div",{style:N,children:"Code examples"}),r.jsxs("ul",{style:{listStyle:"disc",padding:"0 40px"},children:[r.jsx("li",{children:"{:salary} * {:com}"}),r.jsx("li",{children:"1.21 * ({:price} === null ? 0 : {:price})"}),r.jsx("li",{children:`"ABC-" + Number({:id}).toString().padStart(6, '0')`})]}),r.jsx("div",{style:N,children:"Notes"}),r.jsxs("ul",{style:{listStyle:"disc",padding:"0 40px"},children:[r.jsxs("li",{children:["Use ",r.jsx("strong",{children:"Text"})," for column value substitutions only"]}),r.jsxs("li",{children:["Use ",r.jsx("strong",{children:"Code"})," for expressions"]}),r.jsxs("li",{children:["Code ",r.jsx("strong",{children:"MUST"})," return a valid JavaScript expression"]}),r.jsxs("li",{children:["Placeholder format: ",r.jsx("strong",{children:"{:columnName}"})]})]})]}):r.jsx("span",{children:r.jsx(Ge,{sx:{cursor:"pointer"},underline:"none",onClick:()=>{C(!0)},children:"(show examples)"})})]})]})]})},Oo=e=>{const t=Rn(n=>{var s,o;return((o=(s=n.tables[e])==null?void 0:s.state)==null?void 0:o.computedFieldIndex)??-1});return P.debug("tableComputedFieldIndex",t),t},Io=e=>{const t=Rn(n=>{var s,o;return((o=(s=n.forms[e])==null?void 0:s.state)==null?void 0:o.computedFieldIndex)??-1});return P.debug("computedFieldIndex",t),t},yi=({appId:e,target:t})=>{P.debug(e,t);const n=vr(e),s=Oo(e),o=yr(e),i=Io(e),a=t===ne.TABLE?n==null?void 0:n.columns:o==null?void 0:o.columns,c=t===ne.TABLE?s:i,d={label:"",type:Z.TEXT,expression:""},[u,f]=l.useState(-1),[p,b]=l.useState(d),[x,h]=l.useState(!1);return l.useEffect(()=>{if(c>-1){let v;t===ne.TABLE?v=Cn.getSelectors().selectTableComputedField(qe.getState().tables,e,c):v=jn.getSelectors().selectFormComputedField(qe.getState().forms,e,c),f(c),b(v),h(!0)}},[e,c,t]),r.jsxs(R,{children:[r.jsx(R,{sx:{padding:"15px 15px 10px 5px",marginBottom:"5px",textAlign:"right"},children:r.jsx(z,{variant:"contained",startIcon:r.jsx(ar,{}),onClick:()=>{f(-1),b(d),h(!0)},children:"Computed Field"})}),x&&r.jsx(R,{children:r.jsx(Ao,{appId:e,columns:a,columnIndex:u,computedField:p,target:t,setOpen:h})})]})},Lo=({id:e,enabled:t})=>{const{attributes:n,listeners:s,setNodeRef:o}=Vn({id:e}),i={margin:"auto",marginRight:"12px",cursor:"move"};return t||(i.pointerEvents="none",i.opacity="0.4"),r.jsx("div",{ref:o,...s,...n,style:i,children:r.jsx(wr,{})})},Ci=({checked:e,children:t,alignRight:n,disabled:s,forceOff:o})=>{var a,c;const i={width:"13px",height:"13px",top:"unset",backgroundColor:(a=Ot)==null?void 0:a.palette.background.paper};return n===!1?i.right="unset":i.left="unset",r.jsxs(R,{sx:{position:"relative",width:"24px",height:"24px","& svg":{position:"absolute",width:"24px",height:"24px",top:0,bottom:0,left:0,right:0},"& svg.off":i},children:[t,(!e&&s!==!0||o===!0)&&r.jsx(cr,{className:"off",color:(c=Ot)==null?void 0:c.palette.error.main})]})},mn=({column:e,columnIndex:t,lookupColumns:n,wizardLookup:s,addActions:o,enableAddAction:i,target:a,appId:c,onUpdate:d,onActions:u})=>{P.debug(e,t,n,s,o,i,a,c);const f=l.useMemo(()=>a===ne.TABLE?Cn.getSelectors().selectTableColumnsById(qe.getState().tables,c):jn.getSelectors().selectFormColumns(qe.getState().forms,c),[]),[p,b]=l.useState(t===null?"":s.dynamicConditions[t].lookupColumnName);P.debug("stateLookupColumnName",p);const[x,h]=l.useState(t===null?"":s.dynamicConditions[t].tableColumnName);P.debug("stateTableColumnName",x);const[v,g]=l.useState(null),j=!!v,w=y=>{g(y.currentTarget),y.stopPropagation()},S=()=>{g(null)},D=y=>{y.lookupColumnName!==""&&y.tableColumnName!==""&&d(y)};return r.jsxs(R,{sx:{display:"grid",gridTemplateColumns:o?"1fr auto 1fr auto":"1fr auto 1fr",alignItems:"center",gridGap:"5px"},children:[r.jsxs(Ye,{MenuProps:{id:"pp-select-menu"},value:p,onChange:y=>{b(y.target.value),D({lookupColumnName:y.target.value,tableColumnName:x})},children:[r.jsx(ge,{value:""}),...n.map(y=>r.jsx(ge,{value:y,children:y}))]}),r.jsx("span",{children:"="}),r.jsxs(Ye,{MenuProps:{id:"pp-select-menu"},value:x,onChange:y=>{h(y.target.value),D({lookupColumnName:p,tableColumnName:y.target.value})},children:[r.jsx(ge,{value:""}),...f.map(y=>y.columnName===e.columnName||y.computedField!==void 0?null:r.jsx(ge,{value:y.columnName,children:y.columnName}))]}),o&&r.jsxs(r.Fragment,{children:[r.jsx(ct,{color:"primary",onClick:w,children:r.jsx(dr,{})}),r.jsxs(Br,{anchorEl:v,open:j,onClose:S,sx:{zIndex:9999999999},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[i&&r.jsxs(ge,{onClick:()=>{u("add"),S()},children:[r.jsx(Sr,{}),r.jsx("span",{style:{marginLeft:"10px"},children:"Add column"})]}),r.jsxs(ge,{onClick:()=>{u("delete"),S()},children:[r.jsx(Rr,{}),r.jsx("span",{style:{marginLeft:"10px"},children:"Delete column"})]})]})]})]})},Fo=l.lazy(()=>Sn(()=>import("./CodeField-1.0.61-VcCGL0pj.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]),import.meta.url)),No=({column:e,appId:t,columnIndex:n,databases:s,defaultDatabase:o,wpDatabase:i,target:a,setLookup:c,enableWizard:d})=>{P.debug(e,t,n,s,o,i,a);const u=is(Rt(Yt),Rt(Un),Rt($n)),f=Pt(t),p=["Select database","Select lookup table","Select lookup column","Select lookup column values","Lookup conditions"],[b,x]=l.useState(0),[h,v]=l.useState(e.lookup!==void 0?{dbs:o,tbl:"",key:"",value:"",delimiter:"",defaultWhere:"",dynamicConditions:[],loadOnStartup:!0,rerender:!1,...e.lookup}:{dbs:o,tbl:"",key:"",value:"",delimiter:"",defaultWhere:"",dynamicConditions:[],loadOnStartup:!0,rerender:!1});P.debug("wizardLookup",h);const[g,j]=l.useState(h.dynamicConditions.length===0),[w,S]=l.useState(!1);P.debug("wizardError",w);const[D,y]=l.useState([]);P.debug("tables",D);const[E,T]=l.useState([]);P.debug("lookupColumns",E);const C=N=>{v({...h,...N})};return r.jsxs(r.Fragment,{children:[b!==p.length&&r.jsx(R,{sx:{textAlign:"right"},children:r.jsx(z,{variant:"outlined",startIcon:r.jsx(vn,{}),onClick:()=>{d(!1)},children:"Cancel"})}),r.jsx(zr,{activeStep:b,orientation:"vertical",sx:{marginBottom:0},children:p.map((N,A)=>{var I;return P.debug(N,A),r.jsxs(Wr,{children:[r.jsx(Ur,{children:N}),r.jsx(kr,{children:r.jsxs(R,{sx:{marginTop:"20px",display:"grid",gridGap:"10px","& > :nth-of-type(2)":{display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:"5px",justifyContent:"space-between"}},children:[A===0&&r.jsxs(r.Fragment,{children:[r.jsxs(Ye,{MenuProps:{id:"pp-select-menu"},value:h==null?void 0:h.dbs,onChange:m=>{C({dbs:m.target.value,tbl:"",key:"",value:"",defaultWhere:"",dynamicConditions:[]})},children:[...s.map(m=>r.jsx(ge,{value:m,children:i===m?m+" (WordPress database)":m}))]}),r.jsxs(R,{children:[r.jsx(R,{}),r.jsx(z,{variant:"contained",endIcon:r.jsx(Le,{}),onClick:()=>{Nr(t,(h==null?void 0:h.dbs)??"",m=>{const k=m==null?void 0:m.data;P.debug("response data",k),y(k),k.includes(h==null?void 0:h.tbl)||C({tbl:k[0]})},m=>{console.error("error",m),at(m??At.contactSupport,{variant:"error"})}),x(b+1)},children:"Next"})]})]}),A===1&&r.jsxs(r.Fragment,{children:[r.jsxs(Ye,{MenuProps:{id:"pp-select-menu"},value:h==null?void 0:h.tbl,onChange:m=>{C({tbl:m.target.value,key:"",value:"",defaultWhere:"",dynamicConditions:[]})},children:[...D.map(m=>r.jsx(ge,{value:m,children:m}))]}),r.jsxs(R,{children:[r.jsx(z,{variant:"contained",startIcon:r.jsx(it,{}),onClick:()=>{x(b-1)},children:"Previous"}),r.jsx(z,{variant:"contained",endIcon:r.jsx(Le,{}),onClick:()=>{Mr(t,(h==null?void 0:h.dbs)??"",(h==null?void 0:h.tbl)??"",m=>{const k=m==null?void 0:m.data;P.debug("response data",k);const L=k.map(M=>M.column_name);if(h.value!==""){const M=h.value.split(",");L.map(H=>{M.includes(H)||M.push(H)}),T(M)}else T(L);L.includes(h.key)||C({key:k[0].column_name})},m=>{console.error("error",m),at(m??At.contactSupport,{variant:"error"})}),x(b+1)},children:"Next"})]})]}),A===2&&r.jsxs(r.Fragment,{children:[r.jsxs(Ee,{children:[r.jsxs(Ye,{MenuProps:{id:"pp-select-menu"},value:h==null?void 0:h.key,onChange:m=>{C({key:m.target.value,value:"",defaultWhere:"",dynamicConditions:[]})},children:[...E.map(m=>r.jsx(ge,{value:m,children:m}))]}),r.jsx(ce,{children:"Column selected from lookup table."})]}),r.jsxs(R,{children:[r.jsx(z,{variant:"contained",startIcon:r.jsx(it,{}),onClick:()=>{x(b-1)},children:"Previous"}),r.jsx(z,{variant:"contained",endIcon:r.jsx(Le,{}),onClick:()=>{x(b+1)},children:"Next"})]})]}),A===3&&r.jsxs(r.Fragment,{children:[r.jsxs(R,{children:[r.jsxs(Ee,{fullWidth:!0,children:[r.jsx(ao,{autoScroll:!0,sensors:u,collisionDetection:us,onDragEnd:m=>{const{active:k,over:L}=m;if((k==null?void 0:k.id)!==(L==null?void 0:L.id)){P.debug(k,L);const M=E.indexOf(k.id.toString()),H=E.indexOf(L.id.toString()),O=xt(E,M,H);P.debug(O),T(O);let _=[];h.value!==""&&(_=h.value.split(",")),P.debug(_);const U=_.indexOf(k.id.toString()),xe=_.indexOf(L.id.toString()),se=xt(_,U,xe);P.debug(se),C({value:se.join()})}},children:r.jsx(vo,{items:E,children:r.jsxs(R,{sx:{width:"100%",margin:0,padding:0,"& > div:first-of-type > div":{borderTopLeftRadius:"4px",borderTopRightRadius:"4px"},"& > :last-of-type > div":{borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderBottom:"1px solid rgba(0, 0, 0, 0.23)"}},children:[...E.map(m=>r.jsx(ko,{id:m,style:{borderRadius:"10px"},children:r.jsxs(R,{sx:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",padding:"12px 20px",borderTop:"1px solid rgba(0, 0, 0, 0.23)",borderLeft:"1px solid rgba(0, 0, 0, 0.23)",borderRight:"1px solid rgba(0, 0, 0, 0.23)"},children:[r.jsx(ut,{control:r.jsx($r,{id:m,checked:h.value.split(",").includes(m),onChange:(k,L)=>{let M=[];if(h.value!==""&&(M=h.value.split(",")),L)M.push(m);else{const H=M.indexOf(m);H!==-1&&M.splice(H,1)}C({value:M.join(),defaultWhere:"",dynamicConditions:[]})}}),label:m}),r.jsx(Lo,{id:m,enabled:!0})]})},m))]})})}),r.jsx(ce,{children:"Columns shown in lookup."}),w&&r.jsxs(ce,{sx:{color:(I=Ot)==null?void 0:I.palette.error.main,display:"inline-grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"5px","& svg":{fontSize:"20px"}},children:[r.jsx(ur,{}),r.jsx("span",{children:"Select at least one column."})]})]}),r.jsx(we,{value:h==null?void 0:h.delimiter,onChange:m=>{C({delimiter:m.target.value})},fullWidth:!0,type:"text",placeholder:"Column delimiter",sx:{marginTop:"10px"}})]}),r.jsxs(R,{children:[r.jsx(z,{variant:"contained",startIcon:r.jsx(it,{}),onClick:()=>{x(b-1)},children:"Previous"}),r.jsx(z,{variant:"contained",endIcon:r.jsx(Le,{}),onClick:()=>{h.value===""?at("Select at least one column",{variant:"error"}):x(b+1)},children:"Next"})]})]}),A===4&&r.jsxs(r.Fragment,{children:[r.jsxs(R,{sx:{display:"grid",gridGap:"20px"},children:[r.jsxs(Ee,{children:[r.jsx(l.Suspense,{children:r.jsx(Fo,{code:h==null?void 0:h.defaultWhere,setCode:m=>{C({defaultWhere:m,dynamicConditions:[]})},dialogTitle:"Default where",extension:"sql"})}),r.jsx(_r,{target:a})]}),r.jsxs(R,{children:[r.jsx(Or,{children:"Dynamic conditions"}),r.jsxs(R,{sx:{display:"grid",gridGap:"5px"},children:[...h.dynamicConditions.map((m,k)=>r.jsx(mn,{appId:t,column:e,columnIndex:k,lookupColumns:E,wizardLookup:h,addActions:!0,target:a,enableAddAction:h.dynamicConditions.length===k+1&&!g,onUpdate:L=>{const M=wt(h);M.dynamicConditions[n]={...L},C(M)},onActions:L=>{if(L==="add")j(!0);else if(L==="delete"){const M=wt(h);M.dynamicConditions.splice(k,1),C(M),j(M.dynamicConditions.length===0)}}})),g&&r.jsx(mn,{appId:t,column:e,columnIndex:null,lookupColumns:E,wizardLookup:h,addActions:h.dynamicConditions.length>0,target:a,enableAddAction:!1,onUpdate:m=>{const k=wt(h);k.dynamicConditions.push(m),C(k),j(!1)},onActions:m=>{m==="delete"&&j(!1)}})]}),r.jsx(Ee,{children:r.jsx(ce,{children:"Rebuilds lookup when conditions change."})})]})]}),r.jsxs(R,{children:[r.jsx(z,{variant:"contained",startIcon:r.jsx(it,{}),onClick:()=>{x(b-1)},children:"Previous"}),r.jsx(z,{variant:"contained",startIcon:r.jsx(fr,{}),onClick:()=>{h.value===""?S(!0):(c(n,h),S(!1),f(!0),x(b+1))},children:"Finish"})]})]})]})})]},N)})}),b===p.length&&r.jsxs(R,{sx:{marginTop:"20px"},children:["Lookup wizard successfully completed. Please save changes to enable.",r.jsx(z,{onClick:()=>{d(!1),x(b+1)},children:"Close wizard"})]})]})},Mo=()=>{const[e,t]=l.useState(!1);return r.jsxs(ce,{component:"div",children:[r.jsx(R,{children:r.jsxs(Ge,{sx:{textDecoration:"none",cursor:"pointer",display:"inline-flex","& svg":{fontSize:"1rem",marginRight:"2px"}},onClick:()=>t(!e),children:[r.jsx(Dt,{}),"Known limitations with lookups"]})}),e&&r.jsxs(R,{sx:{marginTop:"20px",display:"grid",gap:"20px",ul:{listStyleType:"disc",paddingLeft:"40px"}},children:[r.jsx(R,{children:"Autocomplete is NOT available for lookups. It is automatically disabled."}),r.jsx(R,{children:"Some filter types require lookups to be loaded on startup. If lookups are not preloaded, the following filter types may not function correctly or will have limitations."}),r.jsx(R,{children:r.jsx("strong",{children:"With client-side processing enabled"})}),r.jsxs("ul",{children:[r.jsx("li",{children:"Lookups that are not preloaded will be excluded from the global filter"}),r.jsx("li",{children:"Drop-down lists will display lookup keys instead of lookup values"}),r.jsx("li",{children:"Multi-select drop-down lists will display lookup keys instead of lookup values"})]}),r.jsx(R,{children:r.jsx("strong",{children:"With server-side processing enabled"})}),r.jsxs("ul",{children:[r.jsx("li",{children:"Drop-down lists will be empty"}),r.jsx("li",{children:"Multi-select drop-down lists will be empty"}),r.jsx("li",{children:"Search panes will be empty"})]})]})]})},Po=({column:e,appId:t,columnIndex:n,databases:s,defaultDatabase:o,wpDatabase:i,target:a,setLookup:c})=>{var j,w;P.debug(e,t,n,s,o,i,a);const[d,u]=l.useState(!1),f=()=>{c(n,void 0),u(!1)},[p,b]=l.useState(!1);P.debug("wizardOn",p);const[x,h]=l.useState(!1),[v,g]=l.useState(!1);return r.jsxs(r.Fragment,{children:[e.lookup!==void 0&&!p?r.jsxs(R,{sx:{display:"grid",gridGap:"10px"},children:[r.jsx(we,{fullWidth:!0,label:"Database",value:e.lookup.dbs,disabled:!0}),r.jsx(we,{fullWidth:!0,label:"Table",value:e.lookup.tbl,disabled:!0}),r.jsx(we,{fullWidth:!0,label:"Lookup column",value:e.lookup.key,disabled:!0}),r.jsx(we,{fullWidth:!0,label:"Values shown in lookup",value:e.lookup.value.split(",").join(e.lookup.delimiter),disabled:!0}),r.jsx(we,{fullWidth:!0,label:"Default where",value:e.lookup.defaultWhere,disabled:!0}),r.jsx(we,{fullWidth:!0,multiline:!0,label:"Dynamic conditions",value:(w=(j=e.lookup)==null?void 0:j.dynamicConditions)==null?void 0:w.map(S=>S.lookupColumnName+" = "+S.tableColumnName).join(`
`),disabled:!0}),r.jsxs(R,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",alignItems:"center",gap:"10px"},children:[r.jsx(z,{variant:"contained",fullWidth:!0,startIcon:r.jsx(pr,{}),onClick:()=>{u(!0)},children:"Delete"}),r.jsx(z,{variant:"contained",fullWidth:!0,endIcon:r.jsx(Le,{}),onClick:()=>{b(!0)},children:"Update"})]})]}):r.jsx(r.Fragment,{children:p?r.jsx(No,{column:e,appId:t,columnIndex:n,databases:s,defaultDatabase:o,wpDatabase:i,target:a,setLookup:c,enableWizard:b}):r.jsx(z,{variant:"contained",fullWidth:!0,endIcon:r.jsx(Le,{}),onClick:()=>{b(!0)},children:"Start lookup wizard"})}),r.jsxs(ce,{component:"div",sx:{marginTop:"30px"},children:[r.jsx(R,{children:r.jsxs(Ge,{sx:{textDecoration:"none",cursor:"pointer",display:"inline-flex","& svg":{fontSize:"1rem",marginRight:"2px"}},onClick:()=>h(!x),children:[r.jsx(Dt,{}),"What is a lookup?"]})}),x&&r.jsxs(R,{sx:{marginTop:"20px",marginBottom:"30px",display:"grid",gap:"20px"},children:[r.jsx(R,{children:"A lookup is a list of possible allowed values for a specific column. For a fixed number of values, this can be achieved using the enum data type."}),r.jsx(R,{children:"To create a lookup, start the lookup wizard and follow the instructions. A lookup must return a single unique column value."}),r.jsx(R,{children:"Lookups support single selections only. For multiple value selections, use the set data type."})]})]}),r.jsxs(ce,{component:"div",children:[r.jsx(R,{children:r.jsxs(Ge,{sx:{textDecoration:"none",cursor:"pointer",display:"inline-flex","& svg":{fontSize:"1rem",marginRight:"2px"}},onClick:()=>g(!v),children:[r.jsx(Dt,{}),"Example"]})}),v&&r.jsxs(R,{sx:{marginTop:"20px",display:"grid",marginBottom:"20px"},children:[r.jsxs(R,{children:["Consider table ",r.jsx("strong",{children:"products"})," containing a product type column. Available product types are stored in a table ",r.jsx("strong",{children:"product_types"}),".",r.jsxs("pre",{children:["create table product_types",r.jsx("br",{}),"(product_type varchar(10) NOT NULL",r.jsx("br",{}),",product_info varchar(255) NOT NULL",r.jsx("br",{}),",...",r.jsx("br",{}),",PRIMARY KEY (product_type)",r.jsx("br",{}),")",r.jsx("br",{}),r.jsx("br",{}),"create table products",r.jsx("br",{}),"(product_id int NOT NULL",r.jsx("br",{}),",product_type varchar(10) NOT NULL",r.jsx("br",{}),",...",r.jsx("br",{}),",PRIMARY KEY (product_id)",r.jsx("br",{}),",FOREIGN KEY (product_type)",r.jsx("br",{})," REFERENCES product_types(product_type)",r.jsx("br",{}),")"]})]}),r.jsxs(R,{children:["Start the lookup wizard",r.jsxs("ol",{style:{padding:"0 40px"},children:[r.jsx("li",{children:"Select your database"}),r.jsxs("li",{children:["Select lookup table ",r.jsx("strong",{children:"`product_types`"})]}),r.jsxs("li",{children:["Select lookup column ",r.jsx("strong",{children:"`product_type`"})]}),r.jsxs("li",{children:["Select ",r.jsx("strong",{children:"`product_info`"})," (or other(s))"]}),r.jsx("li",{children:"Add lookup conditions (if applicable)"})]})]}),r.jsxs(R,{children:["Notes",r.jsxs("ul",{style:{listStyle:"disc",padding:"0 40px"},children:[r.jsx("li",{children:"Step 4 allows you to add multiple lookup columns to the list. A column delimiter can be added between the selected columns. Columns added in step 4 are included in the search on the lookup table."}),r.jsxs("li",{children:["Additional lookup conditions are not necessary if you want to show all available lookup values. Use the ",r.jsx("strong",{children:"Default where"})," clause if you want to show a subset of the lookup values."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Dynamic conditions"})," can be used to make the list output depend on other form values. Use dynamic conditions to create cascading drop-down lists."]})]})]})]})]}),r.jsx(Mo,{}),d&&r.jsx(Xr,{title:"Please confirm",message:"Are you sure you want to delete this lookup? This action cannot be undone once you click APPLY!",open:d,setOpen:u,onConfirm:()=>f()})]})},Bo=e=>{const[t,n]=l.useState({databases:[],defaultDatabase:"",wpDatabase:""});return P.debug("databases",t),l.useEffect(()=>{wn(e)&&t.databases.length===0&&Pr(e,s=>{const o=s==null?void 0:s.data;P.debug("response data",o);const i=[];let a="",c="";o.map(d=>{var u;P.debug(d),(d==null?void 0:d.dbs)!==void 0&&(i.push(d.dbs),((u=d==null?void 0:d.dbs_type)==null?void 0:u.toLocaleLowerCase())==="wp"&&(c=d.dbs,a=d.dbs))}),i.sort((d,u)=>d.localeCompare(u,void 0,{sensitivity:"base"})),n({databases:i,defaultDatabase:a,wpDatabase:c})},s=>{console.error("error",s)})},[e,t]),t},ji=({appId:e,columnIndex:t,tableColumn:n,columnMetaData:s,setLookup:o,target:i})=>{var u;const a=Bo(e),c=Pt(e),d=()=>typeof n.inlineEditing=="boolean";return!wn(e)||s===null||n.computedField!==void 0||t===void 0||rn(s==null?void 0:s.data_type)!=="string"&&rn(s==null?void 0:s.data_type)!=="number"||(s==null?void 0:s.data_type)==="enum"||(s==null?void 0:s.data_type)==="set"?null:r.jsxs(Tn,{disableGutters:!0,children:[r.jsxs(kn,{expandIcon:r.jsx(yn,{}),className:"pp-context-help-summary",sx:{fontSize:"1rem","& .MuiAccordionSummary-content":{padding:"1rem",alignItems:"center"}},children:[r.jsx(Lr,{}),r.jsx("span",{style:{paddingLeft:"0.5rem"},children:"Lookup"}),r.jsx(En,{path:i===ne.TABLE?"table-builder/menu/columns/column-lookups.html":"form-builder/menu/columns/lookup.html",size:22})]}),r.jsxs(Dn,{sx:{marginTop:"10px"},children:[r.jsx(Po,{appId:e,column:n,columnIndex:t,databases:a.databases,defaultDatabase:a.defaultDatabase,wpDatabase:a.wpDatabase,target:i,setLookup:o}),d()&&n.lookup!==void 0&&r.jsx(R,{sx:{marginTop:"20px"},children:r.jsxs(Ee,{children:[r.jsx(ut,{control:r.jsx(Yr,{checked:((u=n.lookup)==null?void 0:u.loadOnStartup)||s.is_nullable==="NO"&&n.inlineEditing===!0,disabled:s.is_nullable==="NO"&&n.inlineEditing,onChange:(f,p)=>{const b=n.lookup;b!==void 0&&(o(t,{...b,loadOnStartup:p}),c(!0)),f.stopPropagation()}}),label:"Load full lookup table on startup",labelPlacement:"end"}),r.jsx(ce,{component:"div",sx:{"& ul":{margin:0,padding:"5px"}},children:r.jsxs("ul",{style:{listStyle:"disc",padding:"0 10px"},children:[r.jsx("li",{children:"Improves performance by loading lookup table into memory"}),r.jsx("li",{children:"When disabled, lookup values are cached instead"}),r.jsx("li",{children:"Automatically enabled when inline editing is on"}),r.jsxs("li",{children:["Disabling may affect global and column filters ",r.jsx("strong",{children:"(see limitations)"})]}),r.jsx("li",{children:"Restart your app after making changes"})]})})]})})]})]})},wi=({columnMetaData:e,metaData:t,calledFromFormSettings:n})=>{const s=()=>String(e.column_type).toLocaleLowerCase().includes("text")?`(${e==null?void 0:e.character_maximum_length})`:"";return e===void 0?null:r.jsxs(Tn,{disableGutters:!0,children:[r.jsxs(kn,{expandIcon:r.jsx(yn,{}),className:"pp-context-help-summary",sx:{fontSize:"1rem","& .MuiAccordionSummary-content":{padding:"1rem",alignItems:"center"}},children:[r.jsx(Fr,{}),r.jsx("span",{style:{paddingLeft:"0.5rem"},children:"Column metadata"}),r.jsx(En,{path:n===!1?"table-builder/menu/columns/column-metadata.html":"form-builder/menu/columns/column-metadata.html",size:22})]}),r.jsxs(Dn,{sx:{display:"grid"},children:[r.jsxs(R,{sx:{marginTop:"1rem",display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"left",alignItems:"center"},children:[r.jsx("div",{children:"Column name"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("strong",{children:e.column_name}),t!=null&&t.primary_key&&Array.isArray(t==null?void 0:t.primary_key)&&(t!=null&&t.primary_key.includes(e.column_name))?r.jsx(Er,{}):r.jsx(r.Fragment,{})]}),r.jsx("div",{children:"Data type"}),r.jsx("div",{children:r.jsxs("strong",{children:[e.column_type,s()]})}),r.jsx("div",{children:"Is nullable"}),r.jsx("div",{children:r.jsx("strong",{children:e.is_nullable})}),r.jsx("div",{children:"Default value"}),r.jsx("div",{children:r.jsx("strong",{children:e.column_default==="NULL"?"null":e.column_default??"null"})}),e.extra!==""&&r.jsxs(r.Fragment,{children:[r.jsx("div",{}),r.jsx("div",{children:r.jsx("strong",{children:e.extra})})]})]}),r.jsx(Ee,{children:r.jsx(ce,{component:"div",children:"This is how the column is stored in the database."})})]})]})},Si=(e,t)=>{t===void 0&&(t=mr.getSelectors().selectMetaDataById(qe.getState().metaData,e));const n=l.useMemo(()=>{var o,i;const s={};if(Array.isArray(t==null?void 0:t.columns)&&((o=t==null?void 0:t.columns)==null?void 0:o.length)>0)for(let a=0;a<t.columns.length;a++)s[t.columns[a].column_name]=t.columns[a];if(Array.isArray(t==null?void 0:t.relation_columns)&&((i=t==null?void 0:t.relation_columns)==null?void 0:i.length)>0)for(let a=0;a<t.relation_columns.length;a++)s[At.relationTablePrefix+t.relation_columns[a].column_name]=t.relation_columns[a];return s},[t]);return P.debug(n),n};export{ao as D,Ci as I,Mo as L,Un as M,Yt as P,ji as S,$n as T,wi as a,Lo as b,is as c,Rt as d,us as e,vo as f,ko as g,yi as h,Si as u};
