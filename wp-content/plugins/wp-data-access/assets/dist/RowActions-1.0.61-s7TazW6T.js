import{j as r}from"./cm-1.0.61-D9ug3d5m.js";import{e as p,n as B,aC as N,l as U}from"./index-1.0.61-B7tjLD84.js";import{a as q}from"./hooks-1.0.61-Bklk-gZu.js";import{l as w,at as C,bA as _,H as F}from"./lib-1.0.61-DoXQcMHD.js";import{R as A}from"./SharedContainer-1.0.61-D5Lln0NA.js";import{C as H}from"./ConfirmDialog-1.0.61-BrxkBu_y.js";import{r as K}from"./redux-1.0.61-CrJ4jvTM.js";import{d as S}from"./ActionsDml-1.0.61-DA32DqSB.js";import{e as c}from"./notistack-1.0.61-0awN6uG4.js";import{a as G}from"./AppTheme-1.0.61-CGnMRNDC.js";import{u as I}from"./useAppFunctions-1.0.61-EdKk0_Mu.js";import{B as J}from"./Spinner-1.0.61-khi9zO7Q.js";import{C as Q}from"./Checkbox-1.0.61-BlN5bjuH.js";import{I as x}from"./iconBase-1.0.61-C8saXaJ2.js";import"./vendor-1.0.61-CN03Eozo.js";import"./Typography-1.0.61-Cg0Css-P.js";import"./ButtonBase-1.0.61-BqsrQx8o.js";import"./useEnhancedEffect-1.0.61-CX4-xj9Z.js";import"./ThemeProvider-1.0.61-4HOD8y6D.js";import"./Modal-1.0.61-DVFPMIPt.js";import"./loglevel-1.0.61-BZ7XahX3.js";import"./lodash-1.0.61-C8OpKhUs.js";import"./moment-1.0.61-C5S46NFB.js";import"./cmJson-1.0.61-BLURwXOE.js";import"./rehyperaw-1.0.61-AkovKNCK.js";import"./markdown-1.0.61-6nAzZWly.js";import"./AdminTheme-1.0.61-D8bUxwpM.js";import"./useStoreFormSettings-1.0.61-CgHnNhxx.js";import"./useRemoveAppFromStore-1.0.61-E72jey9_.js";import"./Languages-1.0.61-BxgPwugF.js";import"./useChartSettings-1.0.61-BIp9UVZM.js";import"./useLocaleUd-1.0.61-DEEqF_bH.js";import"./RestApi-1.0.61-DdTZ_pIc.js";import"./useScreenSize-1.0.61-B4FX7-PC.js";import"./cjs-1.0.61-D_0erLfe.js";import"./useMetadata-1.0.61-CVl9oDgw.js";import"./index-1.0.61-LP991tft.js";import"./dayjs.min-1.0.61-21Xi_c_9.js";import"./dompurify-1.0.61-DhD2mIk-.js";import"./useFormDetails-1.0.61-677sicqv.js";import"./DynamicModeEnum-1.0.61-BXuL5kgA.js";import"./StoreTypeEnum-1.0.61-Tot-ESpR.js";import"./FallbackSpinner-1.0.61-s3WTN65t.js";import"./main-1.0.61.js";import"./DialogContent-1.0.61-Ws3r0VFj.js";import"./index-1.0.61-CRnugLvI.js";import"./getThemeProps-1.0.61-OfsHdeDz.js";import"./SwitchBase-1.0.61-C2xa6JFZ.js";import"./Select-1.0.61-DmroHcG5.js";import"./Menu-1.0.61-D2OtRuzX.js";import"./createSvgIcon-1.0.61-DDgmYdEo.js";const Qi=({metaData:o,appId:m,rowData:l,storeTableSettings:n,appLanguage:t,locale:E,showForm:u,refetch:P,rowIndex:d,rowSelected:j,hasBulkActions:z,table:X,tableStore:h,requery:Y,getComponentWidth:e})=>{var R,v;w.debug(o,m,l,d,j);const s={};o.primary_key.map(i=>{l[i]&&(s[i]=l[i])}),w.debug("rowId",s);const a=q(),[M,k]=K.useState(!1),y=Object.keys(s).length>0,O=n.viewLink,T=!C(o)&&((R=o==null?void 0:o.privs)==null?void 0:R.update)&&n.transactions.update&&h.state.permissions.update!==!1&&y,V=!C(o)&&((v=o==null?void 0:o.privs)==null?void 0:v.delete)&&n.transactions.delete&&h.state.permissions.delete!==!1&&y;return I(m),r.jsxs(J,{sx:{display:"flex",alignItems:"center",gap:0},children:[z&&r.jsx(p,{title:E.toggleSelectRow,children:r.jsx(Q,{checked:j,size:e()<500?"small":"medium",sx:{"& input":{width:e()<500?"36px !important":"40px !important",height:e()<500?"36px !important":"40px !important",margin:"0 !important"},padding:"8px !important"},inputProps:{className:"pp-row-selection-checkbox"}})}),O&&r.jsx(p,{title:t.view,children:r.jsx(x,{color:"primary",size:e()<500?"small":"medium",onClick:i=>{Object.keys(s).length===0&&a(_({appId:m,data:l,context:null})),u(s,A.VIEW,d),i.stopPropagation()},children:r.jsx(B,{})})}),T&&r.jsx(p,{title:t.edit,children:r.jsx(x,{color:"primary",size:e()<500?"small":"medium",onClick:i=>{u(s,A.UPDATE,d),i.stopPropagation()},children:r.jsx(N,{})})}),V&&r.jsxs(r.Fragment,{children:[r.jsx(p,{title:t.delete,children:r.jsx(x,{color:"error",size:e()<500?"small":"medium",onClick:i=>{k(!0),i.stopPropagation()},children:r.jsx(U,{})})}),r.jsx(H,{title:t.deleteRowTitle,message:t.deleteRowMessage,open:M,setOpen:k,onConfirm:()=>{a(F({appId:m,property:{isRowCountUpdated:!0}})),S(m,s,i=>{var b;if(i!=null&&i.code&&(i!=null&&i.message)){let f=i.code;switch(((b=o==null?void 0:o.table_info)==null?void 0:b.engine)==="CONNECT"&&f==="info"&&(f="ok"),f){case"ok":c(t.deletedSuccessful,{variant:"success"}),P();break;default:console.error(i),c(i.message??t.invalidResponse,{variant:"error"})}}else console.error(i),c(t.invalidResponse,{variant:"error"})},i=>{console.error("error",i),c(i??t.invalidResponse,{variant:"error"})})},locale:t,theme:G})]})]})};export{Qi as default};
