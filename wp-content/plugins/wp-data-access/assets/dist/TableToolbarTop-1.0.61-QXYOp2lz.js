const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TableMap-1.0.61-B03_NejS.js","./cmJson-1.0.61-BLURwXOE.js","./cm-1.0.61-D9ug3d5m.js","./redux-1.0.61-CrJ4jvTM.js","./vendor-1.0.61-CN03Eozo.js","./lib-1.0.61-DoXQcMHD.js","./loglevel-1.0.61-BZ7XahX3.js","./lodash-1.0.61-C8OpKhUs.js","./moment-1.0.61-C5S46NFB.js","./rehyperaw-1.0.61-AkovKNCK.js","./markdown-1.0.61-6nAzZWly.js","./TabPanel-1.0.61-BtYzUOMH.js","./InputAdornment-1.0.61-23wkGu1k.js","./cjs-1.0.61-D_0erLfe.js","./Typography-1.0.61-Cg0Css-P.js","./ButtonBase-1.0.61-BqsrQx8o.js","./useEnhancedEffect-1.0.61-CX4-xj9Z.js","./getThemeProps-1.0.61-OfsHdeDz.js","./Select-1.0.61-DmroHcG5.js","./Menu-1.0.61-D2OtRuzX.js","./ThemeProvider-1.0.61-4HOD8y6D.js","./index-1.0.61-B7tjLD84.js","./Modal-1.0.61-DVFPMIPt.js","./notistack-1.0.61-0awN6uG4.js","./iconBase-1.0.61-C8saXaJ2.js","./createSvgIcon-1.0.61-DDgmYdEo.js","./Spinner-1.0.61-khi9zO7Q.js","./TableChart-1.0.61-BQVhRBtp.js","./ChartTypeSelection-1.0.61-Cb--DVR3.js","./ChartTypes-1.0.61-NPfELJPt.js","./index-1.0.61-Cpc7oUnN.js","./TextField-1.0.61-DyvT2G_W.js","./MenuItem-1.0.61-Bmr1xWyp.js","./ListItemIcon-1.0.61-P8epLVMP.js","./Chart-1.0.61-Bgb2EiJM.js","./useChartSettings-1.0.61-BIp9UVZM.js","./useRemoveAppFromStore-1.0.61-E72jey9_.js","./Languages-1.0.61-BxgPwugF.js","./hooks-1.0.61-Bklk-gZu.js","./useLocaleUd-1.0.61-DEEqF_bH.js","./RestApi-1.0.61-DdTZ_pIc.js","./useMetadata-1.0.61-CVl9oDgw.js","./useLocaleMrt-1.0.61-C3Pa4C9e.js","./AppTheme-1.0.61-CGnMRNDC.js","./index-1.0.61-CRnugLvI.js","./TableChartSelection-1.0.61-TuMkRlx1.js","./useTableColumnOrder-1.0.61-Ds81s_GP.js","./Autocomplete-1.0.61-CP0PiliY.js","./Close-1.0.61-CiuKDfYz.js","./Chip-1.0.61-C6TjQKDp.js","./TableToolbarInlineEditingButton-1.0.61-DU3VWgPp.js","./TableQuery-1.0.61-BFTtSjov.js","./SharedContainer-1.0.61-D5Lln0NA.js","./AdminTheme-1.0.61-D8bUxwpM.js","./ActionsDml-1.0.61-DA32DqSB.js","./useAppFunctions-1.0.61-EdKk0_Mu.js","./useStoreFormSettings-1.0.61-CgHnNhxx.js","./useScreenSize-1.0.61-B4FX7-PC.js","./index-1.0.61-LP991tft.js","./dayjs.min-1.0.61-21Xi_c_9.js","./dompurify-1.0.61-DhD2mIk-.js","./useFormDetails-1.0.61-677sicqv.js","./DynamicModeEnum-1.0.61-BXuL5kgA.js","./StoreTypeEnum-1.0.61-Tot-ESpR.js","./FallbackSpinner-1.0.61-s3WTN65t.js","./main-1.0.61.js","./SharedContainer-1.0.61-CL-1K3JO.css","./Tooltip-1.0.61-De3BL3Jg.js","./Tooltip-1.0.61--D4jr2go.css","./SanitizeComponent-1.0.61-jz3CtJfW.js","./tanstack-1.0.61-ncdkBwIj.js","./index.esm-1.0.61-Dhj7A6Yv.js","./Stack-1.0.61-CNGwl0k7.js","./Radio-1.0.61-BXMcBwcB.js","./SwitchBase-1.0.61-C2xa6JFZ.js","./Checkbox-1.0.61-BlN5bjuH.js","./Collapse-1.0.61-Cww0NnSm.js","./AlertTitle-1.0.61-hpo1u3Vv.js","./TableRow-1.0.61-70IJJfOz.js","./DialogContent-1.0.61-Ws3r0VFj.js","./ConfirmDialog-1.0.61-BrxkBu_y.js","./TableHead-1.0.61-urAqheBu.js","./Divider-1.0.61-C8DX248W.js","./FormControlLabel-1.0.61-Bu2IQ4da.js","./Switch-1.0.61-CRYcdQMV.js","./Slider-1.0.61-BGScnB2M.js","./visuallyHidden-1.0.61-Dan1xhjv.js","./TimePicker-1.0.61-CeYQPlC5.js","./useMobilePicker-1.0.61-Dvb2yEEp.js","./ListItem-1.0.61-t1ycs9HY.js","./timeViewRenderers-1.0.61-Cu86BQXJ.js","./DateTimePicker-1.0.61-B22uat3C.js","./Tabs-1.0.61-Bhozjonn.js","./dateViewRenderers-1.0.61-7dkntk_V.js","./DatePicker-1.0.61-CDckGagl.js","./tab-1.0.61-B4c65fpQ.js","./TableContainer-1.0.61-D_jKUjyE.js","./ActionsSettings-1.0.61-NFzvwy8a.js","./TargetEnum-1.0.61-CIW1jlU5.js","./ScopeEnum-1.0.61-B4DDvIDj.js","./index-1.0.61-Cpig8940.js","./settings-1.0.61-BN5quc55.js","./Link-1.0.61-BHBICLVE.js","./CardHeader-1.0.61-gDG-f_-J.js","./settings-1.0.61-DuwCupdk.css","./useTableUpdater-1.0.61-D-pqUshE.js","./useTableCode-1.0.61-BufK_zHB.js","./TableQuery-1.0.61-Ba9mvhDx.css","./TableInfo-1.0.61-BanbR-hv.js"])))=>i.map(i=>d[i]);
import{_ as H}from"./cmJson-1.0.61-BLURwXOE.js";import{j as s}from"./cm-1.0.61-D9ug3d5m.js";import{r as i}from"./redux-1.0.61-CrJ4jvTM.js";import{l as m,w as ze,cN as We,H as je,bL as He,at as ge,b1 as Ke,c6 as be,cM as we,ch as Xe}from"./lib-1.0.61-DoXQcMHD.js";import{M as Ge,e as $,p as Qe,J as Ue,Z as Ze}from"./index-1.0.61-B7tjLD84.js";import{P as Ye,b as ve,c as $e}from"./TabPanel-1.0.61-BtYzUOMH.js";import{q as ye,r as Le,s as De}from"./index-1.0.61-Cpig8940.js";import{G as es,j as ss,B as rs,L as ts}from"./jstoxml-1.0.61-B-nwTQWX.js";import{F as ne}from"./FileSaver.min-1.0.61-CuTNgRON.js";import"./dompurify-1.0.61-DhD2mIk-.js";import{u as os,a as ns,b as is,c as ls}from"./TableQuery-1.0.61-BFTtSjov.js";import{d as cs}from"./ActionsDml-1.0.61-DA32DqSB.js";import{C as ds}from"./ConfirmDialog-1.0.61-BrxkBu_y.js";import{e as Z}from"./notistack-1.0.61-0awN6uG4.js";import{a as us}from"./hooks-1.0.61-Bklk-gZu.js";import{a as ps,u as ms}from"./useRemoveAppFromStore-1.0.61-E72jey9_.js";import"./moment-1.0.61-C5S46NFB.js";import{a as as}from"./AppTheme-1.0.61-CGnMRNDC.js";import{R as Ce}from"./SharedContainer-1.0.61-D5Lln0NA.js";import{u as Te}from"./index-1.0.61-CRnugLvI.js";import{M as fs}from"./Modal-1.0.61-DVFPMIPt.js";import{B as C}from"./Spinner-1.0.61-khi9zO7Q.js";import{I as W}from"./iconBase-1.0.61-C8saXaJ2.js";import{F as ke,T as xs,a as Re}from"./TextField-1.0.61-DyvT2G_W.js";import{A as hs}from"./Autocomplete-1.0.61-CP0PiliY.js";import{C as js}from"./Chip-1.0.61-C6TjQKDp.js";import{B as Y}from"./cjs-1.0.61-D_0erLfe.js";import{P as gs}from"./Menu-1.0.61-D2OtRuzX.js";import{F as _}from"./FormControlLabel-1.0.61-Bu2IQ4da.js";import{C as bs}from"./Checkbox-1.0.61-BlN5bjuH.js";import{R as ws}from"./RadioGroup-1.0.61-BZHJMWN9.js";import{R as A}from"./Radio-1.0.61-BXMcBwcB.js";import{F as Se}from"./FallbackSpinner-1.0.61-s3WTN65t.js";import{u as vs}from"./useAppFunctions-1.0.61-EdKk0_Mu.js";import"./vendor-1.0.61-CN03Eozo.js";import"./rehyperaw-1.0.61-AkovKNCK.js";import"./markdown-1.0.61-6nAzZWly.js";import"./loglevel-1.0.61-BZ7XahX3.js";import"./lodash-1.0.61-C8OpKhUs.js";import"./Typography-1.0.61-Cg0Css-P.js";import"./ButtonBase-1.0.61-BqsrQx8o.js";import"./useEnhancedEffect-1.0.61-CX4-xj9Z.js";import"./ThemeProvider-1.0.61-4HOD8y6D.js";import"./InputAdornment-1.0.61-23wkGu1k.js";import"./getThemeProps-1.0.61-OfsHdeDz.js";import"./Select-1.0.61-DmroHcG5.js";import"./createSvgIcon-1.0.61-DDgmYdEo.js";import"./jstoxml-1.0.61-DkGlThlH.js";import"./Tooltip-1.0.61-De3BL3Jg.js";import"./SanitizeComponent-1.0.61-jz3CtJfW.js";import"./index-1.0.61-Cpc7oUnN.js";import"./index-1.0.61-LP991tft.js";import"./tanstack-1.0.61-ncdkBwIj.js";import"./index.esm-1.0.61-Dhj7A6Yv.js";import"./Stack-1.0.61-CNGwl0k7.js";import"./Collapse-1.0.61-Cww0NnSm.js";import"./AlertTitle-1.0.61-hpo1u3Vv.js";import"./Close-1.0.61-CiuKDfYz.js";import"./MenuItem-1.0.61-Bmr1xWyp.js";import"./TableRow-1.0.61-70IJJfOz.js";import"./DialogContent-1.0.61-Ws3r0VFj.js";import"./ListItemIcon-1.0.61-P8epLVMP.js";import"./TableHead-1.0.61-urAqheBu.js";import"./Divider-1.0.61-C8DX248W.js";import"./Switch-1.0.61-CRYcdQMV.js";import"./SwitchBase-1.0.61-C2xa6JFZ.js";import"./Slider-1.0.61-BGScnB2M.js";import"./visuallyHidden-1.0.61-Dan1xhjv.js";import"./TimePicker-1.0.61-CeYQPlC5.js";import"./useMobilePicker-1.0.61-Dvb2yEEp.js";import"./ListItem-1.0.61-t1ycs9HY.js";import"./timeViewRenderers-1.0.61-Cu86BQXJ.js";import"./DateTimePicker-1.0.61-B22uat3C.js";import"./Tabs-1.0.61-Bhozjonn.js";import"./dateViewRenderers-1.0.61-7dkntk_V.js";import"./DatePicker-1.0.61-CDckGagl.js";import"./RestApi-1.0.61-DdTZ_pIc.js";import"./tab-1.0.61-B4c65fpQ.js";import"./TableContainer-1.0.61-D_jKUjyE.js";import"./AdminTheme-1.0.61-D8bUxwpM.js";import"./ActionsSettings-1.0.61-NFzvwy8a.js";import"./TargetEnum-1.0.61-CIW1jlU5.js";import"./ScopeEnum-1.0.61-B4DDvIDj.js";import"./settings-1.0.61-BN5quc55.js";import"./Link-1.0.61-BHBICLVE.js";import"./CardHeader-1.0.61-gDG-f_-J.js";import"./useTableUpdater-1.0.61-D-pqUshE.js";import"./DynamicModeEnum-1.0.61-BXuL5kgA.js";import"./useFormDetails-1.0.61-677sicqv.js";import"./useChartSettings-1.0.61-BIp9UVZM.js";import"./useLocaleUd-1.0.61-DEEqF_bH.js";import"./Languages-1.0.61-BxgPwugF.js";import"./useTableCode-1.0.61-BufK_zHB.js";import"./useTableColumnOrder-1.0.61-Ds81s_GP.js";import"./useLocaleMrt-1.0.61-C3Pa4C9e.js";import"./useStoreFormSettings-1.0.61-CgHnNhxx.js";import"./useScreenSize-1.0.61-B4FX7-PC.js";import"./useMetadata-1.0.61-CVl9oDgw.js";import"./dayjs.min-1.0.61-21Xi_c_9.js";import"./StoreTypeEnum-1.0.61-Tot-ESpR.js";import"./main-1.0.61.js";const ys=(j,p,o,d,f,n,x)=>{const v=os(j),b=i.useMemo(()=>null,[o,v,x]);return m.debug("aggregates",b),b},Cs=({openSelection:j,setOpenSelection:p,appLanguage:o,columnLabels:d,availableColumns:f,selectedColumns:n,setSelectedColumns:x})=>{const v=Te("(max-width:900px)"),b=Te("(max-width:600px)");return s.jsx(fs,{open:j,onClose:()=>{p(!1)},children:s.jsxs(C,{sx:{position:"absolute",top:"25%",left:"50%",transform:"translate(-50%, -50%)",width:b?"80vw":v?"70vw":"60vw",maxWidth:"700px",bgcolor:"background.paper",boxShadow:24,borderRadius:"4px",p:4},children:[s.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"-20px"},children:[s.jsx("h3",{children:o.selectFromList}),s.jsx(W,{onClick:()=>{p(!1)},children:s.jsx(Ge,{})})]}),s.jsx(ke,{fullWidth:!0,children:s.jsx(hs,{multiple:!0,options:f,value:n,disableCloseOnSelect:!0,getOptionLabel:h=>d[h],onChange:(h,O)=>{x(O),h.stopPropagation()},renderInput:h=>s.jsx(xs,{...h}),renderTags:(h,O)=>h.map((w,B)=>{const{key:M,...I}=O({index:B});return s.jsx(js,{variant:"outlined",label:d[w],...I},M)})})})]})})},Ts=({table:j,appId:p,metaData:o,bulkActions:d,tableStore:f,appLanguage:n,locale:x,refetch:v,componentWidth:b,toggleAllRows:h,aggr_tableAggregations:O,aggr_data:w,aggr_lookupColumns:B,aggr_lookups:M,aggr_tableColumns:I})=>{m.debug(p,o,d);const K=us(),X=f.table,T=f.columns,L=ps(p);ns(p);const D=ms(),[ee]=i.useState(f.table.clientSideProcessing);ys(p,O,w,L,B,M,I);const G=r=>V.map(e=>{const t={};for(let l=0;l<a.length;l++)e[g[a[l]]]===null?r==="csv"?t[g[a[l]]]="":t[g[a[l]]]=null:be(we(o,a[l]))==="number"?t[g[a[l]]]=Number(e[g[a[l]]]):t[g[a[l]]]=e[g[a[l]]];return t}),N=()=>{var r,e,t;return(r=o==null?void 0:o.src)!=null&&r.app_id?"ppBulkAction-"+o.src.app_id+"-"+o.src.cnt_id:(e=o==null?void 0:o.src)!=null&&e.dbs&&((t=o==null?void 0:o.src)!=null&&t.tbl)?"ppBulkAction-"+o.src.dbs+"-"+o.src.tbl:null},[S,ie]=i.useState(()=>{try{const r=localStorage.getItem("ppBulkAction-pdforientation");if(r!==null)return r}catch(r){m.debug(r)}return"landscape"}),[se,re]=i.useState(()=>{try{const r=localStorage.getItem("ppBulkAction-pdfstyle");if(r!==null)return r}catch(r){m.debug(r)}return"striped"}),Q=i.useMemo(()=>{if(d.select!==void 0)return"select";let r;return Object.keys(d).map(e=>{var t;d[e]===!0&&((t=f.state.permissions.bulkActions)==null?void 0:t[e])!==!1&&(e==="pdf"||e==="excel"||r===void 0&&(r=e))}),r},[]),[c,q]=i.useState(Q),[U,le]=i.useState(!1),ce=r=>{var e;return r==="delete"&&((e=o==null?void 0:o.privs)==null?void 0:e.delete)&&!ge(o)&&(d==null?void 0:d.delete)===!0&&X.transactions.delete&&f.state.permissions.delete!==!1||r!=="delete"&&d[r]===!0};i.useEffect(()=>{if(!ce(c)){let r=null;for(let e in d)ce(e)&&r===null&&(r=e);q(r??"")}},[d]);const _e=i.useMemo(()=>ze(),[]),y=is(p),P=i.useMemo(()=>{const r={};return T.filter(e=>e.lookup!==void 0&&y!==void 0&&y[e.columnName]!==void 0).map(e=>{var t;if(y!==void 0&&y[e.columnName]!==void 0){const l=[];for(const u in y[e.columnName]){const F={key:u,value:Array.isArray(y[e.columnName][u])?y[e.columnName][u].join((t=e.lookup)==null?void 0:t.delimiter):y[e.columnName][u]};l.push(F)}r[e.columnName]=l}}),r},[y,T]);m.debug("lookupColumns",P);const E=i.useMemo(()=>{const r={};return T.filter(e=>e.computedField!==void 0).map(e=>{r[e.columnName]=e.computedField}),r},[T]);m.debug(E);const g=i.useMemo(()=>{const r={};return T.map(e=>{E[e.columnName]?r[e.columnName]=E[e.columnName].label:r[e.columnName]=e.columnLabel}),r},[E,T]);m.debug(g);const Oe=(r,e)=>{if(P!==void 0&&P[r]!==void 0){const t=P[r].filter(l=>l.key===e);if(Array.isArray(t)&&t.length===1)return t[0].value}return e},te=j.getAllColumns(),R=j.getSelectedRowModel().rows,k=i.useMemo(()=>te.filter(r=>r.id!=="mrt-row-actions"&&r.id!=="mrt-row-select"&&r.id!=="mrt-row-expand").map(r=>r.id),[]);m.debug(k);const de=i.useMemo(()=>k.map(r=>{const e=We(o,r);if(e===null)return 20;if(e.indexOf("(")!==-1){let t=e.substring(e.indexOf("(")+1);return t.indexOf(")")!==-1&&(t=t.substring(0,t.indexOf(")"))),t.indexOf(".")!==-1&&(t=t.substring(0,t.indexOf("."))),t.indexOf(",")!==-1&&(t=t.substring(0,t.indexOf(","))),Number(t)}return null}),[k]);m.debug(de);const[ue,Os]=i.useState(()=>{const r=N();if(r!==null)try{const e=localStorage.getItem(r+"-wrapped-columns");if(e!==null)return JSON.parse(e)}catch(e){m.debug(e)}return k.filter((e,t)=>(de[t]??99)<=20)});m.debug(ue);const pe=i.useMemo(()=>{const r=N();if(r!==null)try{const e=localStorage.getItem(r);if(e!==null)return JSON.parse(e)}catch(e){m.debug(e)}return k},[k]);m.debug(pe);const[a,Ne]=i.useState(pe);m.debug(a);const V=R.map(r=>{const e={};return te.map(t=>{t.id!=="mrt-row-actions"&&t.id!=="mrt-row-select"&&t.id!=="mrt-row-expand"&&(P!==void 0&&P[t.id]!==void 0?e[g[t.id]]=Oe(t.id,r.getValue(t.id)):E[t.id]||(e[g[t.id]]=r.getValue(t.id)))}),e});m.debug(V);const me=R.map(r=>{const e={};return te.map(t=>{t.id!=="mrt-row-actions"&&t.id!=="mrt-row-select"&&t.id!=="mrt-row-expand"&&E[t.id]===void 0&&(e[t.id]=r.getValue(t.id))}),e});m.debug(me);const J=()=>{var r,e;return(o==null?void 0:o.src)===void 0?p:o.src.app_id&&((e=(r=o==null?void 0:o.app)==null?void 0:r.app[0])==null?void 0:e.app_title)!==""?o.app.app[0].app_title:o.src.dbs?o.src.tbl:p},ae=es({filename:J(),fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),[Pe,Ns]=i.useState(()=>{const r=N();if(r!==null)try{const e=localStorage.getItem(r+"-pdf-title");if(e!==null)return e}catch(e){m.debug(e)}return J()});m.debug("pdfTitle",Pe);const Ee=async()=>{},Fe=()=>{const r=rs(ae)(G("csv"));ts(ae)(r)},Ae=()=>{ne(new Blob([JSON.stringify(G("json"))],{type:"text/json;charset=utf-8"}),J()+".json")};i.useRef();const Be=()=>{const r=R.map(t=>{const l={};for(let u=0;u<a.length;u++)t.original[a[u]]!==void 0&&(l[a[u]]=t.original[a[u]]??"");return{row:l}}),e=ss.toXML({table:r});ne(new Blob([e],{type:"text/plain;charset=utf-8"}),J()+".xml")},Me=()=>{const r=Ke(p);m.debug(r);let e="insert into "+r.tbl+" (";Object.keys(R[0].original).map(t=>{e+=t+","}),e=e.slice(0,-1)+") values ";for(let t=0;t<V.length;t++){const l=V[t];e+="(";for(const u in l){const F=be(we(o,u));l[u]===null?e+="null,":F==="number"?e+=l[u]+",":e+="'"+l[u]+"',"}e=e.slice(0,-1),e+="),"}e=e.slice(0,-1)+`;
`,ne(new Blob([e],{type:"text/plain;charset=utf-8"}),J()+".sql")},Ie=()=>{K(je({appId:p,property:{isRowCountUpdated:!0}}));for(let r=0;r<V.length;r++){const e=Xe(o,me[r]);cs(p,e,t=>{var l;if(t!=null&&t.code&&(t!=null&&t.message)){let u=t.code;switch(((l=o==null?void 0:o.table_info)==null?void 0:l.engine)==="CONNECT"&&u==="info"&&(u="ok"),u){case"ok":Z(n.deletedSuccessful,{variant:"success"}),v();break;default:console.error(t),Z(t.message??n.invalidResponse,{variant:"error"})}}else console.error(t),Z(n.invalidResponse,{variant:"error"})},t=>{console.error("error",t),Z(t??n.invalidResponse,{variant:"error"})})}j.setRowSelection({})},qe=()=>null,Ve=()=>null,[Ps,Es]=i.useState(0),[Fs,As]=i.useState(0),[Je,fe]=i.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx(Ye,{variant:"popover",popupId:_e,children:r=>{var e,t,l,u,F,xe,he;return s.jsxs(s.Fragment,{children:[b<900?s.jsx($,{title:n.bulkActions,children:s.jsx(W,{...ve(r),children:s.jsx(ye,{})})}):s.jsx(Y,{variant:"contained",endIcon:s.jsx(ye,{}),...ve(r),children:n.bulkActions}),f.state.relTab===!0&&s.jsx(Y,{variant:"contained",startIcon:s.jsx(Qe,{}),sx:{marginLeft:"10px"},onClick:()=>{K(je({appId:p,property:{isRelTabOpen:!1}})),setTimeout(()=>{D(p)},1500)},children:n.back}),s.jsx(gs,{...$e(r),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)"},children:s.jsxs(C,{sx:{display:"grid",gap:"20px",padding:"20px"},children:[ee===!0?s.jsx(s.Fragment,{children:R.length===0&&s.jsxs(C,{sx:{textAlign:"center",display:"grid",gridTemplateColumns:"auto auto",alignItems:"center",gap:"40px"},children:[s.jsx(Re,{children:n.noRowsSelected}),s.jsx(ke,{children:s.jsx(_,{control:s.jsx(bs,{className:"pp-checkbox",checked:R.length>0,onChange:()=>{h()}}),label:s.jsx(C,{children:n.selectAll})})})]})}):s.jsx(s.Fragment,{children:R.length===0&&s.jsx(C,{sx:{textAlign:"center"},children:s.jsx(Re,{children:n.noRowsSelected})})}),s.jsxs(ws,{value:c,onChange:(z,oe)=>{q(oe),z.stopPropagation()},children:[qe(),d.csv&&((e=f.state.permissions.bulkActions)==null?void 0:e.csv)!==!1&&s.jsx(_,{value:"csv",label:n.exportToCsv,control:s.jsx(A,{})}),d.json&&((t=f.state.permissions.bulkActions)==null?void 0:t.json)!==!1&&s.jsx(_,{value:"json",label:n.exportToJson,control:s.jsx(A,{})}),Ve(),d.xml&&((l=f.state.permissions.bulkActions)==null?void 0:l.xml)!==!1&&s.jsx(_,{value:"xml",label:n.exportToXml,control:s.jsx(A,{})}),d.sql&&!He(p)&&((u=f.state.permissions.bulkActions)==null?void 0:u.sql)!==!1&&s.jsx(_,{value:"sql",label:n.exportToSql,control:s.jsx(A,{})}),((F=o==null?void 0:o.privs)==null?void 0:F.delete)&&!ge(o)&&(d==null?void 0:d.delete)===!0&&X.transactions.delete&&f.state.permissions.delete!==!1&&((xe=f.state.permissions.bulkActions)==null?void 0:xe.delete)!==!1&&s.jsx(_,{value:"delete",label:n.deletePermanently,control:s.jsx(A,{})}),(d.select??!1)&&((he=f.state.permissions.bulkActions)==null?void 0:he.select)!==!1&&s.jsx(_,{value:"select",label:n.addSelectedRow,control:s.jsx(A,{})})]}),s.jsxs(C,{sx:{display:"grid",gridTemplateColumns:c==="pdf"||c==="csv"||c==="json"||c==="excel"||c==="xml"?"1fr auto":"1fr",gap:"10px"},children:[s.jsx(Y,{variant:"contained",onClick:()=>{if(c==="pdf"||c==="csv"||c==="json"||c==="excel"||c==="xml"){const z=N();if(z!==null)try{localStorage.setItem(z,JSON.stringify(a)),localStorage.setItem(z+"-wrapped-columns",JSON.stringify(ue))}catch(oe){m.debug(oe)}}switch(c){case"pdf":Ee();break;case"csv":Fe();break;case"json":Ae();break;case"excel":break;case"xml":Be();break;case"sql":Me();break;case"delete":le(!0);break}},disabled:R.length===0||(c==="pdf"||c==="csv"||c==="json"||c==="excel"||c==="xml")&&(a==null?void 0:a.length)===0,children:n.apply}),(c==="pdf"||c==="csv"||c==="json"||c==="excel"||c==="xml")&&s.jsx($,{title:x.showHideColumns,children:s.jsx(W,{onClick:()=>{fe(!0)},children:s.jsx(Ue,{})})})]})]})})]})}}),s.jsx(ds,{title:n.deleteRowsTitle,message:n.deleteRowsMessage,open:U,setOpen:le,onConfirm:()=>{Ie()},theme:as}),s.jsx(Cs,{openSelection:Je,setOpenSelection:fe,appLanguage:n,columnLabels:g,availableColumns:k,selectedColumns:a,setSelectedColumns:Ne})]})},Rs=i.lazy(()=>H(()=>import("./TableMap-1.0.61-B03_NejS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url)),Ss=i.lazy(()=>H(()=>import("./TableChart-1.0.61-BQVhRBtp.js"),__vite__mapDeps([27,2,3,4,11,12,13,14,5,6,7,8,15,16,17,18,19,20,21,22,23,24,25,28,29,30,31,32,33,34,1,9,10,35,36,37,38,39,40,41,42,26,43,44,45,46,47,48,49]),import.meta.url)),ks=i.lazy(()=>H(()=>import("./TableToolbarInlineEditingButton-1.0.61-DU3VWgPp.js"),__vite__mapDeps([50,2,3,4,51,1,5,6,7,8,9,10,52,38,26,14,53,54,40,23,55,41,56,36,37,43,44,17,16,35,39,57,13,15,58,59,21,20,22,24,60,61,62,63,64,65,66,67,68,69,30,70,71,25,72,12,18,19,73,74,75,49,76,77,48,31,32,78,79,80,33,81,82,83,84,47,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,11,103,104,105,106,46,42,107]),import.meta.url));i.lazy(()=>H(()=>import("./SharedContainer-1.0.61-D5Lln0NA.js").then(j=>j.D),__vite__mapDeps([52,1,2,3,4,5,6,7,8,9,10,38,26,14,53,54,40,23,55,41,56,36,37,43,44,17,16,35,39,57,13,15,58,59,21,20,22,24,60,61,62,63,64,65,66]),import.meta.url));const _s=i.lazy(()=>H(()=>import("./TableInfo-1.0.61-BanbR-hv.js"),__vite__mapDeps([108,2,3,4,5,6,7,8,31,14,15,16,18,19,20,21,22,23,24,25]),import.meta.url)),_t=({table:j,metaData:p,appId:o,bulkActions:d,hasBulkActions:f,tableStore:n,appLanguage:x,locale:v,refetch:b,showForm:h,appSettings:O,componentWidth:w,toggleAllRows:B,globalFilter:M,columnFilters:I,pagination:K,rowCount:X,largeTableSupport:T,aggr_tableAggregations:L,aggr_data:D,aggr_lookupColumns:ee,aggr_lookups:G,aggr_tableColumns:N})=>{var se,re,Q,c;const S=n;vs(o),ls(o);const ie=()=>n.columns.filter(q=>{var U;return q.inlineEditing===!0&&((U=n.state.permissions.inlineEditing)==null?void 0:U[q.columnName])!==!1}).length>0;return s.jsxs(s.Fragment,{children:[s.jsxs(C,{sx:{display:"flex",flexWrap:"nowrap",gap:w<600?"0":"8px",alignItems:"center",whiteSpace:"nowrap"},className:"pp-toolbar-buttons",children:[s.jsx($,{arrow:!0,title:x.refresh,className:"ppToolbarRefreshIcon",children:s.jsx(W,{onClick:()=>b(),children:s.jsx(Ze,{})})}),((re=(se=S==null?void 0:S.table)==null?void 0:se.transactions)==null?void 0:re.insert)&&((c=(Q=S==null?void 0:S.state)==null?void 0:Q.permissions)==null?void 0:c.insert)!==!1&&s.jsx(s.Fragment,{children:w<900?s.jsx($,{title:x.newRow,children:s.jsx(W,{onClick:()=>{h(null,Ce.INSERT)},children:s.jsx(Le,{})})}):s.jsx(Y,{variant:"contained",startIcon:s.jsx(De,{}),onClick:()=>{h(null,Ce.INSERT)},children:x.newRow})}),f&&s.jsx(Ts,{table:j,appId:o,metaData:p,bulkActions:d,tableStore:n,appLanguage:x,locale:v,refetch:b,componentWidth:w,toggleAllRows:B,aggr_tableAggregations:L,aggr_data:D,aggr_lookupColumns:ee,aggr_lookups:G,aggr_tableColumns:N}),n.table.maps.enabled&&!0&&s.jsx(i.Suspense,{children:s.jsx(Rs,{appId:o,componentWidth:w,tableStore:n,appLanguage:x})}),n.table.charts.enabled===!0&&(n.table.charts.interactive===!0||!0)&&s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(Ss,{appId:o,componentWidth:w,tableStore:n,metaData:p,appLanguage:x})}),n.table.inlineEditing.addColumnButton===!1&&ie()&&s.jsx(i.Suspense,{fallback:s.jsx(Se,{}),children:s.jsx(ks,{appId:o,metaData:p,locale:v,appLanguage:x,componentWidth:w,refetch:b})}),!1]}),n.table.pagination.position!=="bottom"&&s.jsx(C,{sx:{position:"absolute",top:"64px",left:"1.5rem"},children:s.jsx(i.Suspense,{children:s.jsx(_s,{globalFilter:M,columnFilters:I,pagination:K,locale:v,rowCount:X,largeTableSupport:T})})})]})};export{_t as default};
