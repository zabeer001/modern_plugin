const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Alert-1.0.61-BDxavmCg.js","./cm-1.0.61-D9ug3d5m.js","./redux-1.0.61-CrJ4jvTM.js","./vendor-1.0.61-CN03Eozo.js","./index-1.0.61-Cpig8940.js","./iconBase-1.0.61-C8saXaJ2.js","./Typography-1.0.61-Cg0Css-P.js","./lib-1.0.61-DoXQcMHD.js","./loglevel-1.0.61-BZ7XahX3.js","./lodash-1.0.61-C8OpKhUs.js","./moment-1.0.61-C5S46NFB.js","./ButtonBase-1.0.61-BqsrQx8o.js","./useEnhancedEffect-1.0.61-CX4-xj9Z.js","./AlertTitle-1.0.61-hpo1u3Vv.js","./createSvgIcon-1.0.61-DDgmYdEo.js","./Close-1.0.61-CiuKDfYz.js"])))=>i.map(i=>d[i]);
import{_ as R}from"./cmJson-1.0.61-BLURwXOE.js";import{j as t}from"./cm-1.0.61-D9ug3d5m.js";import{r as c}from"./redux-1.0.61-CrJ4jvTM.js";import{u as g,a as M}from"./hooks-1.0.61-Bklk-gZu.js";import{l as u,A as z,V as L,W,X as H,Y as I,S as V,w as G,H as U,Z as X,f as Y,_ as Z,$}from"./lib-1.0.61-DoXQcMHD.js";import{A as q}from"./AppContainerSelector-1.0.61-CxQSQFA9.js";import{B as x,S as J}from"./Spinner-1.0.61-khi9zO7Q.js";import{u as K,a as Q}from"./useChartSettings-1.0.61-BIp9UVZM.js";import{u as v}from"./useMetadata-1.0.61-CVl9oDgw.js";import{u as D}from"./useRemoveAppFromStore-1.0.61-E72jey9_.js";import{u as ee,B as te,C as se}from"./useFormDetails-1.0.61-677sicqv.js";import{e as y,g as pe,C as oe,A as re,T as ne,M as ie}from"./index-1.0.61-B7tjLD84.js";import{D as _}from"./DynamicModeEnum-1.0.61-BXuL5kgA.js";import{I as h}from"./iconBase-1.0.61-C8saXaJ2.js";import{M as ae}from"./MenuItem-1.0.61-Bmr1xWyp.js";import{M as le}from"./Menu-1.0.61-D2OtRuzX.js";import{u as ce}from"./useTableSettings-1.0.61-C890ZGxM.js";import{u as me}from"./useStoreFormSettings-1.0.61-CgHnNhxx.js";import{u as ue,A as de}from"./AppTheme-1.0.61-CGnMRNDC.js";import{T as xe}from"./ThemeProvider-1.0.61-4HOD8y6D.js";import{T as fe}from"./Typography-1.0.61-Cg0Css-P.js";import"./vendor-1.0.61-CN03Eozo.js";import"./rehyperaw-1.0.61-AkovKNCK.js";import"./markdown-1.0.61-6nAzZWly.js";import"./loglevel-1.0.61-BZ7XahX3.js";import"./lodash-1.0.61-C8OpKhUs.js";import"./moment-1.0.61-C5S46NFB.js";import"./FallbackSpinner-1.0.61-s3WTN65t.js";import"./useLoadAppMetaData-1.0.61-CNAzEtPD.js";import"./ActionsApp-1.0.61-CDhPoAR0.js";import"./RestApi-1.0.61-DdTZ_pIc.js";import"./notistack-1.0.61-0awN6uG4.js";import"./StoreTypeEnum-1.0.61-Tot-ESpR.js";import"./MapPrepare-1.0.61-DrTZp18T.js";import"./useLocaleUd-1.0.61-DEEqF_bH.js";import"./Languages-1.0.61-BxgPwugF.js";import"./ButtonBase-1.0.61-BqsrQx8o.js";import"./useEnhancedEffect-1.0.61-CX4-xj9Z.js";import"./Modal-1.0.61-DVFPMIPt.js";import"./index-1.0.61-CRnugLvI.js";import"./getThemeProps-1.0.61-OfsHdeDz.js";const ge=()=>{const e=g(p=>p.appApps.modes);return u.debug("appModes",e),e},he=({appRootId:e,appId:p,appDbId:n,isVisible:a,fullScreen:o})=>{const[s,l]=c.useState(!1);return c.useEffect(()=>{a&&!s&&l(!0)},[a]),s?t.jsx(x,{className:"pp-apps-root"+(a?"":" pp-element-hide"),sx:{"& .pp-app-container .pp-component header.pp-header":{margin:0,visibility:"hidden",position:"absolute",left:-99999,top:-99999}},children:t.jsx(q,{appId:p,appDbId:n,fullScreen:o,appRootId:e})}):null},Ae=e=>{const p=g(n=>n.appApps.apps[e]!==void 0?n.appApps.apps[e].activeAppId??n.appApps.apps[e].apps[0]:0);return u.debug("activeAppId",p,e),p},je=e=>{const p=g(n=>n.appApps.modes[e]);return u.debug("appMode",p),p},Se=({appId:e})=>{const p=M(),n=ee(e),a=v(e),o=je(e);return t.jsx(y,{title:t.jsx(te,{details:n,mode:o==null?void 0:o.mode}),className:"pp-builder-button",children:t.jsx(h,{sx:{color:"inherit",padding:0},onClick:()=>{var s,l;((l=(s=a==null?void 0:a.app)==null?void 0:s.app[0])==null?void 0:l.app_type)==z.CHART?p(L({appId:e})):(o==null?void 0:o.mode)===_.FORM?p(W({appId:e})):p(H({appId:e}))},children:t.jsx(pe,{})})})},be=({appDbId:e,appTitle:p,setActiveApp:n,handleClose:a})=>t.jsx(ae,{onClick:()=>{n(e),a()},children:t.jsx("span",{children:p})}),Te=({apps:e,setActiveApp:p})=>{const[n,a]=c.useState(null),o=!!n,s=r=>{a(r.currentTarget),r.stopPropagation()},l=()=>{a(null)};return t.jsxs(x,{sx:{position:"relative"},children:[t.jsx(h,{sx:{color:"inherit",padding:0},onClick:s,children:t.jsx(oe,{})}),t.jsxs(le,{anchorEl:n,open:o,onClose:l,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{marginTop:"8px","& ul":{padding:"0 !important"},"& ul li":{padding:"12px 24px 12px 18px !important"}},children:[...e.apps.map(r=>e.titles[r]===void 0?null:t.jsx(be,{appDbId:r,appTitle:e.titles[r],setActiveApp:p,handleClose:l}))]})]})},Ce=c.lazy(()=>R(()=>import("./Alert-1.0.61-BDxavmCg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url)),ut=({appId:e})=>{var S,b,T,C;u.debug(e);const p=M(),n=D(),a=se(),o=I.getSelectors().selectApps(V.getState().appApps,e),s=c.useMemo(()=>{const i={};return Array.isArray(o.apps)&&o.apps.length>0&&o.apps.map(f=>{i[f]=G()}),i},[]);u.debug(s);const l=K(e),r=v(e),F=c.useMemo(()=>{var i,f;return((f=(i=r==null?void 0:r.app)==null?void 0:i.app[0])==null?void 0:f.app_title)!==""?r.app.app[0].app_title:"WP Data Access"},[]),m=Ae(e),E=i=>{p($({appId:e,activeAppId:i}))};Q(s[m]);const B=ce(s[m]),O=me(s[m]),A=ue(s[m]),P=de(A,B,O),[d,Me]=c.useState(((T=window.PP_APP_CONFIG[(b=(S=r==null?void 0:r.app)==null?void 0:S.app[0])==null?void 0:b.app_id])==null?void 0:T.appFullscreen)===!0);u.debug("appFullScreen",d);const j=ge();c.useEffect(()=>{u.debug("setFullScreen",s,d),Object.keys(s).map(i=>{p(U({appId:s[Number(i)],property:{fullScreen:d??!1}}))})},[j,d]);const k=((C=j[s[m]])==null?void 0:C.mode)??_.TABLE;u.debug("mode",k);let w={};const N=()=>null;return o===void 0&&Object.keys(s).length===0?t.jsx(J,{}):Object.keys(s).length===0?t.jsx(c.Suspense,{children:t.jsx(Ce,{severity:"error",message:"This app contains no detail apps.",close:!1})}):t.jsx(xe,{theme:P,children:t.jsxs(x,{className:"pp-apps-container",sx:{...d?w:{},"& .pp-element-hide":{visibility:"hidden",position:"absolute",left:-99999,top:-99999}},children:[t.jsx(re,{className:"pp-apps-header",position:"relative",sx:{margin:"0 0 5px 0"},children:t.jsxs(ne,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs(x,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center",gap:"5px","& span":{whiteSpace:"nowrap",fontSize:"18px",lineHeight:"18px",fontWeight:"bold"},"& span.pp-toolbar-title":{minWidth:0,textOverflow:"ellipsis",overflow:"hidden",marginRight:"10px"}},children:[t.jsx("span",{children:t.jsx(Te,{apps:o,setActiveApp:E})}),t.jsxs(fe,{className:"pp-toolbar-title unselectable",variant:"subtitle1",color:A.customContrastColor,sx:{padding:0},children:[F," - ",o.titles[m]]})]}),t.jsxs(x,{sx:{display:"flex",gap:0,justifyContent:"center",alignItems:"center"},children:[X(r)&&t.jsx(Se,{appId:s[m]}),N(),(r==null?void 0:r.isExploring)&&t.jsx(y,{title:l.close,children:t.jsx(h,{sx:{color:"inherit",padding:0},onClick:()=>{p(Y({isActive:!1,appDbId:0})),a(e),n(e),p(Z()),Object.keys(s).map(i=>{a(s[i]),n(s[i])})},children:t.jsx(ie,{})})})]})]})}),...o.apps.map(i=>t.jsx(he,{appRootId:e,appId:s[i],appDbId:i,isVisible:i===m,fullScreen:d}))]})})};export{ut as default};
