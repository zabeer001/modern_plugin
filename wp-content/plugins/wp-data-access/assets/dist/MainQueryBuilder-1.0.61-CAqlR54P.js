const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Alert-1.0.61-BDxavmCg.js","./cm-1.0.61-D9ug3d5m.js","./redux-1.0.61-CrJ4jvTM.js","./vendor-1.0.61-CN03Eozo.js","./index-1.0.61-Cpig8940.js","./iconBase-1.0.61-C8saXaJ2.js","./Typography-1.0.61-Cg0Css-P.js","./lib-1.0.61-DoXQcMHD.js","./loglevel-1.0.61-BZ7XahX3.js","./lodash-1.0.61-C8OpKhUs.js","./moment-1.0.61-C5S46NFB.js","./ButtonBase-1.0.61-BqsrQx8o.js","./useEnhancedEffect-1.0.61-CX4-xj9Z.js","./AlertTitle-1.0.61-hpo1u3Vv.js","./createSvgIcon-1.0.61-DDgmYdEo.js","./Close-1.0.61-CiuKDfYz.js","./QueryBuilder-1.0.61-CHDCBAvB.js","./cmJson-1.0.61-BLURwXOE.js","./rehyperaw-1.0.61-AkovKNCK.js","./markdown-1.0.61-6nAzZWly.js","./index-1.0.61-B7tjLD84.js","./ThemeProvider-1.0.61-4HOD8y6D.js","./Modal-1.0.61-DVFPMIPt.js","./notistack-1.0.61-0awN6uG4.js","./ConfirmDialog-1.0.61-BrxkBu_y.js","./cjs-1.0.61-D_0erLfe.js","./AdminTheme-1.0.61-D8bUxwpM.js","./DialogContent-1.0.61-Ws3r0VFj.js","./hooks-1.0.61-Bklk-gZu.js","./StartQueryBuilder-1.0.61-DpIXLFtV.js","./useViewHeight-1.0.61-5KT6Wm-M.js","./RestApi-1.0.61-DdTZ_pIc.js","./Spinner-1.0.61-khi9zO7Q.js","./TabPanel-1.0.61-BtYzUOMH.js","./InputAdornment-1.0.61-23wkGu1k.js","./getThemeProps-1.0.61-OfsHdeDz.js","./Select-1.0.61-DmroHcG5.js","./Menu-1.0.61-D2OtRuzX.js","./SanitizeComponent-1.0.61-jz3CtJfW.js","./dompurify-1.0.61-DhD2mIk-.js","./TextField-1.0.61-DyvT2G_W.js","./FormControlLabel-1.0.61-Bu2IQ4da.js","./Checkbox-1.0.61-BlN5bjuH.js","./SwitchBase-1.0.61-C2xa6JFZ.js","./Divider-1.0.61-C8DX248W.js","./MenuItem-1.0.61-Bmr1xWyp.js","./TabList-1.0.61-CK8HCF5k.js","./Tabs-1.0.61-Bhozjonn.js","./Switch-1.0.61-CRYcdQMV.js","./main-1.0.61-CGp-2hVp.css"])))=>i.map(i=>d[i]);
import{_ as E}from"./cmJson-1.0.61-BLURwXOE.js";import{j as r}from"./cm-1.0.61-D9ug3d5m.js";import{r as t,u as x}from"./redux-1.0.61-CrJ4jvTM.js";import{a as w}from"./AdminTheme-1.0.61-D8bUxwpM.js";import{a as T}from"./hooks-1.0.61-Bklk-gZu.js";import{s as B,a as A}from"./StartQueryBuilder-1.0.61-DpIXLFtV.js";import{l as I}from"./ActionsExplorer-1.0.61-Bj7vTxIj.js";import{D as P}from"./DatabaseTypeEnum-1.0.61-DeJfpW1u.js";import{l as c}from"./lib-1.0.61-DoXQcMHD.js";import{S as Q}from"./Spinner-1.0.61-khi9zO7Q.js";import{T as g}from"./ThemeProvider-1.0.61-4HOD8y6D.js";const q=()=>{const s=T(),[o,m]=t.useState(!1),[i,S]=t.useState(!1),[p,j]=t.useState({databases:[],defaultDatabase:"",wpDatabase:""});return c.debug("databases",p),t.useEffect(()=>{I(a=>{var y;const b=a==null?void 0:a.data,l=a==null?void 0:a.context;c.debug("response",b,l);const d=[];b.map(e=>{d.push({dbs:e.dbs,dbsType:e.dbs_type,pdsDbs:e.pds})}),d.sort((e,u)=>{var D,_,h,L;return((D=e==null?void 0:e.dbs)==null?void 0:D.toLocaleLowerCase())>((_=u==null?void 0:u.dbs)==null?void 0:_.toLocaleLowerCase())?1:((h=u==null?void 0:u.dbs)==null?void 0:h.toLocaleLowerCase())>((L=e==null?void 0:e.dbs)==null?void 0:L.toLocaleLowerCase())?-1:0}),c.debug(d);const f=d.filter(e=>e.dbsType===P.WP),n=f.length===1?f[0].dbs:"";j({databases:d,defaultDatabase:n,wpDatabase:n}),s(B({databases:{databases:d,defaultDatabase:n,wpDatabase:n}})),m(!0),s(A({queryId:((y=l==null?void 0:l.env)==null?void 0:y.id)??0}))},a=>{console.error("error",a),S(!0)})},[]),{isLoaded:o,hasErrors:i,databases:p}},v=x,C=()=>{const s=v(o=>o.sql);return c.debug("queryBuilder",s),s},M=t.lazy(()=>E(()=>import("./Alert-1.0.61-BDxavmCg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url)),O=t.lazy(()=>E(()=>import("./QueryBuilder-1.0.61-CHDCBAvB.js").then(s=>s.Q),__vite__mapDeps([16,17,1,2,3,7,8,9,10,18,19,20,6,11,12,21,22,23,5,24,25,26,27,28,29,30,31,32,33,34,35,36,37,14,4,38,39,40,41,42,43,44,45,46,47,48,49]),import.meta.url)),z=()=>{const s=C(),{isLoaded:o,hasErrors:m}=q(),i=w();return o?m||o&&s.databases.databases.length===0?r.jsx(t.Suspense,{children:r.jsx(M,{severity:"error",message:"Error loading databases",close:!0})}):r.jsx(g,{theme:i,children:r.jsx(t.Suspense,{children:r.jsx(O,{queryBuilderState:s})})}):r.jsx(g,{theme:i,children:r.jsx(Q,{title:"Loading databases..."})})},U=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));export{U as M,C as u};
