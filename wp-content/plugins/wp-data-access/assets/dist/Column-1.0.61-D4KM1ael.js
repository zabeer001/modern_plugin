const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./FieldText-1.0.61-DZQPzjC4.js","./cm-1.0.61-D9ug3d5m.js","./redux-1.0.61-CrJ4jvTM.js","./vendor-1.0.61-CN03Eozo.js","./lib-1.0.61-DoXQcMHD.js","./loglevel-1.0.61-BZ7XahX3.js","./lodash-1.0.61-C8OpKhUs.js","./moment-1.0.61-C5S46NFB.js","./TextField-1.0.61-DyvT2G_W.js","./Typography-1.0.61-Cg0Css-P.js","./ButtonBase-1.0.61-BqsrQx8o.js","./useEnhancedEffect-1.0.61-CX4-xj9Z.js","./Select-1.0.61-DmroHcG5.js","./Menu-1.0.61-D2OtRuzX.js","./ThemeProvider-1.0.61-4HOD8y6D.js","./index-1.0.61-B7tjLD84.js","./Modal-1.0.61-DVFPMIPt.js","./notistack-1.0.61-0awN6uG4.js","./iconBase-1.0.61-C8saXaJ2.js","./createSvgIcon-1.0.61-DDgmYdEo.js","./FieldTextarea-1.0.61-Dji4lDEQ.js","./FieldNumber-1.0.61-DEWmilfo.js","./react-number-format.es-1.0.61-3K4hYgeH.js","./FieldSet-1.0.61-CqdtDTOR.js","./MenuItem-1.0.61-Bmr1xWyp.js","./FieldEnum-1.0.61-DqJYL4VM.js","./EnumTypeEnum-1.0.61-Ws4BsaYD.js","./RadioGroup-1.0.61-BZHJMWN9.js","./Radio-1.0.61-BXMcBwcB.js","./SwitchBase-1.0.61-C2xa6JFZ.js","./FormControlLabel-1.0.61-Bu2IQ4da.js","./FieldDate-1.0.61-KLqretRW.js","./hooks-1.0.61-Bklk-gZu.js","./useLocaleDayJs-1.0.61-CHv6X9Zj.js","./Languages-1.0.61-BxgPwugF.js","./dayjs.min-1.0.61-21Xi_c_9.js","./useMobilePicker-1.0.61-Dvb2yEEp.js","./InputAdornment-1.0.61-23wkGu1k.js","./cjs-1.0.61-D_0erLfe.js","./getThemeProps-1.0.61-OfsHdeDz.js","./index-1.0.61-CRnugLvI.js","./visuallyHidden-1.0.61-Dan1xhjv.js","./DialogContent-1.0.61-Ws3r0VFj.js","./ListItem-1.0.61-t1ycs9HY.js","./Chip-1.0.61-C6TjQKDp.js","./AdapterDayjs-1.0.61-BqcEbIuB.js","./DatePicker-1.0.61-CDckGagl.js","./dateViewRenderers-1.0.61-7dkntk_V.js","./FieldDatetime-1.0.61-Bo9H-kZY.js","./DateTimePicker-1.0.61-B22uat3C.js","./Tabs-1.0.61-Bhozjonn.js","./timeViewRenderers-1.0.61-Cu86BQXJ.js","./Divider-1.0.61-C8DX248W.js","./FieldTime-1.0.61-CEIr5ENw.js","./TimePicker-1.0.61-CeYQPlC5.js","./FieldCheckbox-1.0.61-DqFKC3L2.js","./Checkbox-1.0.61-BlN5bjuH.js","./ColumnWpMedia-1.0.61-DgouDCEJ.js","./index-1.0.61-Cpc7oUnN.js","./useLocaleMrt-1.0.61-C3Pa4C9e.js","./useLocaleUd-1.0.61-DEEqF_bH.js","./RestApi-1.0.61-DdTZ_pIc.js","./Spinner-1.0.61-khi9zO7Q.js","./ColumnHyperlink-1.0.61-D0f2NGqc.js","./FieldDuration-1.0.61-CIMh2g5U.js"])))=>i.map(i=>d[i]);
import{_ as c}from"./cmJson-1.0.61-BLURwXOE.js";import{j as u}from"./cm-1.0.61-D9ug3d5m.js";import{r}from"./redux-1.0.61-CrJ4jvTM.js";import{l as T,bJ as a,cH as Q,cI as ii,o as X,cJ as ei,cK as ri,bz as Y}from"./lib-1.0.61-DoXQcMHD.js";import{l as si}from"./ActionsDml-1.0.61-DA32DqSB.js";import{d as I,a as di,b as pi,c as ui,u as _i}from"./useAppFunctions-1.0.61-EdKk0_Mu.js";import{T as Z}from"./TargetEnum-1.0.61-CIW1jlU5.js";import{i as fi}from"./index-1.0.61-LP991tft.js";import{a as yi,u as ki}from"./hooks-1.0.61-Bklk-gZu.js";import{A as ni}from"./Autocomplete-1.0.61-CP0PiliY.js";import{T as ji}from"./TextField-1.0.61-DyvT2G_W.js";import"./moment-1.0.61-C5S46NFB.js";import"./vendor-1.0.61-CN03Eozo.js";import"./rehyperaw-1.0.61-AkovKNCK.js";import"./markdown-1.0.61-6nAzZWly.js";import"./loglevel-1.0.61-BZ7XahX3.js";import"./lodash-1.0.61-C8OpKhUs.js";import"./RestApi-1.0.61-DdTZ_pIc.js";import"./useMetadata-1.0.61-CVl9oDgw.js";import"./Typography-1.0.61-Cg0Css-P.js";import"./Select-1.0.61-DmroHcG5.js";import"./Menu-1.0.61-D2OtRuzX.js";import"./ThemeProvider-1.0.61-4HOD8y6D.js";import"./useEnhancedEffect-1.0.61-CX4-xj9Z.js";import"./index-1.0.61-B7tjLD84.js";import"./ButtonBase-1.0.61-BqsrQx8o.js";import"./Modal-1.0.61-DVFPMIPt.js";import"./notistack-1.0.61-0awN6uG4.js";import"./iconBase-1.0.61-C8saXaJ2.js";import"./createSvgIcon-1.0.61-DDgmYdEo.js";import"./Close-1.0.61-CiuKDfYz.js";import"./Chip-1.0.61-C6TjQKDp.js";const ti=(p,e)=>({}),Ai=({appId:p,columnName:e,columnValue:f,columnInitialValue:k,columnMetaData:y,storeColumn:i,columnValidation:s,onColumnChange:j,metaData:n,storeForm:b,formMode:t,locale:S,columnEvents:d})=>{var B,q;T.debug(p,e,f,k,y,i,s,n,b,t,S);const W=yi(),l=I(p),[x,h]=r.useState([]);T.debug("lov",x);const[E,O]=r.useState(!1),[H,$]=r.useState(""),[U,v]=r.useState(Array.isArray((B=i.lookup)==null?void 0:B.dynamicConditions)?(q=i.lookup)==null?void 0:q.dynamicConditions.map(A=>({columnName:A.tableColumnName,columnValue:""})):[]);T.debug("conditions",U),r.useEffect(()=>{var A,L;Array.isArray((A=i.lookup)==null?void 0:A.dynamicConditions)&&((L=i.lookup)==null||L.dynamicConditions.map(R=>{l[R.tableColumnName]===void 0&&console.error("Invalid lookup: column "+R.tableColumnName+" in dynamic condition not found.")})),U.length===0&&w()},[i.lookup]);const[N,C]=r.useState(!0);r.useEffect(()=>{var A,L;if(Object.keys(U).length>0){const R=Array.isArray((A=i.lookup)==null?void 0:A.dynamicConditions)?(L=i.lookup)==null?void 0:L.dynamicConditions.map(z=>({columnName:z.lookupColumnName,columnValue:l[z.tableColumnName]??""})):[];if(T.debug(R),!fi(U,R)){const z={};R.length>0&&R.map(g=>{z[g.columnName]=g.columnValue}),T.debug("reloading dynamic lookup",e,R),w(z),v(R),N||W(a({appId:p,columnName:e,columnValue:null})),C(!1)}}},[l]);const w=(A={})=>{var R,z,g,J;const L={};if(Object.keys(l).map(_=>{var P,F;(F=(P=i==null?void 0:i.lookup)==null?void 0:P.defaultWhere)!=null&&F.includes(`{:${_}}`)&&(L[_]=l[_])}),(z=(R=i==null?void 0:i.lookup)==null?void 0:R.defaultWhere)!=null&&z.includes("{:parent.")){let _=Q(p);for(;_!==null;)Object.keys(_.data).map(P=>{var F,K;(K=(F=i==null?void 0:i.lookup)==null?void 0:F.defaultWhere)!=null&&K.includes(`{:parent.${P}}`)&&L[`parent.${P}`]===void 0&&(L[`parent.${P}`]=(_==null?void 0:_.data)[P])}),_=Q(_==null?void 0:_.appId)}si(p,(n==null?void 0:n.useRform)===!0?Z.RFORM:Z.FORM,e,((g=i.lookup)==null?void 0:g.key)??"",((J=i.lookup)==null?void 0:J.value)??"",A,{},_=>{var P,F,K;if(T.debug(_),(_==null?void 0:_.code)==="ok"){if(!((P=i.lookup)!=null&&P.value.includes(",")))h(_.data);else{const M=(F=i.lookup)==null?void 0:F.value.split(","),G=[];for(let V=0;V<_.data.length;V++){const D=M.map(m=>_.data[V][m]).join(((K=i.lookup)==null?void 0:K.delimiter)??"");G.push({key:_.data[V].key,value:D})}h(G)}O(!1),$("")}else O(!0),$(_.message),h([])},_=>{O(!0),$(_),h([])},L)},o=r.useMemo(()=>x.filter(A=>A.key===f)[0]??null,[f,x]);return u.jsx(ni,{multiple:!1,fullWidth:!0,autoHighlight:!0,autoComplete:!1,options:x,getOptionLabel:A=>Array.isArray(A.value)?X(A.value[0]):X(A.value),value:o,onChange:(A,L)=>{L!==null?j(e,L==null?void 0:L.key):j(e,null)},disabled:ii(n,y,i,t),className:i.classNames,renderInput:A=>u.jsx(ji,{error:E,label:y.formLabel,required:y.is_nullable==="NO",...A,variant:ri(),helperText:E?H:ei(i,S.selectEnum),disabled:t===Y.VIEW||t===Y.UPDATE&&(n.primary_key.includes(e)||i.updatable===!1),sx:{"& input":{textAlign:i.alignment}},onBlurCapture:d==null?void 0:d.onBlur,onChangeCapture:d==null?void 0:d.onChange,onClickCapture:d==null?void 0:d.onClick,onDoubleClickCapture:d==null?void 0:d.onDoubleClick,onFocusCapture:d==null?void 0:d.onFocus,onKeyDownCapture:d==null?void 0:d.onKeyDown,onKeyUpCapture:d==null?void 0:d.onKeyUp},A.id)})},xi=(p,e,f,k,y)=>{const i={onBlur:void 0,onChange:void 0,onClick:void 0,onDoubleClick:void 0,onFocus:void 0,onKeyDown:void 0,onKeyUp:void 0};return di(y),pi(),ui(),_i(y),i},hi=p=>{const e=ki(f=>{var k,y;return(y=(k=f.forms[p])==null?void 0:k.state)==null?void 0:y.initialData});return T.debug("initialData",e),e},bi=r.lazy(()=>c(()=>import("./FieldText-1.0.61-DZQPzjC4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]),import.meta.url)),Si=r.lazy(()=>c(()=>import("./FieldTextarea-1.0.61-Dji4lDEQ.js"),__vite__mapDeps([20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]),import.meta.url)),Oi=r.lazy(()=>c(()=>import("./FieldNumber-1.0.61-DEWmilfo.js"),__vite__mapDeps([21,1,2,3,22,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]),import.meta.url)),Li=r.lazy(()=>c(()=>import("./FieldSet-1.0.61-CqdtDTOR.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,24]),import.meta.url)),Ri=r.lazy(()=>c(()=>import("./FieldEnum-1.0.61-DqJYL4VM.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,24,26,27,28,29,30]),import.meta.url)),ci=r.lazy(()=>c(()=>import("./FieldDate-1.0.61-KLqretRW.js"),__vite__mapDeps([31,1,2,3,32,4,5,6,7,33,34,35,36,37,38,9,10,11,39,12,13,14,15,16,17,18,19,40,8,41,42,43,44,45,46,47]),import.meta.url)),Pi=r.lazy(()=>c(()=>import("./FieldDatetime-1.0.61-Bo9H-kZY.js"),__vite__mapDeps([48,1,2,3,32,4,5,6,7,33,34,35,36,37,38,9,10,11,39,12,13,14,15,16,17,18,19,40,8,41,42,43,44,45,49,50,51,24,47,52]),import.meta.url)),li=r.lazy(()=>c(()=>import("./FieldTime-1.0.61-CEIr5ENw.js"),__vite__mapDeps([53,1,2,3,32,4,5,6,7,33,34,35,36,37,38,9,10,11,39,12,13,14,15,16,17,18,19,40,8,41,42,43,44,45,54,51,24]),import.meta.url)),zi=r.lazy(()=>c(()=>import("./FieldCheckbox-1.0.61-DqFKC3L2.js"),__vite__mapDeps([55,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,30,56,29]),import.meta.url)),Fi=r.lazy(()=>c(()=>import("./ColumnWpMedia-1.0.61-DgouDCEJ.js"),__vite__mapDeps([57,1,2,3,4,5,6,7,32,58,18,9,10,11,59,34,60,61,17,62,8,12,13,14,15,16,19,38]),import.meta.url)),Ti=r.lazy(()=>c(()=>import("./ColumnHyperlink-1.0.61-D0f2NGqc.js"),__vite__mapDeps([63,1,2,3,4,5,6,7,62,9,8,10,11,12,13,14,15,16,17,18,19,30,56,29]),import.meta.url)),Wi=r.lazy(()=>c(()=>import("./FieldDuration-1.0.61-CIMh2g5U.js"),__vite__mapDeps([64,1,2,3,22,4,5,6,7,32,8,9,10,11,12,13,14,15,16,17,18,19]),import.meta.url)),_e=({appId:p,columnName:e,columnMetaData:f,storeColumn:k,columnValidation:y,onColumnChange:i,metaData:s,context:j,storeTable:n,storeForm:b,formMode:t,locale:S,language:d})=>{var H;T.debug(p,e,f,k,s,j,n,b,d);const W=I(p),l=hi(p),x=(W==null?void 0:W[e])??"",h=(l==null?void 0:l[e])??"",E=ti(),O=xi(E,t,e,s,p);if((H=s==null?void 0:s.media)!=null&&H[e]){if(["WP-Image","WP-Attachment","WP-Audio","WP-Video"].includes(s==null?void 0:s.media[e]))return u.jsx(r.Suspense,{children:u.jsx(Fi,{appId:p,columnName:e,columnValue:x,columnInitialValue:h,columnMetaData:f,storeColumn:k,columnValidation:y,onColumnChange:i,metaData:s,context:j,storeTable:n,storeForm:b,formMode:t,locale:S,language:d,columnMedia:j==null?void 0:j.media[e],mediaType:s==null?void 0:s.media[e]})});if((s==null?void 0:s.media[e])==="HyperlinkObject")return u.jsx(r.Suspense,{children:u.jsx(Ti,{appId:p,columnName:e,columnValue:x,columnInitialValue:h,columnMetaData:f,storeColumn:k,columnValidation:y,onColumnChange:i,metaData:s,context:j,storeTable:n,storeForm:b,formMode:t,locale:S})})}else{if(f.column_type.toLowerCase()==="tinyint(1)")return u.jsx(r.Suspense,{children:u.jsx(zi,{appId:p,columnName:e,columnValue:x,columnInitialValue:h,columnMetaData:f,storeColumn:k,columnValidation:y,onColumnChange:i,metaData:s,context:j,storeTable:n,storeForm:b,formMode:t,locale:S,columnEvents:O})});if(k.lookup!==void 0)return u.jsx(Ai,{appId:p,columnName:e,columnValue:x,columnInitialValue:h,columnMetaData:f,storeColumn:k,columnValidation:y,onColumnChange:i,metaData:s,context:j,storeTable:n,storeForm:b,formMode:t,locale:S,columnEvents:O})}switch(f.data_type.toLowerCase()){case"decimal":case"double":case"double precision":case"float":case"real":case"bit":case"tinyint":case"smallint":case"int":case"integer":case"mediumint":case"bigint":return u.jsx(r.Suspense,{children:u.jsx(Oi,{appId:p,columnName:e,columnValue:x,columnInitialValue:h,columnMetaData:f,storeColumn:k,columnValidation:y,onColumnChange:i,metaData:s,context:j,storeTable:n,storeForm:b,formMode:t,locale:S,language:d,columnEvents:O})});case"enum":return u.jsx(r.Suspense,{children:u.jsx(Ri,{appId:p,columnName:e,columnValue:x,columnInitialValue:h,columnMetaData:f,storeColumn:k,columnValidation:y,onColumnChange:i,metaData:s,context:j,storeTable:n,storeForm:b,formMode:t,locale:S,columnEvents:O})});case"set":return u.jsx(r.Suspense,{children:u.jsx(Li,{appId:p,columnName:e,columnValue:x,columnInitialValue:h,columnMetaData:f,storeColumn:k,columnValidation:y,onColumnChange:i,metaData:s,context:j,storeTable:n,storeForm:b,formMode:t,locale:S,columnEvents:O})});case"time":return k.duration===!0?u.jsx(r.Suspense,{children:u.jsx(Wi,{appId:p,columnName:e,columnValue:x,columnInitialValue:h,columnMetaData:f,storeColumn:k,columnValidation:y,onColumnChange:i,metaData:s,context:j,storeTable:n,storeForm:b,formMode:t,locale:S,language:d,columnEvents:O})}):u.jsx(r.Suspense,{children:u.jsx(li,{appId:p,columnName:e,columnValue:x,columnInitialValue:h,columnMetaData:f,storeColumn:k,columnValidation:y,onColumnChange:i,metaData:s,context:j,storeTable:n,storeForm:b,formMode:t,locale:S,language:d,columnEvents:O})});case"date":return u.jsx(r.Suspense,{children:u.jsx(ci,{appId:p,columnName:e,columnValue:x,columnInitialValue:h,columnMetaData:f,storeColumn:k,columnValidation:y,onColumnChange:i,metaData:s,context:j,storeTable:n,storeForm:b,formMode:t,locale:S,language:d,columnEvents:O})});case"datetime":case"timestamp":return u.jsx(r.Suspense,{children:u.jsx(Pi,{appId:p,columnName:e,columnValue:x,columnInitialValue:h,columnMetaData:f,storeColumn:k,columnValidation:y,onColumnChange:i,metaData:s,context:j,storeTable:n,storeForm:b,formMode:t,locale:S,language:d,columnEvents:O})});case"tinytext":case"text":case"mediumtext":case"longtext":return u.jsx(r.Suspense,{children:u.jsx(Si,{appId:p,columnName:e,columnValue:x,columnInitialValue:h,columnMetaData:f,storeColumn:k,columnValidation:y,onColumnChange:i,metaData:s,context:j,storeTable:n,storeForm:b,formMode:t,locale:S,columnEvents:O})});default:return u.jsx(r.Suspense,{children:u.jsx(bi,{appId:p,columnName:e,columnValue:x,columnInitialValue:h,columnMetaData:f,storeColumn:k,columnValidation:y,onColumnChange:i,metaData:s,context:j,storeTable:n,storeForm:b,formMode:t,locale:S,columnEvents:O})})}};export{_e as default};
