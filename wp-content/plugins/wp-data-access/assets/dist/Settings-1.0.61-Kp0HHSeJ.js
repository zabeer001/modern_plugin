const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ResizableDrawer-1.0.61-DK4GcbjM.js","./cm-1.0.61-D9ug3d5m.js","./redux-1.0.61-CrJ4jvTM.js","./vendor-1.0.61-CN03Eozo.js","./useScreenSize-1.0.61-B4FX7-PC.js","./lib-1.0.61-DoXQcMHD.js","./loglevel-1.0.61-BZ7XahX3.js","./lodash-1.0.61-C8OpKhUs.js","./moment-1.0.61-C5S46NFB.js","./hooks-1.0.61-Bklk-gZu.js","./Typography-1.0.61-Cg0Css-P.js","./ThemeProvider-1.0.61-4HOD8y6D.js","./useEnhancedEffect-1.0.61-CX4-xj9Z.js","./ButtonBase-1.0.61-BqsrQx8o.js","./Modal-1.0.61-DVFPMIPt.js","./notistack-1.0.61-0awN6uG4.js","./Menu-1.0.61-D2OtRuzX.js","./index-1.0.61-B7tjLD84.js","./iconBase-1.0.61-C8saXaJ2.js","./ThemeSettings-1.0.61-D8yINEx0.js","./AppTheme-1.0.61-CGnMRNDC.js","./index-1.0.61-CRnugLvI.js","./getThemeProps-1.0.61-OfsHdeDz.js","./PremiumFeature-1.0.61-BxBWJ4MJ.js","./index-1.0.61-Cpc7oUnN.js","./AdminTheme-1.0.61-D8bUxwpM.js","./TextField-1.0.61-DyvT2G_W.js","./Select-1.0.61-DmroHcG5.js","./createSvgIcon-1.0.61-DDgmYdEo.js","./index-1.0.61-LP991tft.js","./Spinner-1.0.61-khi9zO7Q.js","./Switch-1.0.61-CRYcdQMV.js","./SwitchBase-1.0.61-C2xa6JFZ.js","./Stack-1.0.61-CNGwl0k7.js","./InputAdornment-1.0.61-23wkGu1k.js","./cjs-1.0.61-D_0erLfe.js","./Slider-1.0.61-BGScnB2M.js","./visuallyHidden-1.0.61-Dan1xhjv.js","./FormControlLabel-1.0.61-Bu2IQ4da.js","./Link-1.0.61-BHBICLVE.js","./RadioGroup-1.0.61-BZHJMWN9.js","./Radio-1.0.61-BXMcBwcB.js","./CssUnitTextField-1.0.61-BJIwFsSj.js","./DynamicModeEnum-1.0.61-BXuL5kgA.js","./settings-1.0.61-BN5quc55.js","./TabPanel-1.0.61-BtYzUOMH.js","./ConfirmDialog-1.0.61-BrxkBu_y.js","./DialogContent-1.0.61-Ws3r0VFj.js","./CardHeader-1.0.61-gDG-f_-J.js","./MenuItem-1.0.61-Bmr1xWyp.js","./settings-1.0.61-DuwCupdk.css","./AccordionSummary-1.0.61-B21Kp3oq.js","./Collapse-1.0.61-Cww0NnSm.js","./AccordionDetails-1.0.61-CrQNuW_u.js","./SettingsMap-1.0.61-BHBBGb9k.js","./SettingsMapMarkers-1.0.61-BiQurno6.js","./useMapUpdater-1.0.61-BifPauYu.js","./cmJson-1.0.61-BLURwXOE.js","./rehyperaw-1.0.61-AkovKNCK.js","./markdown-1.0.61-6nAzZWly.js","./react-number-format.es-1.0.61-3K4hYgeH.js","./DefaultWhere-1.0.61-D25JpoiD.js","./useMetadata-1.0.61-CVl9oDgw.js","./SanitizeComponent-1.0.61-jz3CtJfW.js","./dompurify-1.0.61-DhD2mIk-.js"])))=>i.map(i=>d[i]);
import{_ as h}from"./cmJson-1.0.61-BLURwXOE.js";import{j as e}from"./cm-1.0.61-D9ug3d5m.js";import{r}from"./redux-1.0.61-CrJ4jvTM.js";import{u as U,a as F}from"./hooks-1.0.61-Bklk-gZu.js";import{l as S,b2 as u,S as l,a1 as G,b as H,s as K,bM as q,af as I,G as A,a as B,c as D}from"./lib-1.0.61-DoXQcMHD.js";import{B as W,a as X,b as Y}from"./settings-1.0.61-BN5quc55.js";import{d as J,A as Q,T as Z,M as $}from"./index-1.0.61-B7tjLD84.js";import{C as ee}from"./ConfirmDialog-1.0.61-BrxkBu_y.js";import{T as d}from"./Tooltip-1.0.61-De3BL3Jg.js";import{A as y}from"./AdminTheme-1.0.61-D8bUxwpM.js";import{e as m}from"./notistack-1.0.61-0awN6uG4.js";import{b as te}from"./ActionsSettings-1.0.61-NFzvwy8a.js";import{u as se}from"./useMapUpdater-1.0.61-BifPauYu.js";import{B as oe,S as x}from"./Spinner-1.0.61-khi9zO7Q.js";import{f as re}from"./index-1.0.61-Cpig8940.js";import{D as ie}from"./DynamicModeEnum-1.0.61-BXuL5kgA.js";import{T as ne}from"./Typography-1.0.61-Cg0Css-P.js";import{I as f}from"./iconBase-1.0.61-C8saXaJ2.js";import{C as E,a as R}from"./CardHeader-1.0.61-gDG-f_-J.js";import{T as ae,a as z}from"./TabPanel-1.0.61-BtYzUOMH.js";import{B as g}from"./cjs-1.0.61-D_0erLfe.js";import"./vendor-1.0.61-CN03Eozo.js";import"./rehyperaw-1.0.61-AkovKNCK.js";import"./markdown-1.0.61-6nAzZWly.js";import"./loglevel-1.0.61-BZ7XahX3.js";import"./lodash-1.0.61-C8OpKhUs.js";import"./moment-1.0.61-C5S46NFB.js";import"./Link-1.0.61-BHBICLVE.js";import"./ButtonBase-1.0.61-BqsrQx8o.js";import"./useEnhancedEffect-1.0.61-CX4-xj9Z.js";import"./Menu-1.0.61-D2OtRuzX.js";import"./ThemeProvider-1.0.61-4HOD8y6D.js";import"./Modal-1.0.61-DVFPMIPt.js";import"./TextField-1.0.61-DyvT2G_W.js";import"./Select-1.0.61-DmroHcG5.js";import"./createSvgIcon-1.0.61-DDgmYdEo.js";import"./InputAdornment-1.0.61-23wkGu1k.js";import"./getThemeProps-1.0.61-OfsHdeDz.js";import"./MenuItem-1.0.61-Bmr1xWyp.js";import"./DialogContent-1.0.61-Ws3r0VFj.js";import"./RestApi-1.0.61-DdTZ_pIc.js";import"./TargetEnum-1.0.61-CIW1jlU5.js";const le=t=>{const o=U(i=>{var n,c;return(c=(n=i.maps[t])==null?void 0:n.state)==null?void 0:c.isUpdated});return S.debug("isUpdated",o),o},me=t=>{const o=U(i=>i.ui.mapSettings.isOpen&&i.ui.mapSettings.appId===t);return S.debug(t,o),o},ce=r.lazy(()=>h(()=>import("./ResizableDrawer-1.0.61-DK4GcbjM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]),import.meta.url)),pe=r.lazy(()=>h(()=>import("./ThemeSettings-1.0.61-D8yINEx0.js"),__vite__mapDeps([19,1,2,3,9,5,6,7,8,20,21,10,22,12,23,24,18,13,25,26,27,16,11,17,14,15,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53]),import.meta.url)),ue=r.lazy(()=>h(()=>import("./SettingsMap-1.0.61-BHBBGb9k.js"),__vite__mapDeps([54,1,2,3,55,9,5,6,7,8,56,42,17,10,13,12,11,14,15,18,26,27,16,28,30,35,44,39,45,34,22,46,25,47,48,49,50,51,52,53,40,41,32,36,37,38,31,57,58,59,60,23,24,61,43,62,63,64]),import.meta.url)),ot=({appId:t})=>{var k,v;const o=F(),[i,n]=r.useState(u.getSelectors().selectMap(l.getState().maps,t)),[c,de]=r.useState(G.getSelectors().selectThemeById(l.getState().themes,t)),[w,b]=r.useState(!1),L=le(t),j=se(t),P=((k=y)==null?void 0:k.palette.mode)===H.LIGHT?(v=y)==null?void 0:v.palette.primary.main:"",M=s=>{o(K({anchor:s}))},_=()=>{o(A({appId:t,mapState:i}))},a=()=>{o(q()),o(I({appId:t,property:{isUpdated:!1}}))},p=()=>{L?b(!0):(_(),a())},C=()=>{te(t,s=>{if(S.debug(s),s!=null&&s.code&&(s==null?void 0:s.message)!==void 0)switch(s.code){case"ok":o(A({appId:t,mapState:u.getSelectors().selectMap(l.getState().maps,t)})),n(u.getSelectors().selectMap(l.getState().maps,t)),m(s.message,{variant:"success"});break;case"info":m(s.message,{variant:"info"});break;default:console.error(s),m(s.message??B.contactSupport,{variant:"error"})}},s=>{console.error("error",s),m(s??B.contactSupport,{variant:"error"})}),j(!1)},N=()=>{C(),a()},[T,V]=r.useState(0),O=r.useMemo(()=>[{title:"Map",icon:e.jsx(J,{})},{title:"Theme",icon:e.jsx(re,{})}],[]);return me(t)!==!0?null:e.jsxs(e.Fragment,{children:[e.jsx(r.Suspense,{fallback:e.jsx(x,{}),children:e.jsxs(ce,{closeDrawer:p,children:[e.jsxs(Q,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(Z,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(ne,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Map Builder"}),e.jsx(d,{title:"Dock to left",position:"bottom",children:e.jsx(f,{onClick:()=>{M(D.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(W,{})})}),e.jsx(d,{title:"Dock to right",position:"bottom",children:e.jsx(f,{onClick:()=>{M(D.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(X,{})})}),e.jsx(d,{title:"Close",position:"bottom",children:e.jsx(f,{onClick:p,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx($,{})})})]}),e.jsx(Y,{menuItems:O,menuIndex:T,setMenu:V})]}),e.jsx(E,{className:"pp-settings-container",children:e.jsx(R,{sx:{padding:0,margin:0},children:e.jsx(ae,{value:T,children:e.jsxs(oe,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(calc(var(--ppViewHeight, 1vh) * 100) - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(z,{value:0,children:e.jsx(r.Suspense,{fallback:e.jsx(x,{}),children:e.jsx(ue,{appId:t})})}),e.jsx(z,{value:1,children:e.jsx(r.Suspense,{fallback:e.jsx(x,{}),children:e.jsx(pe,{appId:t,source:ie.TABLE,setIsUpdated:j})})})]})})})}),e.jsx(E,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:P},children:e.jsxs(R,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(g,{variant:"outlined",className:"footer_action_button_apply",onClick:C,children:"Apply"}),e.jsx(g,{variant:"outlined",className:"footer_action_button",onClick:N,children:"OK"}),e.jsx(g,{variant:"outlined",className:"footer_action_button",onClick:p,children:"Cancel"})]})})]})}),e.jsx(ee,{title:"Close Map Builder?",message:"All uncommitted changes will be lost!",open:w,setOpen:b,onConfirm:()=>{_(),a()},onKeep:()=>{a()}})]})};export{ot as default};
